/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

"use strict";var Ht=Object.create;var _e=Object.defineProperty;var $t=Object.getOwnPropertyDescriptor;var Wt=Object.getOwnPropertyNames;var Vt=Object.getPrototypeOf,qt=Object.prototype.hasOwnProperty;var tt=(o,i)=>()=>(i||o((i={exports:{}}).exports,i),i.exports),Zt=(o,i)=>{for(var e in i)_e(o,e,{get:i[e],enumerable:!0})},ft=(o,i,e,t)=>{if(i&&typeof i=="object"||typeof i=="function")for(let s of Wt(i))!qt.call(o,s)&&s!==e&&_e(o,s,{get:()=>i[s],enumerable:!(t=$t(i,s))||t.enumerable});return o};var vt=(o,i,e)=>(e=o!=null?Ht(Vt(o)):{},ft(i||!o||!o.__esModule?_e(e,"default",{value:o,enumerable:!0}):e,o)),Gt=o=>ft(_e({},"__esModule",{value:!0}),o);var Lt=tt((Js,dt)=>{function Pt(o,i){if(i&&i.documentElement)o=i,i=arguments[2];else if(!o||!o.documentElement)throw new Error("First argument to Readability constructor should be a document object.");if(i=i||{},this._doc=o,this._docJSDOMParser=this._doc.firstChild.__JSDOMParser__,this._articleTitle=null,this._articleByline=null,this._articleDir=null,this._articleSiteName=null,this._attempts=[],this._metadata={},this._debug=!!i.debug,this._maxElemsToParse=i.maxElemsToParse||this.DEFAULT_MAX_ELEMS_TO_PARSE,this._nbTopCandidates=i.nbTopCandidates||this.DEFAULT_N_TOP_CANDIDATES,this._charThreshold=i.charThreshold||this.DEFAULT_CHAR_THRESHOLD,this._classesToPreserve=this.CLASSES_TO_PRESERVE.concat(i.classesToPreserve||[]),this._keepClasses=!!i.keepClasses,this._serializer=i.serializer||function(e){return e.innerHTML},this._disableJSONLD=!!i.disableJSONLD,this._allowedVideoRegex=i.allowedVideoRegex||this.REGEXPS.videos,this._linkDensityModifier=i.linkDensityModifier||0,this._flags=this.FLAG_STRIP_UNLIKELYS|this.FLAG_WEIGHT_CLASSES|this.FLAG_CLEAN_CONDITIONALLY,this._debug){let e=function(t){if(t.nodeType==t.TEXT_NODE)return`${t.nodeName} ("${t.textContent}")`;let s=Array.from(t.attributes||[],function(a){return`${a.name}="${a.value}"`}).join(" ");return`<${t.localName} ${s}>`};this.log=function(){if(typeof console!="undefined"){let s=Array.from(arguments,a=>a&&a.nodeType==this.ELEMENT_NODE?e(a):a);s.unshift("Reader: (Readability)"),console.log(...s)}else if(typeof dump!="undefined"){var t=Array.prototype.map.call(arguments,function(s){return s&&s.nodeName?e(s):s}).join(" ");dump("Reader: (Readability) "+t+`
`)}}}else this.log=function(){}}Pt.prototype={FLAG_STRIP_UNLIKELYS:1,FLAG_WEIGHT_CLASSES:2,FLAG_CLEAN_CONDITIONALLY:4,ELEMENT_NODE:1,TEXT_NODE:3,DEFAULT_MAX_ELEMS_TO_PARSE:0,DEFAULT_N_TOP_CANDIDATES:5,DEFAULT_TAGS_TO_SCORE:"section,h2,h3,h4,h5,h6,p,td,pre".toUpperCase().split(","),DEFAULT_CHAR_THRESHOLD:500,REGEXPS:{unlikelyCandidates:/-ad-|ai2html|banner|breadcrumbs|combx|comment|community|cover-wrap|disqus|extra|footer|gdpr|header|legends|menu|related|remark|replies|rss|shoutbox|sidebar|skyscraper|social|sponsor|supplemental|ad-break|agegate|pagination|pager|popup|yom-remote/i,okMaybeItsACandidate:/and|article|body|column|content|main|shadow/i,positive:/article|body|content|entry|hentry|h-entry|main|page|pagination|post|text|blog|story/i,negative:/-ad-|hidden|^hid$| hid$| hid |^hid |banner|combx|comment|com-|contact|footer|gdpr|masthead|media|meta|outbrain|promo|related|scroll|share|shoutbox|sidebar|skyscraper|sponsor|shopping|tags|widget/i,extraneous:/print|archive|comment|discuss|e[\-]?mail|share|reply|all|login|sign|single|utility/i,byline:/byline|author|dateline|writtenby|p-author/i,replaceFonts:/<(\/?)font[^>]*>/gi,normalize:/\s{2,}/g,videos:/\/\/(www\.)?((dailymotion|youtube|youtube-nocookie|player\.vimeo|v\.qq)\.com|(archive|upload\.wikimedia)\.org|player\.twitch\.tv)/i,shareElements:/(\b|_)(share|sharedaddy)(\b|_)/i,nextLink:/(next|weiter|continue|>([^\|]|$)|»([^\|]|$))/i,prevLink:/(prev|earl|old|new|<|«)/i,tokenize:/\W+/g,whitespace:/^\s*$/,hasContent:/\S$/,hashUrl:/^#.+/,srcsetUrl:/(\S+)(\s+[\d.]+[xw])?(\s*(?:,|$))/g,b64DataUrl:/^data:\s*([^\s;,]+)\s*;\s*base64\s*,/i,commas:/\u002C|\u060C|\uFE50|\uFE10|\uFE11|\u2E41|\u2E34|\u2E32|\uFF0C/g,jsonLdArticleTypes:/^Article|AdvertiserContentArticle|NewsArticle|AnalysisNewsArticle|AskPublicNewsArticle|BackgroundNewsArticle|OpinionNewsArticle|ReportageNewsArticle|ReviewNewsArticle|Report|SatiricalArticle|ScholarlyArticle|MedicalScholarlyArticle|SocialMediaPosting|BlogPosting|LiveBlogPosting|DiscussionForumPosting|TechArticle|APIReference$/,adWords:/^(ad(vertising|vertisement)?|pub(licité)?|werb(ung)?|广告|Реклама|Anuncio)$/iu,loadingWords:/^((loading|正在加载|Загрузка|chargement|cargando)(…|\.\.\.)?)$/iu},UNLIKELY_ROLES:["menu","menubar","complementary","navigation","alert","alertdialog","dialog"],DIV_TO_P_ELEMS:new Set(["BLOCKQUOTE","DL","DIV","IMG","OL","P","PRE","TABLE","UL"]),ALTER_TO_DIV_EXCEPTIONS:["DIV","ARTICLE","SECTION","P","OL","UL"],PRESENTATIONAL_ATTRIBUTES:["align","background","bgcolor","border","cellpadding","cellspacing","frame","hspace","rules","style","valign","vspace"],DEPRECATED_SIZE_ATTRIBUTE_ELEMS:["TABLE","TH","TD","HR","PRE"],PHRASING_ELEMS:["ABBR","AUDIO","B","BDO","BR","BUTTON","CITE","CODE","DATA","DATALIST","DFN","EM","EMBED","I","IMG","INPUT","KBD","LABEL","MARK","MATH","METER","NOSCRIPT","OBJECT","OUTPUT","PROGRESS","Q","RUBY","SAMP","SCRIPT","SELECT","SMALL","SPAN","STRONG","SUB","SUP","TEXTAREA","TIME","VAR","WBR"],CLASSES_TO_PRESERVE:["page"],HTML_ESCAPE_MAP:{lt:"<",gt:">",amp:"&",quot:'"',apos:"'"},_postProcessContent(o){this._fixRelativeUris(o),this._simplifyNestedElements(o),this._keepClasses||this._cleanClasses(o)},_removeNodes(o,i){if(this._docJSDOMParser&&o._isLiveNodeList)throw new Error("Do not pass live node lists to _removeNodes");for(var e=o.length-1;e>=0;e--){var t=o[e],s=t.parentNode;s&&(!i||i.call(this,t,e,o))&&s.removeChild(t)}},_replaceNodeTags(o,i){if(this._docJSDOMParser&&o._isLiveNodeList)throw new Error("Do not pass live node lists to _replaceNodeTags");for(let e of o)this._setNodeTag(e,i)},_forEachNode(o,i){Array.prototype.forEach.call(o,i,this)},_findNode(o,i){return Array.prototype.find.call(o,i,this)},_someNode(o,i){return Array.prototype.some.call(o,i,this)},_everyNode(o,i){return Array.prototype.every.call(o,i,this)},_getAllNodesWithTag(o,i){return o.querySelectorAll?o.querySelectorAll(i.join(",")):[].concat.apply([],i.map(function(e){var t=o.getElementsByTagName(e);return Array.isArray(t)?t:Array.from(t)}))},_cleanClasses(o){var i=this._classesToPreserve,e=(o.getAttribute("class")||"").split(/\s+/).filter(t=>i.includes(t)).join(" ");for(e?o.setAttribute("class",e):o.removeAttribute("class"),o=o.firstElementChild;o;o=o.nextElementSibling)this._cleanClasses(o)},_isUrl(o){try{return new URL(o),!0}catch(i){return!1}},_fixRelativeUris(o){var i=this._doc.baseURI,e=this._doc.documentURI;function t(r){if(i==e&&r.charAt(0)=="#")return r;try{return new URL(r,i).href}catch(n){}return r}var s=this._getAllNodesWithTag(o,["a"]);this._forEachNode(s,function(r){var n=r.getAttribute("href");if(n)if(n.indexOf("javascript:")===0)if(r.childNodes.length===1&&r.childNodes[0].nodeType===this.TEXT_NODE){var l=this._doc.createTextNode(r.textContent);r.parentNode.replaceChild(l,r)}else{for(var d=this._doc.createElement("span");r.firstChild;)d.appendChild(r.firstChild);r.parentNode.replaceChild(d,r)}else r.setAttribute("href",t(n))});var a=this._getAllNodesWithTag(o,["img","picture","figure","video","audio","source"]);this._forEachNode(a,function(r){var n=r.getAttribute("src"),l=r.getAttribute("poster"),d=r.getAttribute("srcset");if(n&&r.setAttribute("src",t(n)),l&&r.setAttribute("poster",t(l)),d){var c=d.replace(this.REGEXPS.srcsetUrl,function(u,g,m,f){return t(g)+(m||"")+f});r.setAttribute("srcset",c)}})},_simplifyNestedElements(o){for(var i=o;i;){if(i.parentNode&&["DIV","SECTION"].includes(i.tagName)&&!(i.id&&i.id.startsWith("readability"))){if(this._isElementWithoutContent(i)){i=this._removeAndGetNext(i);continue}else if(this._hasSingleTagInsideElement(i,"DIV")||this._hasSingleTagInsideElement(i,"SECTION")){for(var e=i.children[0],t=0;t<i.attributes.length;t++)e.setAttributeNode(i.attributes[t].cloneNode());i.parentNode.replaceChild(e,i),i=e;continue}}i=this._getNextNode(i)}},_getArticleTitle(){var o=this._doc,i="",e="";try{i=e=o.title.trim(),typeof i!="string"&&(i=e=this._getInnerText(o.getElementsByTagName("title")[0]))}catch(c){}var t=!1;function s(c){return c.split(/\s+/).length}if(/ [\|\-\\\/>»] /.test(i)){t=/ [\\\/>»] /.test(i);let c=Array.from(e.matchAll(/ [\|\-\\\/>»] /gi));i=e.substring(0,c.pop().index),s(i)<3&&(i=e.replace(/^[^\|\-\\\/>»]*[\|\-\\\/>»]/gi,""))}else if(i.includes(": ")){var a=this._getAllNodesWithTag(o,["h1","h2"]),r=i.trim(),n=this._someNode(a,function(c){return c.textContent.trim()===r});n||(i=e.substring(e.lastIndexOf(":")+1),s(i)<3?i=e.substring(e.indexOf(":")+1):s(e.substr(0,e.indexOf(":")))>5&&(i=e))}else if(i.length>150||i.length<15){var l=o.getElementsByTagName("h1");l.length===1&&(i=this._getInnerText(l[0]))}i=i.trim().replace(this.REGEXPS.normalize," ");var d=s(i);return d<=4&&(!t||d!=s(e.replace(/[\|\-\\\/>»]+/g,""))-1)&&(i=e),i},_prepDocument(){var o=this._doc;this._removeNodes(this._getAllNodesWithTag(o,["style"])),o.body&&this._replaceBrs(o.body),this._replaceNodeTags(this._getAllNodesWithTag(o,["font"]),"SPAN")},_nextNode(o){for(var i=o;i&&i.nodeType!=this.ELEMENT_NODE&&this.REGEXPS.whitespace.test(i.textContent);)i=i.nextSibling;return i},_replaceBrs(o){this._forEachNode(this._getAllNodesWithTag(o,["br"]),function(i){for(var e=i.nextSibling,t=!1;(e=this._nextNode(e))&&e.tagName=="BR";){t=!0;var s=e.nextSibling;e.remove(),e=s}if(t){var a=this._doc.createElement("p");for(i.parentNode.replaceChild(a,i),e=a.nextSibling;e;){if(e.tagName=="BR"){var r=this._nextNode(e.nextSibling);if(r&&r.tagName=="BR")break}if(!this._isPhrasingContent(e))break;var n=e.nextSibling;a.appendChild(e),e=n}for(;a.lastChild&&this._isWhitespace(a.lastChild);)a.lastChild.remove();a.parentNode.tagName==="P"&&this._setNodeTag(a.parentNode,"DIV")}})},_setNodeTag(o,i){if(this.log("_setNodeTag",o,i),this._docJSDOMParser)return o.localName=i.toLowerCase(),o.tagName=i.toUpperCase(),o;for(var e=o.ownerDocument.createElement(i);o.firstChild;)e.appendChild(o.firstChild);o.parentNode.replaceChild(e,o),o.readability&&(e.readability=o.readability);for(var t=0;t<o.attributes.length;t++)e.setAttributeNode(o.attributes[t].cloneNode());return e},_prepArticle(o){this._cleanStyles(o),this._markDataTables(o),this._fixLazyImages(o),this._cleanConditionally(o,"form"),this._cleanConditionally(o,"fieldset"),this._clean(o,"object"),this._clean(o,"embed"),this._clean(o,"footer"),this._clean(o,"link"),this._clean(o,"aside");var i=this.DEFAULT_CHAR_THRESHOLD;this._forEachNode(o.children,function(e){this._cleanMatchedNodes(e,function(t,s){return this.REGEXPS.shareElements.test(s)&&t.textContent.length<i})}),this._clean(o,"iframe"),this._clean(o,"input"),this._clean(o,"textarea"),this._clean(o,"select"),this._clean(o,"button"),this._cleanHeaders(o),this._cleanConditionally(o,"table"),this._cleanConditionally(o,"ul"),this._cleanConditionally(o,"div"),this._replaceNodeTags(this._getAllNodesWithTag(o,["h1"]),"h2"),this._removeNodes(this._getAllNodesWithTag(o,["p"]),function(e){var t=this._getAllNodesWithTag(e,["img","embed","object","iframe"]).length;return t===0&&!this._getInnerText(e,!1)}),this._forEachNode(this._getAllNodesWithTag(o,["br"]),function(e){var t=this._nextNode(e.nextSibling);t&&t.tagName=="P"&&e.remove()}),this._forEachNode(this._getAllNodesWithTag(o,["table"]),function(e){var t=this._hasSingleTagInsideElement(e,"TBODY")?e.firstElementChild:e;if(this._hasSingleTagInsideElement(t,"TR")){var s=t.firstElementChild;if(this._hasSingleTagInsideElement(s,"TD")){var a=s.firstElementChild;a=this._setNodeTag(a,this._everyNode(a.childNodes,this._isPhrasingContent)?"P":"DIV"),e.parentNode.replaceChild(a,e)}}})},_initializeNode(o){switch(o.readability={contentScore:0},o.tagName){case"DIV":o.readability.contentScore+=5;break;case"PRE":case"TD":case"BLOCKQUOTE":o.readability.contentScore+=3;break;case"ADDRESS":case"OL":case"UL":case"DL":case"DD":case"DT":case"LI":case"FORM":o.readability.contentScore-=3;break;case"H1":case"H2":case"H3":case"H4":case"H5":case"H6":case"TH":o.readability.contentScore-=5;break}o.readability.contentScore+=this._getClassWeight(o)},_removeAndGetNext(o){var i=this._getNextNode(o,!0);return o.remove(),i},_getNextNode(o,i){if(!i&&o.firstElementChild)return o.firstElementChild;if(o.nextElementSibling)return o.nextElementSibling;do o=o.parentNode;while(o&&!o.nextElementSibling);return o&&o.nextElementSibling},_textSimilarity(o,i){var e=o.toLowerCase().split(this.REGEXPS.tokenize).filter(Boolean),t=i.toLowerCase().split(this.REGEXPS.tokenize).filter(Boolean);if(!e.length||!t.length)return 0;var s=t.filter(r=>!e.includes(r)),a=s.join(" ").length/t.join(" ").length;return 1-a},_isValidByline(o,i){var e=o.getAttribute("rel"),t=o.getAttribute("itemprop"),s=o.textContent.trim().length;return(e==="author"||t&&t.includes("author")||this.REGEXPS.byline.test(i))&&!!s&&s<100},_getNodeAncestors(o,i){i=i||0;for(var e=0,t=[];o.parentNode&&(t.push(o.parentNode),!(i&&++e===i));)o=o.parentNode;return t},_grabArticle(o){this.log("**** grabArticle ****");var i=this._doc,e=o!==null;if(o=o||this._doc.body,!o)return this.log("No body found in document. Abort."),null;for(var t=o.innerHTML;;){this.log("Starting grabArticle loop");var s=this._flagIsActive(this.FLAG_STRIP_UNLIKELYS),a=[],r=this._doc.documentElement;let xe=!0;for(;r;){r.tagName==="HTML"&&(this._articleLang=r.getAttribute("lang"));var n=r.className+" "+r.id;if(!this._isProbablyVisible(r)){this.log("Removing hidden node - "+n),r=this._removeAndGetNext(r);continue}if(r.getAttribute("aria-modal")=="true"&&r.getAttribute("role")=="dialog"){r=this._removeAndGetNext(r);continue}if(!this._articleByline&&!this._metadata.byline&&this._isValidByline(r,n)){for(var l=this._getNextNode(r,!0),d=this._getNextNode(r),c=null;d&&d!=l;){var u=d.getAttribute("itemprop");if(u&&u.includes("name")){c=d;break}else d=this._getNextNode(d)}this._articleByline=(c!=null?c:r).textContent.trim(),r=this._removeAndGetNext(r);continue}if(xe&&this._headerDuplicatesTitle(r)){this.log("Removing header: ",r.textContent.trim(),this._articleTitle.trim()),xe=!1,r=this._removeAndGetNext(r);continue}if(s){if(this.REGEXPS.unlikelyCandidates.test(n)&&!this.REGEXPS.okMaybeItsACandidate.test(n)&&!this._hasAncestorTag(r,"table")&&!this._hasAncestorTag(r,"code")&&r.tagName!=="BODY"&&r.tagName!=="A"){this.log("Removing unlikely candidate - "+n),r=this._removeAndGetNext(r);continue}if(this.UNLIKELY_ROLES.includes(r.getAttribute("role"))){this.log("Removing content with role "+r.getAttribute("role")+" - "+n),r=this._removeAndGetNext(r);continue}}if((r.tagName==="DIV"||r.tagName==="SECTION"||r.tagName==="HEADER"||r.tagName==="H1"||r.tagName==="H2"||r.tagName==="H3"||r.tagName==="H4"||r.tagName==="H5"||r.tagName==="H6")&&this._isElementWithoutContent(r)){r=this._removeAndGetNext(r);continue}if(this.DEFAULT_TAGS_TO_SCORE.includes(r.tagName)&&a.push(r),r.tagName==="DIV"){for(var g=null,m=r.firstChild;m;){var f=m.nextSibling;if(this._isPhrasingContent(m))g!==null?g.appendChild(m):this._isWhitespace(m)||(g=i.createElement("p"),r.replaceChild(g,m),g.appendChild(m));else if(g!==null){for(;g.lastChild&&this._isWhitespace(g.lastChild);)g.lastChild.remove();g=null}m=f}if(this._hasSingleTagInsideElement(r,"P")&&this._getLinkDensity(r)<.25){var p=r.children[0];r.parentNode.replaceChild(p,r),r=p,a.push(r)}else this._hasChildBlockElement(r)||(r=this._setNodeTag(r,"P"),a.push(r))}r=this._getNextNode(r)}var h=[];this._forEachNode(a,function(ie){if(!(!ie.parentNode||typeof ie.parentNode.tagName=="undefined")){var de=this._getInnerText(ie);if(!(de.length<25)){var q=this._getNodeAncestors(ie,5);if(q.length!==0){var he=0;he+=1,he+=de.split(this.REGEXPS.commas).length,he+=Math.min(Math.floor(de.length/100),3),this._forEachNode(q,function(ye,Ie){if(!(!ye.tagName||!ye.parentNode||typeof ye.parentNode.tagName=="undefined")){if(typeof ye.readability=="undefined"&&(this._initializeNode(ye),h.push(ye)),Ie===0)var et=1;else Ie===1?et=2:et=Ie*3;ye.readability.contentScore+=he/et}})}}}});for(var v=[],y=0,w=h.length;y<w;y+=1){var E=h[y],T=E.readability.contentScore*(1-this._getLinkDensity(E));E.readability.contentScore=T,this.log("Candidate:",E,"with score "+T);for(var x=0;x<this._nbTopCandidates;x++){var S=v[x];if(!S||T>S.readability.contentScore){v.splice(x,0,E),v.length>this._nbTopCandidates&&v.pop();break}}}var b=v[0]||null,C=!1,A;if(b===null||b.tagName==="BODY"){for(b=i.createElement("DIV"),C=!0;o.firstChild;)this.log("Moving child out:",o.firstChild),b.appendChild(o.firstChild);o.appendChild(b),this._initializeNode(b)}else if(b){for(var F=[],D=1;D<v.length;D++)v[D].readability.contentScore/b.readability.contentScore>=.75&&F.push(this._getNodeAncestors(v[D]));var L=3;if(F.length>=L)for(A=b.parentNode;A.tagName!=="BODY";){for(var M=0,U=0;U<F.length&&M<L;U++)M+=Number(F[U].includes(A));if(M>=L){b=A;break}A=A.parentNode}b.readability||this._initializeNode(b),A=b.parentNode;for(var _=b.readability.contentScore,G=_/3;A.tagName!=="BODY";){if(!A.readability){A=A.parentNode;continue}var $=A.readability.contentScore;if($<G)break;if($>_){b=A;break}_=A.readability.contentScore,A=A.parentNode}for(A=b.parentNode;A.tagName!="BODY"&&A.children.length==1;)b=A,A=b.parentNode;b.readability||this._initializeNode(b)}var z=i.createElement("DIV");e&&(z.id="readability-content");var Q=Math.max(10,b.readability.contentScore*.2);A=b.parentNode;for(var V=A.children,Y=0,J=V.length;Y<J;Y++){var R=V[Y],K=!1;if(this.log("Looking at sibling node:",R,R.readability?"with score "+R.readability.contentScore:""),this.log("Sibling has score",R.readability?R.readability.contentScore:"Unknown"),R===b)K=!0;else{var le=0;if(R.className===b.className&&b.className!==""&&(le+=b.readability.contentScore*.2),R.readability&&R.readability.contentScore+le>=Q)K=!0;else if(R.nodeName==="P"){var H=this._getLinkDensity(R),se=this._getInnerText(R),ce=se.length;(ce>80&&H<.25||ce<80&&ce>0&&H===0&&se.search(/\.( |$)/)!==-1)&&(K=!0)}}K&&(this.log("Appending node:",R),this.ALTER_TO_DIV_EXCEPTIONS.includes(R.nodeName)||(this.log("Altering sibling:",R,"to div."),R=this._setNodeTag(R,"DIV")),z.appendChild(R),V=A.children,Y-=1,J-=1)}if(this._debug&&this.log("Article content pre-prep: "+z.innerHTML),this._prepArticle(z),this._debug&&this.log("Article content post-prep: "+z.innerHTML),C)b.id="readability-page-1",b.className="page";else{var fe=i.createElement("DIV");for(fe.id="readability-page-1",fe.className="page";z.firstChild;)fe.appendChild(z.firstChild);z.appendChild(fe)}this._debug&&this.log("Article content after paging: "+z.innerHTML);var ve=!0,De=this._getInnerText(z,!0).length;if(De<this._charThreshold)if(ve=!1,o.innerHTML=t,this._attempts.push({articleContent:z,textLength:De}),this._flagIsActive(this.FLAG_STRIP_UNLIKELYS))this._removeFlag(this.FLAG_STRIP_UNLIKELYS);else if(this._flagIsActive(this.FLAG_WEIGHT_CLASSES))this._removeFlag(this.FLAG_WEIGHT_CLASSES);else if(this._flagIsActive(this.FLAG_CLEAN_CONDITIONALLY))this._removeFlag(this.FLAG_CLEAN_CONDITIONALLY);else{if(this._attempts.sort(function(ie,de){return de.textLength-ie.textLength}),!this._attempts[0].textLength)return null;z=this._attempts[0].articleContent,ve=!0}if(ve){var Be=[A,b].concat(this._getNodeAncestors(A));return this._someNode(Be,function(ie){if(!ie.tagName)return!1;var de=ie.getAttribute("dir");return de?(this._articleDir=de,!0):!1}),z}}},_unescapeHtmlEntities(o){if(!o)return o;var i=this.HTML_ESCAPE_MAP;return o.replace(/&(quot|amp|apos|lt|gt);/g,function(e,t){return i[t]}).replace(/&#(?:x([0-9a-f]+)|([0-9]+));/gi,function(e,t,s){var a=parseInt(t||s,t?16:10);return(a==0||a>1114111||a>=55296&&a<=57343)&&(a=65533),String.fromCodePoint(a)})},_getJSONLD(o){var i=this._getAllNodesWithTag(o,["script"]),e;return this._forEachNode(i,function(t){if(!e&&t.getAttribute("type")==="application/ld+json")try{var s=t.textContent.replace(/^\s*<!\[CDATA\[|\]\]>\s*$/g,""),a=JSON.parse(s);if(Array.isArray(a)&&(a=a.find(u=>u["@type"]&&u["@type"].match(this.REGEXPS.jsonLdArticleTypes)),!a))return;var r=/^https?\:\/\/schema\.org\/?$/,n=typeof a["@context"]=="string"&&a["@context"].match(r)||typeof a["@context"]=="object"&&typeof a["@context"]["@vocab"]=="string"&&a["@context"]["@vocab"].match(r);if(!n||(!a["@type"]&&Array.isArray(a["@graph"])&&(a=a["@graph"].find(u=>(u["@type"]||"").match(this.REGEXPS.jsonLdArticleTypes))),!a||!a["@type"]||!a["@type"].match(this.REGEXPS.jsonLdArticleTypes)))return;if(e={},typeof a.name=="string"&&typeof a.headline=="string"&&a.name!==a.headline){var l=this._getArticleTitle(),d=this._textSimilarity(a.name,l)>.75,c=this._textSimilarity(a.headline,l)>.75;c&&!d?e.title=a.headline:e.title=a.name}else typeof a.name=="string"?e.title=a.name.trim():typeof a.headline=="string"&&(e.title=a.headline.trim());a.author&&(typeof a.author.name=="string"?e.byline=a.author.name.trim():Array.isArray(a.author)&&a.author[0]&&typeof a.author[0].name=="string"&&(e.byline=a.author.filter(function(u){return u&&typeof u.name=="string"}).map(function(u){return u.name.trim()}).join(", "))),typeof a.description=="string"&&(e.excerpt=a.description.trim()),a.publisher&&typeof a.publisher.name=="string"&&(e.siteName=a.publisher.name.trim()),typeof a.datePublished=="string"&&(e.datePublished=a.datePublished.trim())}catch(u){this.log(u.message)}}),e||{}},_getArticleMetadata(o){var i={},e={},t=this._doc.getElementsByTagName("meta"),s=/\s*(article|dc|dcterm|og|twitter)\s*:\s*(author|creator|description|published_time|title|site_name)\s*/gi,a=/^\s*(?:(dc|dcterm|og|twitter|parsely|weibo:(article|webpage))\s*[-\.:]\s*)?(author|creator|pub-date|description|title|site_name)\s*$/i;this._forEachNode(t,function(n){var l=n.getAttribute("name"),d=n.getAttribute("property"),c=n.getAttribute("content");if(c){var u=null,g=null;d&&(u=d.match(s),u&&(g=u[0].toLowerCase().replace(/\s/g,""),e[g]=c.trim())),!u&&l&&a.test(l)&&(g=l,c&&(g=g.toLowerCase().replace(/\s/g,"").replace(/\./g,":"),e[g]=c.trim()))}}),i.title=o.title||e["dc:title"]||e["dcterm:title"]||e["og:title"]||e["weibo:article:title"]||e["weibo:webpage:title"]||e.title||e["twitter:title"]||e["parsely-title"],i.title||(i.title=this._getArticleTitle());let r=typeof e["article:author"]=="string"&&!this._isUrl(e["article:author"])?e["article:author"]:void 0;return i.byline=o.byline||e["dc:creator"]||e["dcterm:creator"]||e.author||e["parsely-author"]||r,i.excerpt=o.excerpt||e["dc:description"]||e["dcterm:description"]||e["og:description"]||e["weibo:article:description"]||e["weibo:webpage:description"]||e.description||e["twitter:description"],i.siteName=o.siteName||e["og:site_name"],i.publishedTime=o.datePublished||e["article:published_time"]||e["parsely-pub-date"]||null,i.title=this._unescapeHtmlEntities(i.title),i.byline=this._unescapeHtmlEntities(i.byline),i.excerpt=this._unescapeHtmlEntities(i.excerpt),i.siteName=this._unescapeHtmlEntities(i.siteName),i.publishedTime=this._unescapeHtmlEntities(i.publishedTime),i},_isSingleImage(o){for(;o;){if(o.tagName==="IMG")return!0;if(o.children.length!==1||o.textContent.trim()!=="")return!1;o=o.children[0]}return!1},_unwrapNoscriptImages(o){var i=Array.from(o.getElementsByTagName("img"));this._forEachNode(i,function(t){for(var s=0;s<t.attributes.length;s++){var a=t.attributes[s];switch(a.name){case"src":case"srcset":case"data-src":case"data-srcset":return}if(/\.(jpg|jpeg|png|webp)/i.test(a.value))return}t.remove()});var e=Array.from(o.getElementsByTagName("noscript"));this._forEachNode(e,function(t){if(this._isSingleImage(t)){var s=o.createElement("div");s.innerHTML=t.innerHTML;var a=t.previousElementSibling;if(a&&this._isSingleImage(a)){var r=a;r.tagName!=="IMG"&&(r=a.getElementsByTagName("img")[0]);for(var n=s.getElementsByTagName("img")[0],l=0;l<r.attributes.length;l++){var d=r.attributes[l];if(d.value!==""&&(d.name==="src"||d.name==="srcset"||/\.(jpg|jpeg|png|webp)/i.test(d.value))){if(n.getAttribute(d.name)===d.value)continue;var c=d.name;n.hasAttribute(c)&&(c="data-old-"+c),n.setAttribute(c,d.value)}}t.parentNode.replaceChild(s.firstElementChild,a)}}})},_removeScripts(o){this._removeNodes(this._getAllNodesWithTag(o,["script","noscript"]))},_hasSingleTagInsideElement(o,i){return o.children.length!=1||o.children[0].tagName!==i?!1:!this._someNode(o.childNodes,function(e){return e.nodeType===this.TEXT_NODE&&this.REGEXPS.hasContent.test(e.textContent)})},_isElementWithoutContent(o){return o.nodeType===this.ELEMENT_NODE&&!o.textContent.trim().length&&(!o.children.length||o.children.length==o.getElementsByTagName("br").length+o.getElementsByTagName("hr").length)},_hasChildBlockElement(o){return this._someNode(o.childNodes,function(i){return this.DIV_TO_P_ELEMS.has(i.tagName)||this._hasChildBlockElement(i)})},_isPhrasingContent(o){return o.nodeType===this.TEXT_NODE||this.PHRASING_ELEMS.includes(o.tagName)||(o.tagName==="A"||o.tagName==="DEL"||o.tagName==="INS")&&this._everyNode(o.childNodes,this._isPhrasingContent)},_isWhitespace(o){return o.nodeType===this.TEXT_NODE&&o.textContent.trim().length===0||o.nodeType===this.ELEMENT_NODE&&o.tagName==="BR"},_getInnerText(o,i){i=typeof i=="undefined"?!0:i;var e=o.textContent.trim();return i?e.replace(this.REGEXPS.normalize," "):e},_getCharCount(o,i){return i=i||",",this._getInnerText(o).split(i).length-1},_cleanStyles(o){if(!(!o||o.tagName.toLowerCase()==="svg")){for(var i=0;i<this.PRESENTATIONAL_ATTRIBUTES.length;i++)o.removeAttribute(this.PRESENTATIONAL_ATTRIBUTES[i]);this.DEPRECATED_SIZE_ATTRIBUTE_ELEMS.includes(o.tagName)&&(o.removeAttribute("width"),o.removeAttribute("height"));for(var e=o.firstElementChild;e!==null;)this._cleanStyles(e),e=e.nextElementSibling}},_getLinkDensity(o){var i=this._getInnerText(o).length;if(i===0)return 0;var e=0;return this._forEachNode(o.getElementsByTagName("a"),function(t){var s=t.getAttribute("href"),a=s&&this.REGEXPS.hashUrl.test(s)?.3:1;e+=this._getInnerText(t).length*a}),e/i},_getClassWeight(o){if(!this._flagIsActive(this.FLAG_WEIGHT_CLASSES))return 0;var i=0;return typeof o.className=="string"&&o.className!==""&&(this.REGEXPS.negative.test(o.className)&&(i-=25),this.REGEXPS.positive.test(o.className)&&(i+=25)),typeof o.id=="string"&&o.id!==""&&(this.REGEXPS.negative.test(o.id)&&(i-=25),this.REGEXPS.positive.test(o.id)&&(i+=25)),i},_clean(o,i){var e=["object","embed","iframe"].includes(i);this._removeNodes(this._getAllNodesWithTag(o,[i]),function(t){if(e){for(var s=0;s<t.attributes.length;s++)if(this._allowedVideoRegex.test(t.attributes[s].value))return!1;if(t.tagName==="object"&&this._allowedVideoRegex.test(t.innerHTML))return!1}return!0})},_hasAncestorTag(o,i,e,t){e=e||3,i=i.toUpperCase();for(var s=0;o.parentNode;){if(e>0&&s>e)return!1;if(o.parentNode.tagName===i&&(!t||t(o.parentNode)))return!0;o=o.parentNode,s++}return!1},_getRowAndColumnCount(o){for(var i=0,e=0,t=o.getElementsByTagName("tr"),s=0;s<t.length;s++){var a=t[s].getAttribute("rowspan")||0;a&&(a=parseInt(a,10)),i+=a||1;for(var r=0,n=t[s].getElementsByTagName("td"),l=0;l<n.length;l++){var d=n[l].getAttribute("colspan")||0;d&&(d=parseInt(d,10)),r+=d||1}e=Math.max(e,r)}return{rows:i,columns:e}},_markDataTables(o){for(var i=o.getElementsByTagName("table"),e=0;e<i.length;e++){var t=i[e],s=t.getAttribute("role");if(s=="presentation"){t._readabilityDataTable=!1;continue}var a=t.getAttribute("datatable");if(a=="0"){t._readabilityDataTable=!1;continue}var r=t.getAttribute("summary");if(r){t._readabilityDataTable=!0;continue}var n=t.getElementsByTagName("caption")[0];if(n&&n.childNodes.length){t._readabilityDataTable=!0;continue}var l=["col","colgroup","tfoot","thead","th"],d=function(u){return!!t.getElementsByTagName(u)[0]};if(l.some(d)){this.log("Data table because found data-y descendant"),t._readabilityDataTable=!0;continue}if(t.getElementsByTagName("table")[0]){t._readabilityDataTable=!1;continue}var c=this._getRowAndColumnCount(t);if(c.columns==1||c.rows==1){t._readabilityDataTable=!1;continue}if(c.rows>=10||c.columns>4){t._readabilityDataTable=!0;continue}t._readabilityDataTable=c.rows*c.columns>10}},_fixLazyImages(o){this._forEachNode(this._getAllNodesWithTag(o,["img","picture","figure"]),function(i){if(i.src&&this.REGEXPS.b64DataUrl.test(i.src)){var e=this.REGEXPS.b64DataUrl.exec(i.src);if(e[1]==="image/svg+xml")return;for(var t=!1,s=0;s<i.attributes.length;s++){var a=i.attributes[s];if(a.name!=="src"&&/\.(jpg|jpeg|png|webp)/i.test(a.value)){t=!0;break}}if(t){var r=e[0].length,n=i.src.length-r;n<133&&i.removeAttribute("src")}}if(!((i.src||i.srcset&&i.srcset!="null")&&!i.className.toLowerCase().includes("lazy"))){for(var l=0;l<i.attributes.length;l++)if(a=i.attributes[l],!(a.name==="src"||a.name==="srcset"||a.name==="alt")){var d=null;if(/\.(jpg|jpeg|png|webp)\s+\d/.test(a.value)?d="srcset":/^\s*\S+\.(jpg|jpeg|png|webp)\S*\s*$/.test(a.value)&&(d="src"),d){if(i.tagName==="IMG"||i.tagName==="PICTURE")i.setAttribute(d,a.value);else if(i.tagName==="FIGURE"&&!this._getAllNodesWithTag(i,["img","picture"]).length){var c=this._doc.createElement("img");c.setAttribute(d,a.value),i.appendChild(c)}}}}})},_getTextDensity(o,i){var e=this._getInnerText(o,!0).length;if(e===0)return 0;var t=0,s=this._getAllNodesWithTag(o,i);return this._forEachNode(s,a=>t+=this._getInnerText(a,!0).length),t/e},_cleanConditionally(o,i){this._flagIsActive(this.FLAG_CLEAN_CONDITIONALLY)&&this._removeNodes(this._getAllNodesWithTag(o,[i]),function(e){var t=function(A){return A._readabilityDataTable},s=i==="ul"||i==="ol";if(!s){var a=0,r=this._getAllNodesWithTag(e,["ul","ol"]);this._forEachNode(r,A=>a+=this._getInnerText(A).length),s=a/this._getInnerText(e).length>.9}if(i==="table"&&t(e)||this._hasAncestorTag(e,"table",-1,t)||this._hasAncestorTag(e,"code")||[...e.getElementsByTagName("table")].some(A=>A._readabilityDataTable))return!1;var n=this._getClassWeight(e);this.log("Cleaning Conditionally",e);var l=0;if(n+l<0)return!0;if(this._getCharCount(e,",")<10){for(var d=e.getElementsByTagName("p").length,c=e.getElementsByTagName("img").length,u=e.getElementsByTagName("li").length-100,g=e.getElementsByTagName("input").length,m=this._getTextDensity(e,["h1","h2","h3","h4","h5","h6"]),f=0,p=this._getAllNodesWithTag(e,["object","embed","iframe"]),h=0;h<p.length;h++){for(var v=0;v<p[h].attributes.length;v++)if(this._allowedVideoRegex.test(p[h].attributes[v].value))return!1;if(p[h].tagName==="object"&&this._allowedVideoRegex.test(p[h].innerHTML))return!1;f++}var y=this._getInnerText(e);if(this.REGEXPS.adWords.test(y)||this.REGEXPS.loadingWords.test(y))return!0;var w=y.length,E=this._getLinkDensity(e),T=["SPAN","LI","TD"].concat(Array.from(this.DIV_TO_P_ELEMS)),x=this._getTextDensity(e,T),S=this._hasAncestorTag(e,"figure"),b=(()=>{let F=[];return!S&&c>1&&d/c<.5&&F.push(`Bad p to img ratio (img=${c}, p=${d})`),!s&&u>d&&F.push(`Too many li's outside of a list. (li=${u} > p=${d})`),g>Math.floor(d/3)&&F.push(`Too many inputs per p. (input=${g}, p=${d})`),!s&&!S&&m<.9&&w<25&&(c===0||c>2)&&E>0&&F.push(`Suspiciously short. (headingDensity=${m}, img=${c}, linkDensity=${E})`),!s&&n<25&&E>.2+this._linkDensityModifier&&F.push(`Low weight and a little linky. (linkDensity=${E})`),n>=25&&E>.5+this._linkDensityModifier&&F.push(`High weight and mostly links. (linkDensity=${E})`),(f===1&&w<75||f>1)&&F.push(`Suspicious embed. (embedCount=${f}, contentLength=${w})`),c===0&&x===0&&F.push(`No useful content. (img=${c}, textDensity=${x})`),F.length?(this.log("Checks failed",F),!0):!1})();if(s&&b){for(var C=0;C<e.children.length;C++)if(e.children[C].children.length>1)return b;let F=e.getElementsByTagName("li").length;if(c==F)return!1}return b}return!1})},_cleanMatchedNodes(o,i){for(var e=this._getNextNode(o,!0),t=this._getNextNode(o);t&&t!=e;)i.call(this,t,t.className+" "+t.id)?t=this._removeAndGetNext(t):t=this._getNextNode(t)},_cleanHeaders(o){let i=this._getAllNodesWithTag(o,["h1","h2"]);this._removeNodes(i,function(e){let t=this._getClassWeight(e)<0;return t&&this.log("Removing header with low class weight:",e),t})},_headerDuplicatesTitle(o){if(o.tagName!="H1"&&o.tagName!="H2")return!1;var i=this._getInnerText(o,!1);return this.log("Evaluating similarity of header:",i,this._articleTitle),this._textSimilarity(this._articleTitle,i)>.75},_flagIsActive(o){return(this._flags&o)>0},_removeFlag(o){this._flags=this._flags&~o},_isProbablyVisible(o){return(!o.style||o.style.display!="none")&&(!o.style||o.style.visibility!="hidden")&&!o.hasAttribute("hidden")&&(!o.hasAttribute("aria-hidden")||o.getAttribute("aria-hidden")!="true"||o.className&&o.className.includes&&o.className.includes("fallback-image"))},parse(){if(this._maxElemsToParse>0){var o=this._doc.getElementsByTagName("*").length;if(o>this._maxElemsToParse)throw new Error("Aborting parsing document; "+o+" elements found")}this._unwrapNoscriptImages(this._doc);var i=this._disableJSONLD?{}:this._getJSONLD(this._doc);this._removeScripts(this._doc),this._prepDocument();var e=this._getArticleMetadata(i);this._metadata=e,this._articleTitle=e.title;var t=this._grabArticle();if(!t)return null;if(this.log("Grabbed: "+t.innerHTML),this._postProcessContent(t),!e.excerpt){var s=t.getElementsByTagName("p");s.length&&(e.excerpt=s[0].textContent.trim())}var a=t.textContent;return{title:this._articleTitle,byline:e.byline||this._articleByline,dir:this._articleDir,lang:this._articleLang,content:this._serializer(t),textContent:a,length:a.length,excerpt:e.excerpt,siteName:e.siteName||this._articleSiteName,publishedTime:e.publishedTime}}};typeof dt=="object"&&(dt.exports=Pt)});var Mt=tt((Ks,ut)=>{var Nt={unlikelyCandidates:/-ad-|ai2html|banner|breadcrumbs|combx|comment|community|cover-wrap|disqus|extra|footer|gdpr|header|legends|menu|related|remark|replies|rss|shoutbox|sidebar|skyscraper|social|sponsor|supplemental|ad-break|agegate|pagination|pager|popup|yom-remote/i,okMaybeItsACandidate:/and|article|body|column|content|main|shadow/i};function bs(o){return(!o.style||o.style.display!="none")&&!o.hasAttribute("hidden")&&(!o.hasAttribute("aria-hidden")||o.getAttribute("aria-hidden")!="true"||o.className&&o.className.includes&&o.className.includes("fallback-image"))}function Ts(o,i={}){typeof i=="function"&&(i={visibilityChecker:i});var e={minScore:20,minContentLength:140,visibilityChecker:bs};i=Object.assign(e,i);var t=o.querySelectorAll("p, pre, article"),s=o.querySelectorAll("div > br");if(s.length){var a=new Set(t);[].forEach.call(s,function(n){a.add(n.parentNode)}),t=Array.from(a)}var r=0;return[].some.call(t,function(n){if(!i.visibilityChecker(n))return!1;var l=n.className+" "+n.id;if(Nt.unlikelyCandidates.test(l)&&!Nt.okMaybeItsACandidate.test(l)||n.matches("li p"))return!1;var d=n.textContent.trim().length;return d<i.minContentLength?!1:(r+=Math.sqrt(d-i.minContentLength),r>i.minScore)})}typeof ut=="object"&&(ut.exports=Ts)});var ht=tt((Qs,Rt)=>{var Es=Lt(),Ss=Mt();Rt.exports={Readability:Es,isProbablyReaderable:Ss}});var Fs={};Zt(Fs,{default:()=>Qe});module.exports=Gt(Fs);var P=require("obsidian");var Z={feeds:[],folders:[{name:"Videos",subfolders:[],createdAt:Date.now(),modifiedAt:Date.now()},{name:"Podcasts",subfolders:[],createdAt:Date.now(),modifiedAt:Date.now()}],refreshInterval:60,maxItems:25,viewStyle:"card",showFeedArt:!0,showThumbnails:!0,sidebarCollapsed:!1,collapsedFolders:[],tagsCollapsed:!0,articleFilter:{type:"none",value:null},articleSort:"newest",articleGroupBy:"none",allArticlesPageSize:50,unreadArticlesPageSize:50,readArticlesPageSize:50,savedArticlesPageSize:50,starredArticlesPageSize:50,availableTags:[{name:"Important",color:"#e74c3c"},{name:"Read later",color:"#3498db"},{name:"Favorite",color:"#f1c40f"},{name:"YouTube",color:"#ff0000"},{name:"Podcast",color:"#8e44ad"}],folderSortOrder:{by:"name",ascending:!0},feedSortOrder:{by:"name",ascending:!0},folderFeedSortOrders:{},viewLocation:"main",readerViewLocation:"main",useWebViewer:!0,media:{defaultYouTubeFolder:"Videos",defaultYouTubeTag:"youtube",defaultPodcastFolder:"Podcasts",defaultPodcastTag:"podcast",autoDetectMediaType:!1,openInSplitView:!0,podcastTheme:"obsidian"},articleSaving:{addSavedTag:!0,defaultFolder:"RSS articles/",defaultTemplate:`---
title: "{{title}}"
date: {{date}}
tags: [{{tags}}]
source: "{{source}}"
link: {{link}}
author: "{{author}}"
feedTitle: "{{feedTitle}}"
guid: "{{guid}}"
---

# {{title}}

{{content}}

[Source]({{link}})`,includeFrontmatter:!0,frontmatterTemplate:`---
title: "{{title}}"
date: {{date}}
tags: [{{tags}}]
source: "{{source}}"
link: {{link}}
author: "{{author}}"
feedTitle: "{{feedTitle}}"
guid: "{{guid}}"
---`,saveFullContent:!0,fetchTimeout:10,savedTemplates:[]},display:{showCoverImage:!0,showSummary:!0,filterDisplayStyle:"inline",defaultFilter:"all",hiddenFilters:[],useDomainFavicons:!0,hideDefaultRssIcon:!1}};var I=require("obsidian");var ke=require("obsidian"),ze=class extends ke.AbstractInputSuggest{constructor(i,e){super(i,e),this.inputEl=e}getSuggestions(i){let e=i.toLowerCase(),t=[],s=this.app.vault.getRoot();return this.collectFolders(s,t),t.filter(a=>a.path.toLowerCase().includes(e))}collectFolders(i,e){for(let t of i.children)t instanceof ke.TFolder&&(e.push(t),this.collectFolders(t,e))}renderSuggestion(i,e){e.setText(i.path)}selectSuggestion(i,e){this.inputEl.value=i.path,this.inputEl.dispatchEvent(new Event("input",{bubbles:!0})),this.inputEl.dispatchEvent(new Event("change",{bubbles:!0})),this.close()}},be=class extends ke.AbstractInputSuggest{collectAllFolders(i,e=""){let t=[];for(let s of i){let a=e?`${e}/${s.name}`:s.name;t.push(a),s.subfolders&&s.subfolders.length>0&&(t=t.concat(this.collectAllFolders(s.subfolders,a)))}return t.sort((s,a)=>s.localeCompare(a))}constructor(i,e,t){super(i,e),this.inputEl=e,this.folders=this.collectAllFolders(t)}updateFolders(i){this.folders=this.collectAllFolders(i)}getSuggestions(i){let e=i.toLowerCase();return this.folders.filter(t=>t.toLowerCase().includes(e))}renderSuggestion(i,e){e.setText(i)}selectSuggestion(i,e){this.inputEl.value=i,this.inputEl.dispatchEvent(new Event("input",{bubbles:!0})),this.inputEl.dispatchEvent(new Event("change",{bubbles:!0})),this.close()}};var st=class extends I.Modal{constructor(e){super(e);this.result=null;this.resolvePromise=null}onOpen(){let{contentEl:e}=this;e.empty(),e.createEl("h2",{text:"Save template"}),e.createEl("p",{text:"Enter a name for this template:"});let t;new I.Setting(e).setName("Template name").addText(s=>{t=s,s.setPlaceholder("My template"),s.inputEl.addEventListener("keydown",a=>{a.key==="Enter"&&(a.preventDefault(),this.result=s.getValue().trim()||null,this.close())})}),new I.Setting(e).addButton(s=>s.setButtonText("Cancel").onClick(()=>{this.result=null,this.close()})).addButton(s=>s.setButtonText("Save").setCta().onClick(()=>{this.result=t.getValue().trim()||null,this.close()})),setTimeout(()=>{t.inputEl.focus()},50)}onClose(){let{contentEl:e}=this;e.empty(),this.resolvePromise&&this.resolvePromise(this.result)}waitForClose(){return new Promise(e=>{this.resolvePromise=e})}},Oe=class extends I.PluginSettingTab{constructor(e,t){super(e,t);this.currentTab="General";this.tabNames=["General","Display","Media","Article saving","Import/Export","Tags","Support"];this.plugin=t}display(){let{containerEl:e}=this;e.empty();let t=e.createDiv("rss-dashboard-settings-tab-bar");this.tabNames.forEach(a=>{let r=t.createEl("button",{text:a,cls:"rss-dashboard-settings-tab-btn"+(this.currentTab===a?" active":"")});r.onclick=()=>{this.currentTab=a,this.display()}});let s=e.createDiv("rss-dashboard-settings-tab-content");switch(this.currentTab){case"General":this.createGeneralSettings(s);break;case"Display":this.createDisplaySettings(s);break;case"Media":this.createMediaSettings(s);break;case"Article saving":this.createArticleSavingSettings(s);break;case"Import/Export":this.createImportExportTab(s);break;case"Tags":this.createTagsSettings(s);break;case"Support":this.createSupportTab(s);break}}createGeneralSettings(e){new I.Setting(e).setName("View style").setDesc("Choose between list and card view for articles").addDropdown(t=>t.addOption("list","List view").addOption("card","Card view").setValue(this.plugin.settings.viewStyle).onChange(async s=>{this.plugin.settings.viewStyle=s,await this.plugin.saveSettings();let a=await this.plugin.getActiveDashboardView();a&&(await this.app.workspace.revealLeaf(a.leaf),a.render())})),new I.Setting(e).setName("Dashboard view location").setDesc("Choose where to open the RSS dashboard").addDropdown(t=>t.addOption("main","Main view").addOption("right-sidebar","Right sidebar").addOption("left-sidebar","Left sidebar").setValue(this.plugin.settings.viewLocation).onChange(async s=>{this.plugin.settings.viewLocation=s,await this.plugin.saveSettings()})),new I.Setting(e).setName("Reader view location").setDesc("Choose where to open articles/media when clicked").addDropdown(t=>t.addOption("main","Main view (split)").addOption("right-sidebar","Right sidebar").addOption("left-sidebar","Left sidebar").setValue(this.plugin.settings.readerViewLocation||"main").onChange(async s=>{this.plugin.settings.readerViewLocation=s,await this.plugin.saveSettings()})),new I.Setting(e).setName("Use web viewer").setDesc("Use web viewer core plugin for articles when available").addToggle(t=>t.setValue(this.plugin.settings.useWebViewer||!1).onChange(async s=>{this.plugin.settings.useWebViewer=s,await this.plugin.saveSettings()})),new I.Setting(e).setName("Refresh interval").setDesc("How often to refresh feeds (in minutes)").addSlider(t=>t.setLimits(5,120,5).setValue(this.plugin.settings.refreshInterval).setDynamicTooltip().onChange(async s=>{this.plugin.settings.refreshInterval=s,await this.plugin.saveSettings()})),new I.Setting(e).setName("Maximum items").setDesc("Maximum number of items to display per feed").addSlider(t=>t.setLimits(10,500,10).setValue(this.plugin.settings.maxItems).setDynamicTooltip().onChange(async s=>{this.plugin.settings.maxItems=s,await this.plugin.saveSettings();let a=await this.plugin.getActiveDashboardView();a&&(await this.app.workspace.revealLeaf(a.leaf),a.render())})),new I.Setting(e).setName("Page size for 'all articles'").setDesc("Number of articles to load at a time in the 'all articles' view.").addSlider(t=>{t.setLimits(20,200,10).setValue(this.plugin.settings.allArticlesPageSize).setDynamicTooltip().onChange(async s=>{this.plugin.settings.allArticlesPageSize=s,await this.plugin.saveSettings()})}),new I.Setting(e).setName("Page size for 'unread items'").setDesc("Number of unread articles to load at a time.").addSlider(t=>{t.setLimits(20,200,10).setValue(this.plugin.settings.unreadArticlesPageSize).setDynamicTooltip().onChange(async s=>{this.plugin.settings.unreadArticlesPageSize=s,await this.plugin.saveSettings()})}),new I.Setting(e).setName("Page size for 'read items'").setDesc("Number of read articles to load at a time.").addSlider(t=>{t.setLimits(20,200,10).setValue(this.plugin.settings.readArticlesPageSize).setDynamicTooltip().onChange(async s=>{this.plugin.settings.readArticlesPageSize=s,await this.plugin.saveSettings()})}),new I.Setting(e).setName("Page size for 'saved items'").setDesc("Number of saved articles to load at a time.").addSlider(t=>{t.setLimits(20,200,10).setValue(this.plugin.settings.savedArticlesPageSize).setDynamicTooltip().onChange(async s=>{this.plugin.settings.savedArticlesPageSize=s,await this.plugin.saveSettings()})}),new I.Setting(e).setName("Page size for 'starred items'").setDesc("Number of starred articles to load at a time.").addSlider(t=>{t.setLimits(20,200,10).setValue(this.plugin.settings.starredArticlesPageSize).setDynamicTooltip().onChange(async s=>{this.plugin.settings.starredArticlesPageSize=s,await this.plugin.saveSettings()})})}createDisplaySettings(e){new I.Setting(e).setName("Show cover images").setDesc("Display cover images for articles in reader view").addToggle(s=>s.setValue(this.plugin.settings.display.showCoverImage).onChange(async a=>{this.plugin.settings.display.showCoverImage=a,await this.plugin.saveSettings()})),new I.Setting(e).setName("Show summary").setDesc("Display content summary in card view").addToggle(s=>s.setValue(this.plugin.settings.display.showSummary).onChange(async a=>{this.plugin.settings.display.showSummary=a,await this.plugin.saveSettings();let r=await this.plugin.getActiveDashboardView();r&&this.plugin.settings.viewStyle==="card"&&(await this.app.workspace.revealLeaf(r.leaf),r.render())})),new I.Setting(e).setName("Use domain favicons").setDesc("Show domain-specific favicons instead of generic RSS icons for feeds").addToggle(s=>s.setValue(this.plugin.settings.display.useDomainFavicons).onChange(async a=>{this.plugin.settings.display.useDomainFavicons=a,await this.plugin.saveSettings();let r=await this.plugin.getActiveDashboardView();r!=null&&r.sidebar&&(await this.app.workspace.revealLeaf(r.leaf),r.sidebar.render())})),new I.Setting(e).setName("Hide default RSS icon").setDesc("Hide the default RSS icon for regular feeds in the sidebar").addToggle(s=>s.setValue(!!this.plugin.settings.display.hideDefaultRssIcon).onChange(async a=>{this.plugin.settings.display.hideDefaultRssIcon=a,await this.plugin.saveSettings();let r=await this.plugin.getActiveDashboardView();r!=null&&r.sidebar&&(await this.app.workspace.revealLeaf(r.leaf),r.sidebar.render())})),new I.Setting(e).setName("Filter display style").setDesc("Choose how to display the filter buttons in the sidebar").addDropdown(s=>s.addOption("vertical","Vertical list").addOption("inline","Inline icons").setValue(this.plugin.settings.display.filterDisplayStyle).onChange(async a=>{this.plugin.settings.display.filterDisplayStyle=a,await this.plugin.saveSettings();let r=await this.plugin.getActiveDashboardView();r!=null&&r.sidebar&&(await this.app.workspace.revealLeaf(r.leaf),r.sidebar.render())})),new I.Setting(e).setName("Default filter").setDesc("Choose which filter to show by default when opening the dashboard").addDropdown(s=>s.addOption("all","All items").addOption("starred","Starred items").addOption("unread","Unread items").addOption("read","Read items").addOption("saved","Saved items").addOption("videos","Videos").addOption("podcasts","Podcasts").setValue(this.plugin.settings.display.defaultFilter).onChange(async a=>{this.plugin.settings.display.defaultFilter=a,(this.plugin.settings.display.hiddenFilters||[]).includes(a)&&new I.Notice(`Warning: "${a}" filter is currently hidden. Consider showing it first.`),await this.plugin.saveSettings();let n=await this.plugin.getActiveDashboardView();n!=null&&n.sidebar&&(await this.app.workspace.revealLeaf(n.leaf),n.sidebar.render())})),e.createEl("hr",{cls:"rss-dashboard-settings-separator"}),new I.Setting(e).setName("Filter visibility").setHeading(),e.createEl("p",{text:"Choose which filter items to show or hide in the sidebar:",cls:"rss-dashboard-settings-description"}),[{key:"starred",label:"Starred items",icon:"star"},{key:"unread",label:"Unread items",icon:"circle"},{key:"read",label:"Read items",icon:"check-circle"},{key:"saved",label:"Saved items",icon:"save"},{key:"videos",label:"Videos",icon:"play"},{key:"podcasts",label:"Podcasts",icon:"mic"}].forEach(s=>{this.plugin.settings.display.hiddenFilters||(this.plugin.settings.display.hiddenFilters=[]);let a=this.plugin.settings.display.hiddenFilters.includes(s.key);new I.Setting(e).setName(s.label).setDesc(`${a?"Hidden":"Visible"} in sidebar`).addToggle(r=>r.setValue(!a).onChange(async n=>{if(this.plugin.settings.display.hiddenFilters||(this.plugin.settings.display.hiddenFilters=[]),n)this.plugin.settings.display.hiddenFilters=this.plugin.settings.display.hiddenFilters.filter(d=>d!==s.key);else{this.plugin.settings.display.hiddenFilters.includes(s.key)||this.plugin.settings.display.hiddenFilters.push(s.key);let d=await this.plugin.getActiveDashboardView();d!=null&&d.sidebar&&d.currentFolder===s.key&&(d.currentFolder=null)}await this.plugin.saveSettings();let l=await this.plugin.getActiveDashboardView();l!=null&&l.sidebar&&(await this.app.workspace.revealLeaf(l.leaf),l.sidebar.render())}))}),e.createEl("p",{text:"The 'all items' filter cannot be hidden as it's always required.",cls:"rss-dashboard-settings-note"})}createMediaSettings(e){new I.Setting(e).setName("Auto-detect media type").setDesc("Automatically detect if feeds are YouTube, podcasts, or regular articles").addToggle(t=>t.setValue(this.plugin.settings.media.autoDetectMediaType).onChange(async s=>{this.plugin.settings.media.autoDetectMediaType=s,await this.plugin.saveSettings()})),new I.Setting(e).setName("YouTube").setHeading(),new I.Setting(e).setName("Default YouTube folder").setDesc("Default folder for YouTube feeds").addText(t=>{t.setValue(this.plugin.settings.media.defaultYouTubeFolder).onChange(async s=>{this.plugin.settings.media.defaultYouTubeFolder=(0,I.normalizePath)(s),await this.plugin.saveSettings()}),new be(this.app,t.inputEl,this.plugin.settings.folders)}),new I.Setting(e).setName("Default YouTube tag").setDesc("Default tag for YouTube videos").addText(t=>t.setValue(this.plugin.settings.media.defaultYouTubeTag).onChange(async s=>{this.plugin.settings.media.defaultYouTubeTag=s,await this.plugin.saveSettings()})),new I.Setting(e).setName("Podcast").setHeading(),new I.Setting(e).setName("Default podcast folder").setDesc("Default folder for podcast feeds").addText(t=>{t.setValue(this.plugin.settings.media.defaultPodcastFolder).onChange(async s=>{this.plugin.settings.media.defaultPodcastFolder=(0,I.normalizePath)(s),await this.plugin.saveSettings()}),new be(this.app,t.inputEl,this.plugin.settings.folders)}),new I.Setting(e).setName("Default podcast tag").setDesc("Default tag for podcast episodes").addText(t=>t.setValue(this.plugin.settings.media.defaultPodcastTag).onChange(async s=>{this.plugin.settings.media.defaultPodcastTag=s,await this.plugin.saveSettings()})),new I.Setting(e).setName("Podcast player").setHeading(),new I.Setting(e).setName("Player theme").setDesc("Choose a visual theme for the podcast player").addDropdown(t=>t.addOption("obsidian","Default").addOption("minimal","Minimal").addOption("gradient","Gradient").addOption("spotify","Spotify").addOption("nord","Nord").addOption("dracula","Dracula").addOption("solarized","Solarized dark").addOption("catppuccin","Catppuccin mocha").addOption("gruvbox","Gruvbox").addOption("tokyonight","Tokyo night").setValue(this.plugin.settings.media.podcastTheme).onChange(async s=>{this.plugin.settings.media.podcastTheme=s,await this.plugin.saveSettings();let a=await this.plugin.getActiveReaderView();a&&a.updatePodcastTheme(s)}))}createArticleSavingSettings(e){new I.Setting(e).setName("Save path").setDesc("Default folder to save articles").addText(d=>{d.setValue(this.plugin.settings.articleSaving.defaultFolder).onChange(async c=>{this.plugin.settings.articleSaving.defaultFolder=(0,I.normalizePath)(c),await this.plugin.saveSettings()}),new ze(this.app,d.inputEl)}),new I.Setting(e).setName("Add 'saved' tag").setDesc("Automatically add a 'saved' tag to saved articles").addToggle(d=>d.setValue(this.plugin.settings.articleSaving.addSavedTag).onChange(async c=>{this.plugin.settings.articleSaving.addSavedTag=c,await this.plugin.saveSettings()})),new I.Setting(e).setName("Save full content").setDesc("Fetch and save the full article content from the web (instead of just the RSS summary)").addToggle(d=>d.setValue(this.plugin.settings.articleSaving.saveFullContent).onChange(async c=>{this.plugin.settings.articleSaving.saveFullContent=c,await this.plugin.saveSettings()})),new I.Setting(e).setName("Fetch timeout").setDesc("Timeout in seconds for fetching full article content (prevents hanging)").addSlider(d=>{d.setLimits(5,30,1).setValue(this.plugin.settings.articleSaving.fetchTimeout||10).setDynamicTooltip().onChange(async c=>{this.plugin.settings.articleSaving.fetchTimeout=c,await this.plugin.saveSettings()})}),new I.Setting(e).setName("Default template").setHeading();let t=e.createDiv();new I.Setting(t).setName("Default article template").setDesc("Template for saved articles. Use variables like {{title}}, {{content}}, {{link}}, etc.");let s=t.createEl("textarea",{attr:{rows:"10"},cls:"rss-dashboard-template-input"});s.value=this.plugin.settings.articleSaving.defaultTemplate,s.addEventListener("change",()=>{(async()=>(this.plugin.settings.articleSaving.defaultTemplate=s.value,await this.plugin.saveSettings()))()}),t.appendChild(s),e.createEl("div",{cls:"setting-item-description",text:"Available variables: {{title}}, {{content}}, {{link}}, {{date}}, {{isoDate}}, {{source}}, {{author}}, {{summary}}, {{tags}}, {{feedTitle}}, {{guid}}"});let a=e.createDiv({cls:"rss-dashboard-template-btn-row"}),r=a.createEl("button",{text:"Reset to default",cls:"rss-dashboard-template-btn"});r.onclick=async()=>{s.value=Z.articleSaving.defaultTemplate,this.plugin.settings.articleSaving.defaultTemplate=Z.articleSaving.defaultTemplate,await this.plugin.saveSettings(),new I.Notice("Template reset to default")};let n=a.createEl("button",{text:"Save as template",cls:"rss-dashboard-template-btn"});n.onclick=async()=>{let d=await this.promptForTemplateName();if(d){let c={id:`template-${Date.now()}`,name:d,template:this.plugin.settings.articleSaving.defaultTemplate};this.plugin.settings.articleSaving.savedTemplates||(this.plugin.settings.articleSaving.savedTemplates=[]),this.plugin.settings.articleSaving.savedTemplates.push(c),await this.plugin.saveSettings(),new I.Notice(`Template "${d}" saved`),this.display()}},new I.Setting(e).setName("Saved templates").setHeading();let l=this.plugin.settings.articleSaving.savedTemplates||[];if(l.length===0)e.createEl("p",{text:"No saved templates yet. Save the current template using the button above.",cls:"rss-dashboard-settings-note"});else{let d=e.createDiv({cls:"rss-dashboard-saved-templates"});l.forEach((c,u)=>{new I.Setting(d).setName(c.name).addButton(g=>g.setButtonText("Load").setTooltip("Load this template into the editor").onClick(async()=>{s.value=c.template,this.plugin.settings.articleSaving.defaultTemplate=c.template,await this.plugin.saveSettings(),new I.Notice(`Template "${c.name}" loaded`)})).addButton(g=>g.setButtonText("Update").setTooltip("Update this template with current editor content").onClick(async()=>{this.plugin.settings.articleSaving.savedTemplates[u].template=this.plugin.settings.articleSaving.defaultTemplate,await this.plugin.saveSettings(),new I.Notice(`Template "${c.name}" updated`)})).addButton(g=>g.setIcon("trash").setTooltip("Delete this template").onClick(async()=>{this.plugin.settings.articleSaving.savedTemplates.splice(u,1),await this.plugin.saveSettings(),new I.Notice(`Template "${c.name}" deleted`),this.display()}))})}}async promptForTemplateName(){let e=new st(this.app);return e.open(),e.waitForClose()}createImportExportTab(e){let t=e.createDiv();new I.Setting(t).setName("Backup & restore (data.json)").setHeading();let s=t.createDiv({cls:"rss-dashboard-import-export-btn-row"}),a=s.createEl("button",{text:"Export data.json",cls:"rss-dashboard-import-export-btn"});a.onclick=()=>{let u=this.plugin.settings,g=new Blob([JSON.stringify(u,null,2)],{type:"application/json"}),m=URL.createObjectURL(g);document.body.createEl("a",{attr:{href:m,download:"rss-dashboard-data.json"}}).click(),URL.revokeObjectURL(m)};let r=s.createEl("button",{text:"Import data.json",cls:"rss-dashboard-import-export-btn"});r.onclick=()=>{let u=document.body.createEl("input",{attr:{type:"file",accept:".json,application/json"}});u.onchange=()=>{(async()=>{var f;let g=(f=u.files)==null?void 0:f[0];if(!g)return;let m=await g.text();try{let p=JSON.parse(m);this.plugin.settings=Object.assign({},this.plugin.settings,p),await this.plugin.saveSettings();let h=await this.plugin.getActiveDashboardView();h&&(await this.app.workspace.revealLeaf(h.leaf),h.render()),new I.Notice("Data imported successfully!")}catch(p){new I.Notice("Invalid data.json file")}})()},u.click()};let n=e.createDiv();new I.Setting(n).setName("OPML").setHeading();let l=n.createDiv({cls:"rss-dashboard-import-export-btn-row"}),d=l.createEl("button",{text:"Import opml",cls:"rss-dashboard-import-export-btn"});d.onclick=()=>this.plugin.importOpml();let c=l.createEl("button",{text:"Export opml",cls:"rss-dashboard-import-export-btn"});c.onclick=()=>this.plugin.exportOpml()}createTagsSettings(e){let t=e.createDiv({cls:"rss-dashboard-tags-container"});for(let n=0;n<this.plugin.settings.availableTags.length;n++){let l=this.plugin.settings.availableTags[n];new I.Setting(t).setName(l.name).addColorPicker(d=>d.setValue(l.color).onChange(async c=>{this.plugin.settings.availableTags[n].color=c,await this.plugin.saveSettings();let u=await this.plugin.getActiveDashboardView();u&&(await this.app.workspace.revealLeaf(u.leaf),u.render())})).addButton(d=>d.setIcon("trash").setTooltip("Delete tag").onClick(async()=>{this.plugin.settings.availableTags.splice(n,1),await this.plugin.saveSettings(),this.display()}))}new I.Setting(e).setName("Add new tag").setHeading();let s=e.createDiv(),a=new I.Setting(s).setName("Tag name").addText(n=>n.setPlaceholder("Enter tag name")),r=new I.Setting(s).setName("Tag color").addColorPicker(n=>n.setValue("#3498db"));new I.Setting(s).addButton(n=>n.setButtonText("Add tag").onClick(async()=>{let d=a.components[0].inputEl.value,u=r.components[0].getValue();d&&(this.plugin.settings.availableTags.push({name:d,color:u}),await this.plugin.saveSettings(),this.display())}))}createSupportTab(e){e.createEl("div",{cls:"rss-dashboard-support-message",text:"If you enjoy using this plugin, consider supporting development! \u2764\uFE0F "});let t=e.createDiv({cls:"rss-dashboard-support-btn-row"}),s=t.createEl("a",{text:"Buy me a pizza \u{1F355}",href:"https://www.buymeacoffee.com/amatya_aditya",cls:"rss-dashboard-support-btn rss-dashboard-bmc-btn"});s.target="_blank";let a=t.createEl("a",{text:"Ko-fi \u{1F499}",href:"https://ko-fi.com/Y8Y41FV4WI",cls:"rss-dashboard-support-btn rss-dashboard-kofi-btn"});a.target="_blank"}};var O=require("obsidian");var k=require("obsidian");var N=require("obsidian");function yt(o,i=""){let e=[];for(let t of o){let s=i?`${i}/${t.name}`:t.name;e.push(s),t.subfolders&&t.subfolders.length>0&&(e=e.concat(yt(t.subfolders,s)))}return e}var Pe=class extends N.Modal{constructor(i,e,t,s){super(i),this.feed=t,this.plugin=e,this.onSave=s}onOpen(){let{contentEl:i}=this;this.modalEl.addClasses(["rss-dashboard-modal","rss-dashboard-modal-container"]),i.empty(),new N.Setting(i).setName("Edit feed").setHeading();let e=this.feed.title,t=this.feed.url,s=this.feed.folder||"",a="",r="-",n,l,d,c={};new N.Setting(i).setName("Feed URL").addText(F=>{F.setValue(t).onChange(D=>t=D),l=F.inputEl,l.autocomplete="off",l.spellcheck=!1,l.addEventListener("focus",()=>l.select()),l.addEventListener("keydown",D=>{D.key==="Enter"?n==null||n.focus():D.key==="Escape"&&this.close()})}).addButton(F=>{F.setButtonText("Load").onClick(()=>{(async()=>{a="Loading...",c.statusDiv&&(c.statusDiv.textContent=a);try{let D=await(0,N.requestUrl)(t),M=new DOMParser().parseFromString(D.text,"text/xml"),U=M.querySelector("channel > title, feed > title");U!=null&&U.textContent&&(e=U.textContent,n&&(n.value=e));let _=M.querySelector("item > pubDate, entry > updated, entry > published");if(_!=null&&_.textContent){let G=new Date(_.textContent),$=Math.floor((Date.now()-G.getTime())/(1e3*60*60*24));r=$===0?"Today":`${$} days ago`}else r="N/A";c.latestEntryDiv&&(c.latestEntryDiv.textContent=r),a="OK"}catch(D){a="Error loading feed",r="-",c.latestEntryDiv&&(c.latestEntryDiv.textContent=r)}c.statusDiv&&(c.statusDiv.textContent=a)})()})}),new N.Setting(i).setName("Title").addText(F=>{F.setValue(e).onChange(D=>e=D),n=F.inputEl,n.autocomplete="off",n.spellcheck=!1,n.addEventListener("focus",()=>n.select()),n.addEventListener("keydown",D=>{D.key==="Enter"?d==null||d.focus():D.key==="Escape"&&this.close()})});let u=new N.Setting(i).setName("Latest entry posted");c.latestEntryDiv=u.controlEl.createDiv({text:r,cls:"add-feed-latest-entry"});let g=new N.Setting(i).setName("Status");c.statusDiv=g.controlEl.createDiv({text:a,cls:"add-feed-status"}),new N.Setting(i).setName("Folder").addText(F=>{F.setValue(s).setPlaceholder("Type or select folder..."),d=F.inputEl,d.autocomplete="off",d.spellcheck=!1,new be(this.app,d,this.plugin.settings.folders)}),new N.Setting(i).setName("Per feed control options").setHeading();let m=this.feed.autoDeleteDuration||0,f=this.feed.maxItemsLimit||this.plugin.settings.maxItems,p=this.feed.scanInterval||0,h=new N.Setting(i).setName("Auto delete articles duration").setDesc("Days to keep articles before auto-delete"),v=null;h.addDropdown(F=>{F.addOption("0","Disabled").addOption("1","1 day").addOption("3","3 days").addOption("7","1 week").addOption("14","2 weeks").addOption("30","1 month").addOption("60","2 months").addOption("90","3 months").addOption("180","6 months").addOption("365","1 year").addOption("custom","Custom...").setValue(m===0?"0":[1,3,7,14,30,60,90,180,365].includes(m)?m.toString():"custom").onChange(D=>{D==="custom"?(v||(v=h.controlEl.createEl("input",{type:"number",placeholder:"Enter days",cls:"rss-custom-input"}),v.min="1",v.value=m>0?m.toString():"",v.addEventListener("change",L=>{let M=L.target;m=parseInt(M.value)||0})),v&&(v.removeClass("hidden"),v.addClass("visible"))):(v&&v.addClass("hidden"),m=parseInt(D)||0)})});let y=new N.Setting(i).setName("Max items limit").setDesc("Maximum number of items to keep per feed"),w=null;y.addDropdown(F=>{F.addOption("0","Unlimited").addOption("10","10 items").addOption("25","25 items").addOption("50","50 items").addOption("100","100 items").addOption("200","200 items").addOption("500","500 items").addOption("1000","1000 items").addOption("custom","Custom...").setValue(f===0?"0":[10,25,50,100,200,500,1e3].includes(f)?f.toString():"custom").onChange(D=>{D==="custom"?(w||(w=y.controlEl.createEl("input",{type:"number",placeholder:"Enter number",cls:"rss-custom-input"}),w.min="1",w.addEventListener("change",L=>{let M=L.target;f=parseInt(M.value)||0})),w&&(w.removeClass("hidden"),w.addClass("visible"))):(w&&w.addClass("hidden"),f=parseInt(D)||0)})});let E=new N.Setting(i).setName("Scan interval").setDesc("Custom scan interval in minutes"),T=null;E.addDropdown(F=>{F.addOption("0","Use global setting").addOption("5","5 minutes").addOption("10","10 minutes").addOption("15","15 minutes").addOption("30","30 minutes").addOption("60","1 hour").addOption("120","2 hours").addOption("240","4 hours").addOption("480","8 hours").addOption("720","12 hours").addOption("1440","24 hours").addOption("custom","Custom...").setValue(p===0?"0":[5,10,15,30,60,120,240,480,720,1440].includes(p)?p.toString():"custom").onChange(D=>{D==="custom"?(T||(T=E.controlEl.createEl("input",{type:"number",placeholder:"Enter minutes",cls:"rss-custom-input"}),T.min="1",T.addEventListener("change",L=>{let M=L.target;p=parseInt(M.value)||0})),T&&(T.removeClass("hidden"),T.addClass("visible"))):(T&&T.addClass("hidden"),p=parseInt(D)||0)})});let x=this.feed.customTemplate||"",S=this.plugin.settings.articleSaving.savedTemplates||[];new N.Setting(i).setName("Article template").setDesc("Select a template to use when saving articles from this feed").addDropdown(F=>{F.addOption("","Use default template"),S.forEach(D=>{F.addOption(D.id,D.name)}),F.setValue(x),F.onChange(D=>{x=D})});let b=i.createDiv("rss-dashboard-modal-buttons"),C=b.createEl("button",{text:"Save",cls:"rss-dashboard-primary-button"}),A=b.createEl("button",{text:"Cancel"});C.onclick=()=>{(async()=>{let F=this.feed.title;if(this.feed.title=e,this.feed.url=t,this.feed.folder=(d==null?void 0:d.value)||s,this.feed.autoDeleteDuration=m,F!==e)for(let L of this.feed.items)L.feedTitle=e;let D=f||this.plugin.settings.maxItems;this.feed.maxItemsLimit=D,this.feed.scanInterval=p,this.feed.customTemplate=x||void 0,D>0&&this.feed.items.length>D?(this.feed.items.sort((L,M)=>new Date(M.pubDate).getTime()-new Date(L.pubDate).getTime()),this.feed.items=this.feed.items.slice(0,D),new N.Notice(`Feed updated and trimmed to ${D} articles`)):new N.Notice("Feed updated"),await this.plugin.saveSettings(),this.close(),this.onSave()})()},A.onclick=()=>this.close(),window.setTimeout(()=>{n==null||n.focus(),n==null||n.select()},0)}onClose(){this.contentEl.empty()}},Le=class extends N.Modal{constructor(i,e,t,s,a="",r){super(i),this.folders=e,this.onAdd=t,this.onSave=s,this.defaultFolder=a,this.plugin=r||void 0}onOpen(){var C,A;let{contentEl:i}=this;this.modalEl.className+=" rss-dashboard-modal rss-dashboard-modal-container",i.empty(),new N.Setting(i).setName("Add feed").setHeading();let e="",t="",s="",a="-",r=this.defaultFolder,n,l,d,c={};new N.Setting(i).setName("Feed URL").addText(F=>{F.onChange(D=>e=D),l=F.inputEl,l.autocomplete="off",l.spellcheck=!1,l.addEventListener("focus",()=>l.select()),l.addEventListener("keydown",D=>{D.key==="Enter"?n==null||n.focus():D.key==="Escape"&&this.close()})}).addButton(F=>{F.setButtonText("Load").onClick(()=>{(async()=>{s="Loading...",c.statusDiv&&(c.statusDiv.textContent=s);try{let D=await(0,N.requestUrl)(e),M=new DOMParser().parseFromString(D.text,"text/xml"),U=M.querySelector("channel > title, feed > title");t=(U==null?void 0:U.textContent)||"",n&&(n.value=t);let _=M.querySelector("item > pubDate, entry > updated, entry > published");if(_!=null&&_.textContent){let G=new Date(_.textContent),$=Math.floor((Date.now()-G.getTime())/(1e3*60*60*24));a=$===0?"Today":`${$} days`}else a="N/A";c.latestEntryDiv&&(c.latestEntryDiv.textContent=a),s="OK"}catch(D){s="Error loading feed",a="-",c.latestEntryDiv&&(c.latestEntryDiv.textContent=a)}c.statusDiv&&(c.statusDiv.textContent=s)})()})}),new N.Setting(i).setName("Title").addText(F=>{n=F.inputEl,F.setValue(t).onChange(D=>t=D),n.autocomplete="off",n.spellcheck=!1,n.addEventListener("focus",()=>n.select()),n.addEventListener("keydown",D=>{D.key==="Enter"?d==null||d.focus():D.key==="Escape"&&this.close()})});let u=new N.Setting(i).setName("Latest entry posted");c.latestEntryDiv=u.controlEl.createDiv({text:a,cls:"add-feed-latest-entry"});let g=new N.Setting(i).setName("Status");c.statusDiv=g.controlEl.createDiv({text:s,cls:"add-feed-status"}),new N.Setting(i).setName("Folder").addText(F=>{F.setValue(r).setPlaceholder("Type or select folder..."),d=F.inputEl,d.autocomplete="off",d.spellcheck=!1,new be(this.app,d,this.folders)}),new N.Setting(i).setName("Per feed control options").setHeading();let m=0,f=((A=(C=this.plugin)==null?void 0:C.settings)==null?void 0:A.maxItems)||25,p=0,h=new N.Setting(i).setName("Auto delete articles duration").setDesc("Days to keep articles before auto-delete"),v=null;h.addDropdown(F=>{F.addOption("0","Disabled").addOption("1","1 day").addOption("3","3 days").addOption("7","1 week").addOption("14","2 weeks").addOption("30","1 month").addOption("60","2 months").addOption("90","3 months").addOption("180","6 months").addOption("365","1 year").addOption("custom","Custom...").setValue("0").onChange(D=>{D==="custom"?(v||(v=h.controlEl.createEl("input",{type:"number",placeholder:"Enter days",cls:"rss-custom-input"}),v.min="1",v.value=m>0?m.toString():"",v.addEventListener("change",L=>{let M=L.target;m=parseInt(M.value)||0})),v&&(v.removeClass("hidden"),v.addClass("visible"))):(v&&v.addClass("hidden"),m=parseInt(D)||0)})});let y=new N.Setting(i).setName("Max items limit").setDesc("Maximum number of items to keep per feed"),w=null;y.addDropdown(F=>{F.addOption("0","Unlimited").addOption("10","10 items").addOption("25","25 items").addOption("50","50 items").addOption("100","100 items").addOption("200","200 items").addOption("500","500 items").addOption("1000","1000 items").addOption("custom","Custom...").setValue(f===0?"0":[10,25,50,100,200,500,1e3].includes(f)?f.toString():"custom").onChange(D=>{D==="custom"?(w||(w=y.controlEl.createEl("input",{type:"number",placeholder:"Enter number",cls:"rss-custom-input"}),w.min="1",w.value=f>0?f.toString():"",w.addEventListener("change",L=>{let M=L.target;f=parseInt(M.value)||0})),w&&(w.removeClass("hidden"),w.addClass("visible"))):(w&&w.addClass("hidden"),f=parseInt(D)||0)})});let E=new N.Setting(i).setName("Scan interval").setDesc("Custom scan interval in minutes"),T=null;E.addDropdown(F=>{F.addOption("0","Use global setting").addOption("5","5 minutes").addOption("10","10 minutes").addOption("15","15 minutes").addOption("30","30 minutes").addOption("60","1 hour").addOption("120","2 hours").addOption("240","4 hours").addOption("480","8 hours").addOption("720","12 hours").addOption("1440","24 hours").addOption("custom","Custom...").setValue("0").onChange(D=>{D==="custom"?(T||(T=E.controlEl.createEl("input",{type:"number",placeholder:"Enter minutes",cls:"rss-custom-input"}),T.min="1",T.value=p>0?p.toString():"",T.addEventListener("change",L=>{let M=L.target;p=parseInt(M.value)||0})),T&&(T.removeClass("hidden"),T.addClass("visible"))):(T&&T.addClass("hidden"),p=parseInt(D)||0)})});let x=i.createDiv({cls:"rss-dashboard-modal-buttons"}),S=x.createEl("button",{text:"Save",cls:"rss-dashboard-primary-button"}),b=x.createEl("button",{text:"Cancel"});S.onclick=()=>{if(!e){new N.Notice("Feed URL cannot be empty");return}if(!t){new N.Notice("Title cannot be empty");return}let F=(d==null?void 0:d.value)||r;this.onAdd(t,e,F,m,f,p).catch(()=>{}),this.onSave(),this.close()},b.onclick=()=>this.close(),window.setTimeout(()=>{l==null||l.focus(),l==null||l.select()},0)}onClose(){this.contentEl.empty()}},He=class extends N.Modal{constructor(e,t){super(e);this.searchQuery="";this.plugin=t}onOpen(){let{contentEl:e}=this;this.modalEl.className+=" rss-dashboard-modal rss-dashboard-modal-container",e.empty(),new N.Setting(e).setName("Manage feeds").setHeading();let t=e.createDiv({cls:"feed-manager-top-controls"}),a=t.createDiv({cls:"feed-manager-search-container"}).createEl("input",{type:"text",placeholder:"Search feeds...",cls:"feed-manager-search-input"});a.value=this.searchQuery,a.addEventListener("input",()=>{this.searchQuery=a.value,this.renderFeeds(e)});let r=t.createEl("button",{text:"Add feed",cls:"rss-dashboard-primary-button feed-manager-add-button"});r.onclick=()=>{new Le(this.app,this.plugin.settings.folders,(n,l,d,c,u,g)=>this.plugin.addFeed(n,l,d,c,u,g),()=>this.onOpen(),"",this.plugin).open()},this.renderFeeds(e)}renderFeeds(e){let t=e.querySelector(".feed-manager-list");t&&t.remove();let s=e.createDiv({cls:"feed-manager-list"}),a=yt(this.plugin.settings.folders),r={};for(let c of a)r[c]=[];let n=[],l=this.searchQuery.toLowerCase(),d=this.plugin.settings.feeds.filter(c=>{var u;return c.title.toLowerCase().includes(l)||((u=c.folder)==null?void 0:u.toLowerCase().includes(l))});for(let c of d)c.folder&&a.includes(c.folder)?r[c.folder].push(c):n.push(c);if(d.length===0){s.createDiv({text:"No feeds found.",cls:"feed-manager-empty"});return}for(let c of a){let u=r[c];if(u.length>0){let g=s.createDiv({cls:"feed-manager-folder"});new N.Setting(g).setName(c).setHeading();for(let m of u)this.renderFeedRow(g,m)}}if(n.length>0){let c=s.createDiv({cls:"feed-manager-folder"});new N.Setting(c).setName("Uncategorized").setHeading();for(let u of n)this.renderFeedRow(c,u)}}renderFeedRow(e,t){let s=e.createDiv({cls:"feed-manager-row"});s.createDiv({text:t.title,cls:"feed-manager-title"});let a=s.createEl("button",{text:"Edit"});a.onclick=()=>{new Pe(this.app,this.plugin,t,()=>this.onOpen()).open()};let r=s.createEl("button",{text:"Delete"});r.onclick=()=>{this.showConfirmModal(`Delete feed '${t.title}'?`,()=>{this.plugin.settings.feeds=this.plugin.settings.feeds.filter(n=>n!==t),this.plugin.saveSettings().then(()=>{new N.Notice("Feed deleted"),this.onOpen()})})}}showConfirmModal(e,t){document.querySelectorAll(".rss-dashboard-modal").forEach(s=>s.remove()),window.setTimeout(()=>{let s=document.body.createDiv({cls:"rss-dashboard-modal"}),a=s.createDiv({cls:"rss-dashboard-modal-content"});new N.Setting(a).setName("Confirm").setHeading(),a.createDiv({text:e});let r=a.createDiv({cls:"rss-dashboard-modal-buttons"}),n=r.createEl("button",{text:"Cancel"});n.onclick=()=>document.body.removeChild(s);let l=r.createEl("button",{text:"OK",cls:"rss-dashboard-primary-button"});l.onclick=()=>{document.body.removeChild(s),t()},window.setTimeout(()=>l.focus(),0)},0)}onClose(){this.contentEl.empty()}};var $e=class{constructor(i,e,t,s,a,r){this.cachedFolderPaths=null;this.isSearchExpanded=!1;this.isTagsExpanded=!1;this.app=i,this.container=e,this.plugin=t,this.settings=s,this.options=a,this.callbacks=r}extractDomain(i){try{let t=new URL(i).hostname,s=t.split(".");return s.length>=2?s.length===3&&s[0]==="feeds"?`${s[1]}.${s[2]}`:s.length>=3?`${s[s.length-2]}.${s[s.length-1]}`:t:t}catch(e){let t=i.match(/https?:\/\/([^/?]+)/);if(t){let s=t[1],a=s.split(".");return a.length>=2?a.length===3&&a[0]==="feeds"?`${a[1]}.${a[2]}`:a.length>=3?`${a[a.length-2]}.${a[a.length-1]}`:s:s}return""}}getFaviconUrl(i){return i?`https://t2.gstatic.com/faviconV2?client=SOCIAL&type=FAVICON&fallback_opts=TYPE,SIZE,URL&url=http://${i}&size=32`:""}getCachedFolderPaths(){var i;if(!this.cachedFolderPaths){this.cachedFolderPaths=[];let e=this.cachedFolderPaths,t=(s,a="")=>{for(let r of s){let n=a?`${a}/${r.name}`:r.name;e.push(n),r.subfolders&&r.subfolders.length>0&&t(r.subfolders,n)}};t((i=this.settings.folders)!=null?i:[])}return this.cachedFolderPaths}clearFolderPathCache(){this.cachedFolderPaths=null}render(){let i=this.container.scrollTop;this.container.empty(),this.container.addClass("rss-dashboard-sidebar"),this.renderHeader(),this.renderFilters(),this.renderFeedFolders(),this.renderToolbar(),requestAnimationFrame(()=>{this.container.scrollTop=i})}renderFeedFolders(){let i=this.container.createDiv({cls:"rss-dashboard-feed-folders-section"});if(this.settings.folders&&this.settings.folders.length>0){let s=this.settings.folderSortOrder||{by:"name",ascending:!0};this.applySortOrder([...this.settings.folders],s).forEach(r=>this.renderFolder(r,"",0,i))}let e=new Set(this.getCachedFolderPaths()),t=this.settings.feeds.filter(s=>!s.folder||!e.has(s.folder));t.length>0&&t.forEach(s=>{this.renderFeed(s,i)}),i.addEventListener("dragover",s=>{s.target.closest(".rss-dashboard-feed-folder-header")||(s.preventDefault(),i.classList.add("drag-over"))}),i.addEventListener("dragleave",s=>{s.target.closest(".rss-dashboard-feed-folder-header")||i.classList.remove("drag-over")}),i.addEventListener("drop",s=>{if(!s.target.closest(".rss-dashboard-feed-folder-header")&&(s.preventDefault(),i.classList.remove("drag-over"),s.dataTransfer)){let r=s.dataTransfer.getData("feed-url");if(r){let n=this.settings.feeds.find(l=>l.url===r);if(n&&n.folder){let l=this.findFolderByPath(n.folder);l&&(l.modifiedAt=Date.now()),n.folder="",this.plugin.saveSettings().then(()=>this.render())}}}}),i.addEventListener("contextmenu",s=>{if(s.target===i){s.preventDefault();let a=new k.Menu;a.addItem(r=>{r.setTitle("Add folder").setIcon("folder-plus").onClick(()=>{this.showFolderNameModal({title:"Add folder",onSubmit:n=>{this.addTopLevelFolder(n).then(()=>this.render())}})})}),a.addItem(r=>{r.setTitle("Add feed").setIcon("rss").onClick(()=>{this.showAddFeedModal()})}),a.addItem(r=>{r.setTitle("Sort feeds").setIcon("sort-asc").onClick(n=>{this.showFeedSortMenu(s,"")})}),a.showAtMouseEvent(s)}})}applySortOrder(i,e){let t=(a,r)=>{if(a.pinned&&!r.pinned)return-1;if(!a.pinned&&r.pinned)return 1;let n,l;switch(e.by){case"name":return n=a.name,l=r.name,n.localeCompare(l,void 0,{numeric:!0})*(e.ascending?1:-1);case"created":n=a.createdAt||0,l=r.createdAt||0;break;case"modified":n=a.modifiedAt||0,l=r.modifiedAt||0;break;default:return 0}return n<l?e.ascending?-1:1:n>l?e.ascending?1:-1:0},s=a=>{let r=[...a].sort(t);return r.forEach(n=>{n.subfolders&&n.subfolders.length>0&&(n.subfolders=s(n.subfolders))}),r};return s(i)}renderFolder(i,e="",t=0,s){var E;let a=i.name,r=e?`${e}/${a}`:a,n=this.options.collapsedFolders.includes(r),l=this.options.currentFolder===r,c=this.settings.feeds.filter(T=>T.folder===r).some(T=>T===this.options.currentFeed),u=l||c,g=s.createDiv({cls:"rss-dashboard-feed-folder"}),m=`rss-dashboard-folder-depth-${Math.min(t,5)}`;g.addClass(m);let f=g.createDiv({cls:"rss-dashboard-feed-folder-header"+(n?" collapsed":"")+(u?" active":"")}),p=f.createDiv({cls:"rss-dashboard-feed-folder-toggle"});if(p.setAttr("aria-label",n?"Expand folder":"Collapse folder"),(0,k.setIcon)(p,n?"chevron-right":"chevron-down"),i.pinned){let T=f.createDiv({cls:"rss-dashboard-folder-pin-icon"});(0,k.setIcon)(T,"lock")}if(f.createDiv({cls:"rss-dashboard-feed-folder-name",text:a}),f.addEventListener("click",T=>{T.button===0&&(T.target===p||p.contains(T.target)?this.callbacks.onToggleFolderCollapse(r):this.callbacks.onFolderClick(r))}),f.addEventListener("contextmenu",T=>{T.preventDefault();let x=T,S=new k.Menu;S.addItem(b=>{b.setTitle("Add feed").setIcon("rss").onClick(()=>{this.showAddFeedModal(r)})}),S.addItem(b=>{b.setTitle("Add subfolder").setIcon("folder-plus").onClick(()=>{this.showFolderNameModal({title:"Add subfolder",onSubmit:C=>{this.addSubfolderByPath(r,C).then(()=>this.render())}})})}),S.addItem(b=>{b.setTitle("Rename folder").setIcon("edit").onClick(()=>{this.showFolderNameModal({title:"Rename folder",defaultValue:a,onSubmit:C=>{C!==a&&this.renameFolderByPath(r,C).then(()=>this.render())}})})}),S.addItem(b=>{b.setTitle("Mark all as read").setIcon("check-circle").onClick(()=>{let C=this.getAllDescendantFolderPaths(r);this.settings.feeds.forEach(A=>{A.folder&&C.includes(A.folder)&&A.items.forEach(F=>{F.read=!0})}),this.plugin.saveSettings().then(()=>this.render())})}),S.addItem(b=>{let C=i.pinned;b.setTitle(C?"Unpin folder":"Pin folder").setIcon(C?"unlock":"lock").onClick(()=>{i.pinned=!C,i.modifiedAt=Date.now(),this.plugin.saveSettings().then(()=>this.render())})}),S.addItem(b=>{b.setTitle("Delete folder").setIcon("trash").onClick(()=>{this.showConfirmModal(`Are you sure you want to delete the folder '${a}' and all its subfolders and feeds?`,()=>{let C=this.getAllDescendantFolderPaths(r);this.settings.feeds=this.settings.feeds.filter(A=>!C.includes(A.folder)),this.removeFolderByPath(r),this.render()})})}),S.addItem(b=>{b.setTitle("Sort feeds").setIcon("sort-asc").onClick(()=>{this.showFeedSortMenu(x,r)})}),S.showAtMouseEvent(T)}),f.addEventListener("dragover",T=>{T.preventDefault(),T.stopPropagation(),f.classList.add("drag-over")}),f.addEventListener("dragleave",T=>{T.stopPropagation(),f.classList.remove("drag-over")}),f.addEventListener("drop",T=>{if(T.preventDefault(),T.stopPropagation(),f.classList.remove("drag-over"),T.dataTransfer){let x=T.dataTransfer.getData("feed-url");if(x){let S=this.settings.feeds.find(b=>b.url===x);if(S&&S.folder!==r){if(S.folder){let C=this.findFolderByPath(S.folder);C&&(C.modifiedAt=Date.now())}S.folder=r;let b=this.findFolderByPath(r);b&&(b.modifiedAt=Date.now()),this.plugin.saveSettings().then(()=>this.render())}}}}),i.subfolders&&i.subfolders.length>0&&!n){let T=this.settings.folderSortOrder||{by:"name",ascending:!0};this.applySortOrder([...i.subfolders],T).forEach(S=>{this.renderFolder(S,r,t+1,g)})}let h=g.createDiv({cls:"rss-dashboard-folder-feeds"+(n?" collapsed":"")}),v=this.settings.feeds.filter(T=>T.folder===r),y=(E=this.settings.folderFeedSortOrders)==null?void 0:E[r];(y?this.applyFeedSortOrder([...v],y):v).forEach(T=>{this.renderFeed(T,h)})}renderFeed(i,e){var l,d;let t=e.createDiv({cls:"rss-dashboard-feed"+(i===this.options.currentFeed?" active":""),attr:{draggable:"true","data-feed-url":i.url}}),s=i.items.filter(c=>!c.read).length,a=t.createDiv({cls:"rss-dashboard-feed-name-container"}),r=a.createDiv({cls:"rss-dashboard-feed-icon"}),n=i.items.length===0&&((d=(l=this.plugin)==null?void 0:l.backgroundImportQueue)==null?void 0:d.some(c=>c.url===i.url&&c.importStatus==="processing"));if(n)(0,k.setIcon)(r,"loader-2"),r.addClass("processing"),t.classList.add("processing-feed");else if(i.mediaType==="video")(0,k.setIcon)(r,"play"),r.addClass("youtube"),t.classList.add("youtube-feed");else if(i.mediaType==="podcast")(0,k.setIcon)(r,"mic"),r.addClass("podcast"),t.classList.add("podcast-feed");else if(this.settings.display.useDomainFavicons){let c=this.extractDomain(i.url);if(c){let u=this.getFaviconUrl(c);r.empty();let g=r.createEl("img",{attr:{src:u,alt:c},cls:"rss-dashboard-feed-favicon"});g.onerror=()=>{r.empty(),this.settings.display.hideDefaultRssIcon?r.addClass("rss-icon-hidden"):(0,k.setIcon)(r,"rss")}}else this.settings.display.hideDefaultRssIcon?r.addClass("rss-icon-hidden"):(0,k.setIcon)(r,"rss")}else this.settings.display.hideDefaultRssIcon?r.addClass("rss-icon-hidden"):(0,k.setIcon)(r,"rss");a.createDiv({cls:"rss-dashboard-feed-name",text:i.title}),s>0&&a.createDiv({cls:"rss-dashboard-feed-unread-count",text:s.toString()}),i.items.length===0&&!n&&a.createDiv({cls:"rss-dashboard-feed-processing-indicator",text:"\u23F3"}).setAttribute("title","Articles being fetched in background"),t.addEventListener("click",c=>{c.stopPropagation(),this.callbacks.onFeedClick(i)}),t.addEventListener("contextmenu",c=>{c.preventDefault(),this.showFeedContextMenu(c,i)}),t.addEventListener("dragstart",c=>{c.dataTransfer&&(c.dataTransfer.setData("feed-url",i.url),c.dataTransfer.effectAllowed="move")})}showAddYouTubeFeedModal(){let i=document.body.createDiv({cls:"rss-dashboard-modal rss-dashboard-modal-container"}),e=i.createDiv({cls:"rss-dashboard-modal-content"});new k.Setting(e).setName("Add YouTube channel").setHeading();let t=e.createDiv({cls:"rss-dashboard-modal-info"});t.createEl("p",{text:"Enter a YouTube channel URL or ID."});let s=t.createEl("ul");["Channel url: https://www.youtube.com/channel/UCxxxxxxxx","Channel id: UCxxxxxxxx"].forEach(m=>{s.createEl("li",{text:m})});let r=e.createEl("label",{text:"YouTube channel:"}),n=e.createEl("input",{attr:{type:"text",placeholder:"Enter channel URL, ID, username or URL"}}),l=e.createEl("label",{text:"Feed title (optional):"}),d=e.createEl("input",{attr:{type:"text",placeholder:"Leave blank to use channel name"}}),c=e.createDiv({cls:"rss-dashboard-modal-buttons"}),u=c.createEl("button",{text:"Cancel"});u.addEventListener("click",()=>{document.body.removeChild(i)});let g=c.createEl("button",{text:"Add channel",cls:"rss-dashboard-primary-button"});g.addEventListener("click",()=>{(async()=>{let m=n.value.trim(),f="",p="",h="";if(!m){new k.Notice("Please enter a YouTube channel URL or ID");return}if(/^UC[\w-]{22}$/.test(m)){p=m,f=`https://www.youtube.com/feeds/videos.xml?channel_id=${m}`;let y=await this.extractChannelIdAndNameFromYouTubePage(`https://www.youtube.com/channel/${m}`);y.channelName&&!d.value?d.value=y.channelName:d.value||(d.value=`YouTube: ${m}`)}else{let y="",w=m;w.startsWith("http")||(w.startsWith("@")?w=`https://www.youtube.com/${w}`:w=`https://www.youtube.com/user/${w}`);let E=await this.extractChannelIdAndNameFromYouTubePage(w);if(p=E.channelId||"",y=E.channelName||"",p)f=`https://www.youtube.com/feeds/videos.xml?channel_id=${p}`,d&&!d.value&&(d.value=y);else{if(m.includes("youtube.com/user/")){let T=m.match(/youtube\.com\/user\/([^/?]+)/);h=T?T[1]:""}else!m.startsWith("http")&&!m.startsWith("@")&&(h=m);if(h)f=`https://www.youtube.com/feeds/videos.xml?user=${h}`;else{new k.Notice("Could not resolve channel ID or username. Please check the URL.");return}}}let v=d.value.trim()||`YouTube: ${p||h}`;this.callbacks.onAddFeed(v,f,this.settings.media.defaultYouTubeFolder).catch(()=>{}),document.body.removeChild(i)})()}),c.appendChild(u),c.appendChild(g),e.appendChild(t),e.appendChild(r),e.appendChild(n),e.appendChild(l),e.appendChild(d),e.appendChild(c),i.appendChild(e),document.body.appendChild(i)}async extractChannelIdAndNameFromYouTubePage(i){try{let t=(await(0,k.requestUrl)(i)).text,s=t.match(/channel_id=(UC[a-zA-Z0-9_-]{22})/),a=s&&s[1]?s[1]:null,r=t.match(/<meta property="og:title" content="([^"]+)"/),n=r&&r[1]?r[1]:null;return{channelId:a,channelName:n}}catch(e){}return{channelId:null,channelName:null}}findFolderByPath(i){let e=i.split("/"),t=this.settings.folders.find(s=>s.name===e[0]);for(let s=1;s<e.length&&t;s++)t=t.subfolders.find(a=>a.name===e[s]);return t||null}async renameFolderByPath(i,e){let s=i.split("/").slice(0,-1).join("/"),a=this.findFolderByPath(i);if(a){if(a.name=e,a.modifiedAt=Date.now(),s){let n=this.findFolderByPath(s);n&&(n.modifiedAt=Date.now())}let r=s?`${s}/${e}`:e;this.settings.feeds.forEach(n=>{n.folder&&(n.folder===i?n.folder=r:n.folder.startsWith(i+"/")&&(n.folder=n.folder.replace(i,r)))}),await this.plugin.saveSettings(),this.clearFolderPathCache(),this.render()}}async addSubfolderByPath(i,e){let t=this.findFolderByPath(i);t&&!t.subfolders.some(s=>s.name===e)&&(t.subfolders.push({name:e,subfolders:[],createdAt:Date.now(),modifiedAt:Date.now()}),t.modifiedAt=Date.now(),this.settings.folders=[...this.settings.folders],await this.plugin.saveSettings(),this.options.currentFolder&&!this.findFolderByPath(this.options.currentFolder)&&(this.options.currentFolder=null),this.options.currentFeed&&!this.settings.feeds.includes(this.options.currentFeed)&&(this.options.currentFeed=null),this.clearFolderPathCache(),this.render())}async addTopLevelFolder(i){this.settings.folders.some(e=>e.name===i)||(this.settings.folders.push({name:i,subfolders:[],createdAt:Date.now(),modifiedAt:Date.now()}),this.settings.folders=[...this.settings.folders],await this.plugin.saveSettings(),this.options.currentFolder&&!this.findFolderByPath(this.options.currentFolder)&&(this.options.currentFolder=null),this.options.currentFeed&&!this.settings.feeds.includes(this.options.currentFeed)&&(this.options.currentFeed=null),this.clearFolderPathCache(),this.render())}showFolderNameModal(i){let e=document.body.createDiv({cls:"rss-dashboard-modal rss-dashboard-modal-container"}),t=e.createDiv({cls:"rss-dashboard-modal-content"});new k.Setting(t).setName(i.title).setHeading();let s=t.createEl("input",{attr:{type:"text",value:i.defaultValue||"",placeholder:"Enter folder name",autocomplete:"off"},cls:"rss-full-width-input rss-input-margin-bottom"});s.spellcheck=!1,s.addEventListener("focus",()=>s.select()),s.addEventListener("keydown",d=>{d.key==="Enter"?n.click():d.key==="Escape"&&r.click()});let a=t.createDiv({cls:"rss-dashboard-modal-buttons"}),r=a.createEl("button",{text:"Cancel"});r.addEventListener("click",()=>{document.body.removeChild(e)});let n=a.createEl("button",{text:"OK"});n.className="rss-dashboard-primary-button",n.addEventListener("click",l);function l(){let d=s.value.trim();d&&(document.body.removeChild(e),i.onSubmit(d))}a.appendChild(r),a.appendChild(n),t.appendChild(s),t.appendChild(a),e.appendChild(t),document.body.appendChild(e),requestAnimationFrame(()=>{s.focus(),s.select()})}removeFolderByPath(i){let e=i.split("/"),t=e.slice(0,-1).join("/");function s(a,r){return a.filter(n=>n.name===e[r]?r===e.length-1?!1:(n.subfolders=s(n.subfolders,r+1),!0):!0)}if(this.settings.folders=s(this.settings.folders,0),t){let a=this.findFolderByPath(t);a&&(a.modifiedAt=Date.now())}this.clearFolderPathCache(),this.render()}getAllDescendantFolderPaths(i){let e=[i],t=this.findFolderByPath(i);function s(a,r){for(let n of a.subfolders){let l=r+"/"+n.name;e.push(l),s(n,l)}}return t&&s(t,i),e}showConfirmModal(i,e){document.querySelectorAll(".rss-dashboard-modal").forEach(t=>t.remove()),window.setTimeout(()=>{let t=document.body.createDiv({cls:"rss-dashboard-modal rss-dashboard-modal-container"}),s=t.createDiv({cls:"rss-dashboard-modal-content"});new k.Setting(s).setName("Confirm").setHeading(),s.createDiv({text:i});let a=s.createDiv({cls:"rss-dashboard-modal-buttons"}),r=a.createEl("button",{text:"Cancel"});r.onclick=()=>document.body.removeChild(t);let n=a.createEl("button",{text:"OK",cls:"rss-dashboard-primary-button"});n.onclick=()=>{document.body.removeChild(t),e()},window.setTimeout(()=>n.focus(),0)},0)}showAddTagModal(){let i=document.body.createDiv({cls:"rss-dashboard-modal rss-dashboard-modal-container"}),e=i.createDiv({cls:"rss-dashboard-modal-content"});new k.Setting(e).setName("Add new tag").setHeading();let t=e.createDiv({cls:"rss-dashboard-tag-modal-form"}),s=t.createEl("input",{attr:{type:"color",value:"#3498db"},cls:"rss-dashboard-tag-modal-color-picker"}),a=t.createEl("input",{attr:{type:"text",placeholder:"Enter tag name",autocomplete:"off"},cls:"rss-dashboard-tag-modal-name-input"});a.spellcheck=!1;let r=e.createDiv({cls:"rss-dashboard-modal-buttons"});r.createEl("button",{text:"Cancel"}).addEventListener("click",()=>{document.body.removeChild(i)});let l=r.createEl("button",{text:"Add tag",cls:"rss-dashboard-primary-button"});l.addEventListener("click",()=>{let d=a.value.trim(),c=s.value;if(d){if(this.settings.availableTags.some(g=>g.name.toLowerCase()===d.toLowerCase())){new k.Notice("A tag with this name already exists!");return}let u={name:d,color:c};this.settings.availableTags.push(u),this.plugin.saveSettings(),this.render(),document.body.removeChild(i),new k.Notice(`Tag "${d}" added successfully!`)}else new k.Notice("Please enter a tag name!")}),r.appendChild(l),t.appendChild(r),i.appendChild(e),document.body.appendChild(i),requestAnimationFrame(()=>{a.focus()})}showTagContextMenu(i,e){let t=new k.Menu;t.addItem(s=>{s.setTitle("Edit tag").setIcon("pencil").onClick(()=>{this.showEditTagModal(e)})}),t.addItem(s=>{s.setTitle("Delete tag").setIcon("trash").onClick(()=>{this.showConfirmModal(`Are you sure you want to delete the tag "${e.name}"? This will remove the tag from all articles.`,()=>{this.deleteTag(e)})})}),t.showAtMouseEvent(i)}showEditTagModal(i){let e=document.body.createDiv({cls:"rss-dashboard-modal rss-dashboard-modal-container"}),t=e.createDiv({cls:"rss-dashboard-modal-content"});new k.Setting(t).setName("Edit tag").setHeading();let s=t.createDiv({cls:"rss-dashboard-tag-modal-form"}),a=s.createEl("input",{attr:{type:"color",value:i.color},cls:"rss-dashboard-tag-modal-color-picker"}),r=s.createEl("input",{attr:{type:"text",value:i.name,placeholder:"Enter tag name",autocomplete:"off"},cls:"rss-dashboard-tag-modal-name-input"});r.spellcheck=!1;let n=t.createDiv({cls:"rss-dashboard-modal-buttons"});n.createEl("button",{text:"Cancel"}).addEventListener("click",()=>{document.body.removeChild(e)});let d=n.createEl("button",{text:"Save changes",cls:"rss-dashboard-primary-button"});d.addEventListener("click",()=>{let c=r.value.trim(),u=a.value;if(c){if(this.settings.availableTags.some(g=>g.name.toLowerCase()===c.toLowerCase()&&g!==i)){new k.Notice("A tag with this name already exists!");return}i.name=c,i.color=u,this.settings.feeds.forEach(g=>{g.items.forEach(m=>{if(m.tags){let f=m.tags.find(p=>p.name===i.name);f&&(f.name=c,f.color=u)}})}),this.plugin.saveSettings(),this.render(),document.body.removeChild(e),new k.Notice(`Tag "${c}" updated successfully!`)}else new k.Notice("Please enter a tag name!")}),n.appendChild(d),s.appendChild(n),e.appendChild(t),document.body.appendChild(e),requestAnimationFrame(()=>{r.focus(),r.select()})}deleteTag(i){let e=this.settings.availableTags.findIndex(t=>t.name===i.name);e!==-1&&this.settings.availableTags.splice(e,1),this.settings.feeds.forEach(t=>{t.items.forEach(s=>{s.tags&&(s.tags=s.tags.filter(a=>a.name!==i.name))})}),this.plugin.saveSettings(),this.render(),new k.Notice(`Tag "${i.name}" deleted successfully!`)}showUnreadItemsContextMenu(i){let e=new k.Menu;e.addItem(t=>{t.setTitle("Mark all unread as read").setIcon("check-circle").onClick(()=>{this.markAllUnreadAsRead()})}),e.showAtMouseEvent(i)}showReadItemsContextMenu(i){let e=new k.Menu;e.addItem(t=>{t.setTitle("Mark all read as unread").setIcon("circle").onClick(()=>{this.markAllReadAsUnread()})}),e.showAtMouseEvent(i)}async markAllUnreadAsRead(){let i=0;this.settings.feeds.forEach(e=>{e.items.forEach(t=>{t.read||(t.read=!0,i++)})}),i>0?(await this.plugin.saveSettings(),this.render(),new k.Notice(`Marked ${i} items as read`)):new k.Notice("No unread items found")}async markAllReadAsUnread(){let i=0;this.settings.feeds.forEach(e=>{e.items.forEach(t=>{t.read&&(t.read=!1,i++)})}),i>0?(await this.plugin.saveSettings(),this.render(),new k.Notice(`Marked ${i} items as unread`)):new k.Notice("No read items found")}renderHeader(){let e=this.container.createDiv({cls:"rss-dashboard-header"}).createDiv({cls:"rss-dashboard-nav-container"}),t=e.createDiv({cls:"rss-dashboard-nav-button active"});t.appendText(" Dashboard"),t.addEventListener("click",()=>{this.plugin.activateView()});let s=e.createDiv({cls:"rss-dashboard-nav-button"});s.appendText(" Discover"),s.addEventListener("click",()=>{this.plugin.activateDiscoverView()})}renderFilters(){var u,g;let i=this.container.createDiv({cls:"rss-dashboard-filters-section"}),e=((u=this.settings.display)==null?void 0:u.filterDisplayStyle)||"inline";i.addClass(`rss-dashboard-filters-${e}`);let t=null;e==="inline"&&(t=i.createDiv({cls:"rss-dashboard-filter-items-row"}));let s=(m,f,p,h)=>{let y=(e==="inline"&&t?t:i).createDiv({cls:"rss-dashboard-filter-item"+(h?" active":"")}),w=y.createDiv({cls:"rss-dashboard-filter-icon"});return(0,k.setIcon)(w,f),e==="vertical"&&y.createDiv({cls:"rss-dashboard-filter-name",text:p}),e==="inline"&&y.setAttribute("title",p),y.addEventListener("click",()=>{this.callbacks.onFolderClick(m==="all"?null:m)}),m==="unread"&&y.addEventListener("contextmenu",E=>{E.preventDefault(),this.showUnreadItemsContextMenu(E)}),m==="read"&&y.addEventListener("contextmenu",E=>{E.preventDefault(),this.showReadItemsContextMenu(E)}),y},a=((g=this.settings.display)==null?void 0:g.hiddenFilters)||[];s("all","list","All items",this.options.currentFolder===null&&this.options.currentFeed===null&&this.options.currentTag===null),a.includes("starred")||s("starred","star","Starred items",this.options.currentFolder==="starred"),a.includes("unread")||s("unread","circle","Unread items",this.options.currentFolder==="unread"),a.includes("read")||s("read","check-circle","Read items",this.options.currentFolder==="read"),a.includes("saved")||s("saved","save","Saved items",this.options.currentFolder==="saved"),a.includes("videos")||s("videos","play","Videos",this.options.currentFolder==="videos"),a.includes("podcasts")||s("podcasts","mic","Podcasts",this.options.currentFolder==="podcasts");let r=e==="inline"&&t?t:i,n=r.createDiv({cls:"rss-dashboard-filter-item rss-dashboard-tags-filter"+(this.isTagsExpanded?" active":"")}),l=n.createDiv({cls:"rss-dashboard-filter-icon"});if((0,k.setIcon)(l,"tag"),e==="vertical"&&n.createDiv({cls:"rss-dashboard-filter-name",text:"Tags"}),e==="inline"&&n.setAttribute("title","Tags"),n.addEventListener("click",()=>{this.isTagsExpanded=!this.isTagsExpanded,this.render()}),this.isTagsExpanded){let m=i.createDiv({cls:"rss-dashboard-tags-container"}),f=m.createDiv({cls:"rss-dashboard-add-tag-button"});(0,k.setIcon)(f,"plus"),f.appendText(" Add tag"),f.addEventListener("click",p=>{p.stopPropagation(),this.showAddTagModal()});for(let p of this.settings.availableTags){let h=m.createDiv({cls:"rss-dashboard-sidebar-tag"+(this.options.currentTag===p.name?" active":"")});h.createDiv({cls:"rss-dashboard-tag-color-dot"}).style.setProperty("--tag-color",p.color),h.createDiv({cls:"rss-dashboard-tag-name",text:p.name});let y=0;for(let w of this.settings.feeds)y+=w.items.filter(E=>E.tags&&E.tags.some(T=>T.name===p.name)).length;y>0&&h.createDiv({cls:"rss-dashboard-tag-count",text:y.toString()}),h.addEventListener("click",w=>{w.stopPropagation(),this.callbacks.onTagClick(p.name)}),h.addEventListener("contextmenu",w=>{w.preventDefault(),this.showTagContextMenu(w,p)})}}let d=r.createDiv({cls:"rss-dashboard-filter-item rss-dashboard-search-filter"+(this.isSearchExpanded?" active":"")}),c=d.createDiv({cls:"rss-dashboard-filter-icon"});if((0,k.setIcon)(c,"search"),e==="vertical"&&d.createDiv({cls:"rss-dashboard-filter-name",text:"Search"}),e==="inline"&&d.setAttribute("title","Search"),d.addEventListener("click",()=>{this.isSearchExpanded=!this.isSearchExpanded,this.render()}),this.isSearchExpanded){let f=i.createDiv({cls:"rss-dashboard-search-container"}).createEl("input",{cls:"rss-dashboard-search-input",attr:{type:"text",placeholder:"Search articles...",autocomplete:"off",spellcheck:"false"}});f.addEventListener("focus",()=>{f.select()});let p;f.addEventListener("input",h=>{var y;let v=(((y=h.target)==null?void 0:y.value)||"").toLowerCase().trim();p&&window.clearTimeout(p),p=window.setTimeout(()=>{let w=document.querySelector(".rss-dashboard-content");w&&w.querySelectorAll(".rss-dashboard-article-item, .rss-dashboard-article-card").forEach(T=>{var b;let x=T.querySelector(".rss-dashboard-article-title"),S=((b=x==null?void 0:x.textContent)==null?void 0:b.toLowerCase())||"";v&&!S.includes(v)?T.addClass("rss-dashboard-search-result","hidden"):T.addClass("rss-dashboard-search-result","visible")})},150)}),requestAnimationFrame(()=>{f.focus()})}}renderToolbar(){let i=this.container.querySelector(".rss-dashboard-sidebar-toolbar");i&&i.remove();let e=this.container.createDiv({cls:"rss-dashboard-sidebar-toolbar"}),t=e.createDiv({cls:"rss-dashboard-toolbar-button",attr:{title:"Add folder"}});(0,k.setIcon)(t,"folder-plus"),t.addEventListener("click",()=>{this.showFolderNameModal({title:"Add folder",onSubmit:m=>{this.addTopLevelFolder(m).then(()=>this.render())}})});let s=e.createDiv({cls:"rss-dashboard-toolbar-button",attr:{title:"Sort folders"}});(0,k.setIcon)(s,"sort-asc"),s.addEventListener("click",m=>{let f=new k.Menu;f.addItem(p=>p.setTitle("Folder name (a to z)").onClick(()=>{this.sortFolders("name",!0)})),f.addItem(p=>p.setTitle("Folder name (z to a)").onClick(()=>{this.sortFolders("name",!1)})),f.addItem(p=>p.setTitle("Modified time (new to old)").onClick(()=>{this.sortFolders("modified",!1)})),f.addItem(p=>p.setTitle("Modified time (old to new)").onClick(()=>{this.sortFolders("modified",!0)})),f.addItem(p=>p.setTitle("Created time (new to old)").onClick(()=>{this.sortFolders("created",!1)})),f.addItem(p=>p.setTitle("Created time (old to new)").onClick(()=>{this.sortFolders("created",!0)})),f.showAtMouseEvent(m)});let a=e.createDiv({cls:"rss-dashboard-toolbar-button",attr:{title:"Collapse/Expand all Folders"}}),r=null,n=()=>{r||(r=this.getCachedFolderPaths());let m=r.length>0&&r.every(f=>this.options.collapsedFolders.includes(f));(0,k.setIcon)(a,m?"chevrons-down-up":"chevrons-up-down")};n(),a.addEventListener("click",()=>{r=null,this.toggleAllFolders(),window.setTimeout(()=>n(),0)});let l=e.createDiv({cls:"rss-dashboard-toolbar-button",attr:{title:"Add feed"}});(0,k.setIcon)(l,"plus"),l.addEventListener("click",()=>{this.showAddFeedModal()});let d=e.createDiv({cls:"rss-dashboard-toolbar-button",attr:{title:"Add youtube channel"}});(0,k.setIcon)(d,"youtube"),d.addEventListener("click",()=>{this.showAddYouTubeFeedModal()});let c=e.createDiv({cls:"rss-dashboard-toolbar-button",attr:{title:"Import opml"}});(0,k.setIcon)(c,"upload"),c.addEventListener("click",()=>{this.callbacks.onImportOpml()});let u=e.createDiv({cls:"rss-dashboard-toolbar-button",attr:{title:"Export opml"}});(0,k.setIcon)(u,"download"),u.addEventListener("click",()=>{this.callbacks.onExportOpml()});let g=e.createDiv({cls:"rss-dashboard-toolbar-button",attr:{title:"Manage feeds"}});(0,k.setIcon)(g,"list"),g.addEventListener("click",()=>{this.callbacks.onManageFeeds&&this.callbacks.onManageFeeds()})}showAddFeedModal(i="Uncategorized"){new Le(this.app,this.settings.folders,async(e,t,s,a,r,n)=>await this.callbacks.onAddFeed(e,t,s,a,r,n),()=>this.render(),i,this.plugin).open()}showEditFeedModal(i){new Pe(this.app,this.plugin,i,()=>this.render()).open()}showFeedContextMenu(i,e){let t=new k.Menu;t.addItem(s=>{s.setTitle("Update feed").setIcon("refresh-cw").onClick(()=>{this.callbacks.onUpdateFeed(e)})}),t.addItem(s=>{s.setTitle("Edit feed").setIcon("edit").onClick(()=>{this.showEditFeedModal(e)})}),t.addItem(s=>{s.setTitle("Mark all as read").setIcon("check-circle").onClick(()=>{e.items.forEach(a=>{a.read=!0}),this.plugin.saveSettings().then(()=>this.render())})}),t.addItem(s=>{s.setTitle("Change media type").setIcon("circle-gauge").onClick(a=>{let r=new k.Menu;r.addItem(n=>{n.setTitle("Article").setIcon("file-text").onClick(()=>{e.mediaType="article",this.plugin.saveSettings().then(()=>this.render())})}),r.addItem(n=>{n.setTitle("Podcast").setIcon("headphones").onClick(()=>{e.mediaType="podcast",this.plugin.saveSettings().then(()=>this.render())})}),r.addItem(n=>{n.setTitle("Video").setIcon("play-circle").onClick(()=>{e.mediaType="video",this.plugin.saveSettings().then(()=>this.render())})}),a instanceof MouseEvent&&r.showAtMouseEvent(a)})}),t.addItem(s=>{s.setTitle("Move to folder").setIcon("folder-open").onClick(a=>{a instanceof MouseEvent&&this.showMoveToFolderMenu(a,e)})}),t.addItem(s=>{s.setTitle("Delete feed").setIcon("trash").onClick(()=>{this.showConfirmModal(`Are you sure you want to delete the feed "${e.title}"?`,()=>{this.callbacks.onDeleteFeed(e)})})}),t.showAtMouseEvent(i)}showMoveToFolderMenu(i,e){let t=new k.Menu;t.addItem(a=>{let r=!e.folder;a.setTitle("Root (no folder)").setIcon(r?"check":"folder").onClick(()=>{if(e.folder){let n=this.findFolderByPath(e.folder);n&&(n.modifiedAt=Date.now())}e.folder="",this.plugin.saveSettings().then(()=>{this.render(),new k.Notice(`Moved "${e.title}" to root`)})})}),t.addSeparator();let s=this.getCachedFolderPaths();s.length>0&&(s.sort((a,r)=>a.localeCompare(r)),s.forEach(a=>{let r=e.folder===a;t.addItem(n=>{n.setTitle(a).setIcon(r?"check":"folder").onClick(()=>{if(e.folder!==a){if(e.folder){let d=this.findFolderByPath(e.folder);d&&(d.modifiedAt=Date.now())}e.folder=a;let l=this.findFolderByPath(a);l&&(l.modifiedAt=Date.now()),this.plugin.saveSettings().then(()=>{this.render(),new k.Notice(`Moved "${e.title}" to "${a}"`)})}})})})),t.addSeparator(),t.addItem(a=>{a.setTitle("Create new folder...").setIcon("folder-plus").onClick(()=>{this.showFolderNameModal({title:"Create new folder",onSubmit:r=>{(async()=>{await this.addTopLevelFolder(r),e.folder=r;let n=this.findFolderByPath(r);n&&(n.modifiedAt=Date.now()),await this.plugin.saveSettings(),this.render(),new k.Notice(`Created folder "${r}" and moved "${e.title}" to it`)})()}})})}),t.showAtMouseEvent(i)}_sortFolders(i,e){let t=(a,r)=>{if(a.pinned&&!r.pinned)return-1;if(!a.pinned&&r.pinned)return 1;let n,l;switch(i){case"name":return n=a.name,l=r.name,n.localeCompare(l,void 0,{numeric:!0})*(e?1:-1);case"created":n=a.createdAt||0,l=r.createdAt||0;break;case"modified":n=a.modifiedAt||0,l=r.modifiedAt||0;break;default:return 0}return n<l?e?-1:1:n>l?e?1:-1:0},s=a=>{let r=[...a].sort(t);return r.forEach(n=>{n.subfolders&&n.subfolders.length>0&&(n.subfolders=s(n.subfolders))}),r};this.settings.folders=s(this.settings.folders)}async sortFolders(i,e){this._sortFolders(i,e),this.settings.folderSortOrder={by:i,ascending:e},await this.plugin.saveSettings(),this.render()}showFeedSortMenu(i,e){let t=new k.Menu;t.addItem(s=>s.setTitle("Feed name (a to z)").onClick(()=>{this.sortFeedsInFolder(e,"name",!0)})),t.addItem(s=>s.setTitle("Feed name (z to a)").onClick(()=>{this.sortFeedsInFolder(e,"name",!1)})),t.addItem(s=>s.setTitle("Created time (new to old)").onClick(()=>{this.sortFeedsInFolder(e,"created",!1)})),t.addItem(s=>s.setTitle("Created time (old to new)").onClick(()=>{this.sortFeedsInFolder(e,"created",!0)})),t.addItem(s=>s.setTitle("Number of items (high to low)").onClick(()=>{this.sortFeedsInFolder(e,"itemCount",!1)})),t.addItem(s=>s.setTitle("Number of items (low to high)").onClick(()=>{this.sortFeedsInFolder(e,"itemCount",!0)})),t.showAtMouseEvent(i)}async sortFeedsInFolder(i,e,t){let s;if(i)s=this.settings.feeds.filter(r=>r.folder===i);else{let r=new Set(this.getCachedFolderPaths());s=this.settings.feeds.filter(n=>!n.folder||!r.has(n.folder))}if(s.length===0){new k.Notice("No feeds found in this folder");return}let a=this.applyFeedSortOrder([...s],{by:e,ascending:t});if(i)this.settings.feeds=this.settings.feeds.filter(r=>r.folder!==i);else{let r=new Set(this.getCachedFolderPaths());this.settings.feeds=this.settings.feeds.filter(n=>n.folder&&r.has(n.folder))}this.settings.feeds.push(...a),this.settings.folderFeedSortOrders||(this.settings.folderFeedSortOrders={}),this.settings.folderFeedSortOrders[i]={by:e,ascending:t},await this.plugin.saveSettings(),new k.Notice(`Feeds in "${i||"root"}" sorted by ${e} (${t?"ascending":"descending"})`),this.render()}applyFeedSortOrder(i,e){let t=(s,a)=>{let r,n;switch(e.by){case"name":return r=s.title,n=a.title,r.localeCompare(n,void 0,{numeric:!0})*(e.ascending?1:-1);case"created":r=s.lastUpdated||0,n=a.lastUpdated||0;break;case"itemCount":r=s.items.length,n=a.items.length;break;default:return 0}return r<n?e.ascending?-1:1:r>n?e.ascending?1:-1:0};return[...i].sort(t)}toggleAllFolders(){var s,a,r,n;let i=this.getCachedFolderPaths();if(i.length===0)return;let e=new Set(this.options.collapsedFolders);if(i.every(l=>e.has(l))){let l=i,d=[];(a=(s=this.callbacks).onBatchToggleFolders)==null||a.call(s,d,l),new k.Notice("All folders expanded")}else{let l=[],d=i;(n=(r=this.callbacks).onBatchToggleFolders)==null||n.call(r,d,l),new k.Notice("All folders collapsed")}}};var B=require("obsidian");function wt(o){return new Promise(i=>window.setTimeout(i,o))}function Yt(o){let i=new Date,e=typeof o=="string"?new Date(o):o;if(isNaN(e.getTime()))return"Invalid date";if(i.toDateString()===e.toDateString())return"Today";let t=i.getTime()-e.getTime(),s=Math.floor(t/1e3),a=Math.floor(s/60),r=Math.floor(a/60),n=Math.floor(r/24),l=Math.floor(n/7),d=Math.floor(n/30),c=Math.floor(n/365);if(typeof Intl!="undefined"&&Intl.RelativeTimeFormat)try{let u=new Intl.RelativeTimeFormat("en",{numeric:"auto",style:"long"});return c>0?u.format(-c,"year"):d>0?u.format(-d,"month"):l>0?u.format(-l,"week"):n>0?u.format(-n,"day"):r>0?u.format(-r,"hour"):a>0?u.format(-a,"minute"):u.format(-s,"second")}catch(u){}return c>0?`${c} year${c>1?"s":""} ago`:d>0?`${d} month${d>1?"s":""} ago`:l>0?`${l} week${l>1?"s":""} ago`:n>0?`${n} day${n>1?"s":""} ago`:r>0?`${r} hour${r>1?"s":""} ago`:a>0?`${a} minute${a>1?"s":""} ago`:"Just now"}function We(o){let i=typeof o=="string"?new Date(o):o,e=Yt(i),t=i.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return{text:e,title:t}}function ae(o){return/^\s*<meta[^>]+charset=/i.test(o)?o:'<meta charset="UTF-8">'+o}function bt(o,i){for(let[e,t]of Object.entries(i))o.style.setProperty(e,t)}var re=6,Ve=class{constructor(i,e,t,s,a,r,n,l,d,c){this.refreshButton=null;this.resizeObserver=null;this.container=i,this.settings=e,this.title=t,this.articles=s,this.selectedArticle=a,this.callbacks=r,this.currentPage=n,this.totalPages=l,this.pageSize=d,this.totalArticles=c}destroy(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null)}render(){let i=this.container.querySelector(".rss-dashboard-articles-list"),e=i==null?void 0:i.scrollTop;this.container.empty(),this.renderHeader(),this.renderArticles(),i&&e!==void 0&&requestAnimationFrame(()=>{i.scrollTop=e})}renderHeader(){let i=this.container.createDiv({cls:"rss-dashboard-articles-header"});this.resizeObserver&&this.resizeObserver.disconnect(),this.resizeObserver=new ResizeObserver(c=>{for(let u of c)u.contentRect.width<700?i.classList.add("is-narrow"):i.classList.remove("is-narrow")}),this.resizeObserver.observe(i);let e=i.createDiv({cls:"rss-dashboard-header-left"}),t=e.createDiv({cls:"rss-dashboard-sidebar-toggle",attr:{title:"Toggle sidebar"}});(0,B.setIcon)(t,this.settings.sidebarCollapsed?"panel-left-open":"panel-left-close"),t.addEventListener("click",c=>{c.stopPropagation(),this.callbacks.onToggleSidebar()}),e.createDiv({cls:"rss-dashboard-articles-title",text:this.title});let s=i.createDiv({cls:"rss-dashboard-header-right"}),a=s.createDiv({cls:"rss-dashboard-hamburger-menu"}),r=a.createDiv({cls:"rss-dashboard-hamburger-button",attr:{title:"Menu"}});(0,B.setIcon)(r,"menu");let n=a.createDiv({cls:"rss-dashboard-dropdown-menu"}),l=n.createDiv({cls:"rss-dashboard-dropdown-controls"});this.createControls(l);let d=s.createDiv({cls:"rss-dashboard-desktop-controls"});this.createControls(d),r.addEventListener("click",c=>{c.stopPropagation(),n.classList.toggle("active"),r.classList.toggle("active")}),document.addEventListener("click",c=>{a.contains(c.target)||(n.classList.remove("active"),r.classList.remove("active"))})}createControls(i){let e=i.createDiv({cls:"rss-dashboard-article-controls"}),t=e.createEl("select");t.addClass("rss-dashboard-filter");let s={"Article max age unlimited":0,"Article max age 1 hour":3600*1e3,"Article max age 2 hours":2*3600*1e3,"Article max age 4 hours":4*3600*1e3,"Article max age 8 hours":8*3600*1e3,"Article max age 24 hours":24*3600*1e3,"Article max age 48 hours":48*3600*1e3,"Article max age 3 days":3*24*3600*1e3,"Article max age 1 week":7*24*3600*1e3,"Article max age 2 weeks":14*24*3600*1e3,"Article max age 1 month":30*24*3600*1e3,"Article max age 2 months":60*24*3600*1e3,"Article max age 6 months":180*24*3600*1e3,"Article max age 1 year":365*24*3600*1e3};for(let[g,m]of Object.entries(s))t.createEl("option",{text:g,value:String(m)});let a=typeof this.settings.articleFilter.value=="number"?this.settings.articleFilter.value:0;t.value=String(a),t.addEventListener("change",g=>{let m=Number(g.target.value);this.callbacks.onFilterChange({type:m===0?"none":"age",value:m})});let r=e.createEl("select");r.addClass("rss-dashboard-sort"),r.createEl("option",{text:"Sort by newest",value:"newest"}),r.createEl("option",{text:"Sort by oldest",value:"oldest"}),r.value=this.settings.articleSort,r.addEventListener("change",g=>{this.callbacks.onSortChange(g.target.value)});let n=e.createEl("select");n.addClass("rss-dashboard-group"),n.createEl("option",{text:"No grouping",value:"none"}),n.createEl("option",{text:"Group by feed",value:"feed"}),n.createEl("option",{text:"Group by date",value:"date"}),n.createEl("option",{text:"Group by folder",value:"folder"}),n.value=this.settings.articleGroupBy,n.addEventListener("change",g=>{this.callbacks.onGroupChange(g.target.value)});let l=e.createDiv({cls:"rss-dashboard-view-toggle"});l.createEl("button",{cls:"rss-dashboard-list-view-button"+(this.settings.viewStyle==="list"?" active":""),text:"List"}).addEventListener("click",()=>{this.callbacks.onToggleViewStyle("list")}),l.createEl("button",{cls:"rss-dashboard-card-view-button"+(this.settings.viewStyle==="card"?" active":""),text:"Card"}).addEventListener("click",()=>{this.callbacks.onToggleViewStyle("card")});let u=e.createEl("button",{cls:"rss-dashboard-refresh-button",text:"Refresh",attr:{title:"Refresh feeds"}});i.classList.contains("rss-dashboard-dropdown-controls")||(this.refreshButton=u),u.addEventListener("click",()=>{this.callbacks.onRefreshFeeds()})}renderArticles(){let i=this.container.createDiv({cls:`rss-dashboard-articles-list rss-dashboard-${this.settings.viewStyle}-view`});if(this.articles.length===0){let s=i.createDiv({cls:"rss-dashboard-empty-state"}),a=s.createDiv();(0,B.setIcon)(a,"rss"),a.addClass("rss-dashboard-empty-state-icon"),new B.Setting(s).setName("No articles found").setHeading(),s.createEl("p",{text:"Try refreshing your feeds or adding new ones."});return}let e=this.container.scrollTop;if(this.settings.articleGroupBy==="none")this.settings.viewStyle==="list"?this.renderListView(i,this.articles):this.renderCardView(i,this.articles);else{let s=this.groupArticles(this.articles,this.settings.articleGroupBy);for(let a in s){let r=i.createDiv({cls:"rss-dashboard-article-group"});new B.Setting(r).setName(a).setHeading();let n=s[a];this.settings.viewStyle==="list"?this.renderListView(r,n):this.renderCardView(r,n)}}let t=this.container.createDiv({cls:"rss-dashboard-pagination-wrapper"});this.renderPagination(t,this.currentPage,this.totalPages,this.pageSize,this.totalArticles),this.container&&(this.container.scrollTop=e)}groupArticles(i,e){return e==="none"?{"All articles":i}:i.reduce((t,s)=>{let a;switch(e){case"feed":a=s.feedTitle||"Uncategorized";break;case"date":a=We(s.pubDate).text;break;case"folder":a=this.getFeedFolder(s.feedUrl)||"Uncategorized";break;default:a="All articles"}return t[a]||(t[a]=[]),t[a].push(s),t},{})}getFeedFolder(i){let e=this.settings.feeds.find(t=>t.url===i);return e==null?void 0:e.folder}renderListView(i,e){for(let t of e){let s=i.createDiv({cls:"rss-dashboard-article-item"+(t.read?" read":" unread")+(t.starred?" starred":" unstarred")+(t.saved?" saved":"")+(t.mediaType==="video"?" video":"")+(t.mediaType==="podcast"?" podcast":""),attr:{id:`article-${t.guid}`}}),a=s.createDiv("rss-dashboard-article-content"),r=a.createDiv("rss-dashboard-list-row-1");r.createDiv({cls:"rss-dashboard-article-title rss-dashboard-list-title",text:t.title});let n=r.createDiv("rss-dashboard-article-meta");n.createSpan({text:"|"}),n.createSpan("rss-dashboard-article-source").setText(t.feedTitle),n.createSpan({text:"|"});let l=We(t.pubDate),d=n.createSpan("rss-dashboard-article-date");d.textContent=l.text,d.setAttribute("title",l.title);let c=a.createDiv("rss-dashboard-list-row-2"),u=c.createDiv("rss-dashboard-action-toolbar rss-dashboard-list-toolbar"),g=u.createDiv({cls:`rss-dashboard-save-toggle ${t.saved?"saved":""}`,attr:{title:t.saved?"Click to open saved article":this.settings.articleSaving.saveFullContent?"Save full article content to notes":"Save article summary to notes"}});(0,B.setIcon)(g,"save"),g.querySelector("svg")||(g.textContent="\u{1F4BE}"),g.addEventListener("click",w=>{if(w.stopPropagation(),t.saved)this.callbacks.onOpenSavedArticle?this.callbacks.onOpenSavedArticle(t):new B.Notice("Article already saved. Look in your notes.");else if(this.callbacks.onArticleSave){if(g.classList.contains("saving"))return;g.classList.add("saving"),g.setAttribute("title","Saving article..."),this.callbacks.onArticleSave(t),g.classList.add("saved"),(0,B.setIcon)(g,"save"),g.querySelector("svg")||(g.textContent="\u{1F4BE}"),g.classList.remove("saving"),g.setAttribute("title","Click to open saved article")}});let m=u.createDiv({cls:`rss-dashboard-read-toggle ${t.read?"read":"unread"}`});(0,B.setIcon)(m,t.read?"check-circle":"circle"),m.addEventListener("click",w=>{w.stopPropagation(),this.callbacks.onArticleUpdate(t,{read:!t.read},!1),m.classList.toggle("read",!m.classList.contains("read")),m.classList.toggle("unread",!m.classList.contains("unread")),(0,B.setIcon)(m,t.read?"check-circle":"circle")});let f=u.createDiv({cls:`rss-dashboard-star-toggle ${t.starred?"starred":"unstarred"}`}),p=f.createSpan({cls:"rss-dashboard-star-icon"});f.appendChild(p),(0,B.setIcon)(p,t.starred?"star":"star-off"),p.querySelector("svg")||(p.textContent=t.starred?"\u2605":"\u2606"),f.addEventListener("click",w=>{w.stopPropagation(),this.callbacks.onArticleUpdate(t,{starred:!t.starred},!1),f.classList.toggle("starred",!f.classList.contains("starred")),f.classList.toggle("unstarred",!f.classList.contains("unstarred"));let E=f.querySelector(".rss-dashboard-star-icon");E&&((0,B.setIcon)(E,t.starred?"star":"star-off"),E.querySelector("svg")||(E.textContent=t.starred?"\u2605":"\u2606"))});let v=u.createDiv({cls:"rss-dashboard-tags-dropdown"}).createDiv({cls:"rss-dashboard-tags-toggle"});(0,B.setIcon)(v,"tag"),v.addEventListener("click",w=>{w.stopPropagation(),this.createPortalDropdown(v,t,(E,T)=>{var b;t.tags||(t.tags=[]),T?t.tags.some(C=>C.name===E.name)||t.tags.push({...E}):t.tags=t.tags.filter(C=>C.name!==E.name);let x=this.articles.findIndex(C=>C.guid===t.guid);x!==-1&&(this.articles[x]={...t});let S=this.container.querySelector(`[id="article-${t.guid}"]`);if(S||(S=(b=this.container.closest(".rss-dashboard-container"))==null?void 0:b.querySelector(`[id="article-${t.guid}"]`)),S||(S=document.getElementById(`article-${t.guid}`)),S){S.classList.add("rss-dashboard-tag-change-feedback"),window.setTimeout(()=>{S.classList.remove("rss-dashboard-tag-change-feedback")},200);let C=S.querySelector(".rss-dashboard-article-tags");if(C)for(;C.firstChild;)C.removeChild(C.firstChild);else{let A=S.querySelector(".rss-dashboard-card-content")||S,F=A.querySelector(".rss-dashboard-action-toolbar");F&&(C=A.createDiv({cls:"rss-dashboard-article-tags"}),A.insertBefore(C,F))}if(C&&t.tags&&t.tags.length>0)t.tags.slice(0,re).forEach(F=>{C&&C.createDiv({cls:"rss-dashboard-article-tag",text:F.name}).style.setProperty("--tag-color",F.color||"var(--interactive-accent)")}),t.tags.length>re&&C&&C.createDiv({cls:"rss-dashboard-tag-overflow",text:`+${t.tags.length-re}`,attr:{title:t.tags.slice(re).map(F=>F.name).join(", ")}});else if(C)for(;C.firstChild;)C.removeChild(C.firstChild);S.offsetHeight}else{let C=document.body.createDiv({cls:"rss-dashboard-tag-change-notification",text:`Tag "${E.name}" ${T?"added":"removed"}`});window.setTimeout(()=>{C.parentNode&&C.parentNode.removeChild(C)},1500)}})});let y=null;y=c.createDiv("rss-dashboard-article-tags"),t.tags&&t.tags.length>0&&t.tags.forEach(w=>{y&&y.createDiv({cls:"rss-dashboard-article-tag",text:w.name}).style.setProperty("--tag-color",w.color)}),s.addEventListener("click",()=>{this.callbacks.onArticleClick(t)}),s.addEventListener("contextmenu",w=>{w.preventDefault(),this.showArticleContextMenu(w,t)})}}renderCardView(i,e){for(let t of e){let s=i.createDiv({cls:"rss-dashboard-article-card"+(t===this.selectedArticle?" active":"")+(t.read?" read":" unread")+(t.saved?" saved":"")+(t.mediaType==="video"?" rss-dashboard-youtube-article":"")+(t.mediaType==="podcast"?" rss-dashboard-podcast-article":""),attr:{id:`article-${t.guid}`}}),a=s.createDiv({cls:"rss-dashboard-card-content"});a.createDiv({cls:"rss-dashboard-article-title",text:t.title});let n=a.createDiv({cls:"rss-dashboard-article-meta"}).createDiv({cls:"rss-dashboard-article-feed-container"});t.mediaType==="video"?(0,B.setIcon)(n,"video"):t.mediaType==="podcast"&&(0,B.setIcon)(n,"podcast"),n.createDiv({cls:"rss-dashboard-article-feed",text:t.feedTitle});let l=t.coverImage;if(!l&&t.content){let y=Tt(t.content);y&&(l=y)}if(!l&&t.summary){let y=Tt(t.summary);y&&(l=y)}if(l){let y=a.createDiv({cls:"rss-dashboard-cover-container"+(t.summary?" has-summary":"")}),w=y.createEl("img",{cls:"rss-dashboard-cover-image",attr:{src:l,alt:t.title}});if(w.onerror=()=>{y.remove()},t.summary){let E=y.createDiv({cls:"rss-dashboard-summary-overlay"});E.textContent=t.summary}}else if(t.summary){let y=a.createDiv({cls:"rss-dashboard-cover-summary-only"});y.textContent=t.summary}if(t.tags&&t.tags.length>0){let y=a.createDiv({cls:"rss-dashboard-article-tags"});if(t.tags.slice(0,re).forEach(E=>{y.createDiv({cls:"rss-dashboard-article-tag",text:E.name}).style.setProperty("--tag-color",E.color)}),t.tags.length>re){let E=y.createDiv({cls:"rss-dashboard-tag-overflow",text:`+${t.tags.length-re}`});E.title=t.tags.slice(re).map(T=>T.name).join(", ")}}let d=a.createDiv({cls:"rss-dashboard-action-toolbar"}),c=d.createDiv({cls:`rss-dashboard-save-toggle ${t.saved?"saved":""}`,attr:{title:t.saved?"Click to open saved article":this.settings.articleSaving.saveFullContent?"Save full article content to notes":"Save article summary to notes"}});(0,B.setIcon)(c,"save"),c.querySelector("svg")||(c.textContent="\u{1F4BE}"),c.addEventListener("click",y=>{if(y.stopPropagation(),t.saved)this.callbacks.onOpenSavedArticle?this.callbacks.onOpenSavedArticle(t):new B.Notice("Article already saved. Look in your notes.");else if(this.callbacks.onArticleSave){if(c.classList.contains("saving"))return;c.classList.add("saving"),c.setAttribute("title","Saving article..."),this.callbacks.onArticleSave(t),c.classList.add("saved"),(0,B.setIcon)(c,"save"),c.querySelector("svg")||(c.textContent="\u{1F4BE}"),c.classList.remove("saving"),c.setAttribute("title","Click to open saved article")}});let u=d.createDiv({cls:`rss-dashboard-read-toggle ${t.read?"read":"unread"}`});(0,B.setIcon)(u,t.read?"check-circle":"circle"),u.addEventListener("click",y=>{y.stopPropagation(),this.callbacks.onArticleUpdate(t,{read:!t.read},!1),u.classList.toggle("read",!u.classList.contains("read")),u.classList.toggle("unread",!u.classList.contains("unread")),(0,B.setIcon)(u,t.read?"check-circle":"circle")});let g=d.createDiv({cls:`rss-dashboard-star-toggle ${t.starred?"starred":"unstarred"}`}),m=g.createSpan({cls:"rss-dashboard-star-icon"});g.appendChild(m),(0,B.setIcon)(m,t.starred?"star":"star-off"),m.querySelector("svg")||(m.textContent=t.starred?"\u2605":"\u2606"),g.addEventListener("click",y=>{y.stopPropagation(),this.callbacks.onArticleUpdate(t,{starred:!t.starred},!1),g.classList.toggle("starred",!g.classList.contains("starred")),g.classList.toggle("unstarred",!g.classList.contains("unstarred"));let w=g.querySelector(".rss-dashboard-star-icon");w&&((0,B.setIcon)(w,t.starred?"star":"star-off"),w.querySelector("svg")||(w.textContent=t.starred?"\u2605":"\u2606"))});let p=d.createDiv({cls:"rss-dashboard-tags-dropdown"}).createDiv({cls:"rss-dashboard-tags-toggle"});(0,B.setIcon)(p,"tag"),p.addEventListener("click",y=>{y.stopPropagation(),this.createPortalDropdown(p,t,(w,E)=>{var S;t.tags||(t.tags=[]),E?t.tags.some(b=>b.name===w.name)||t.tags.push({...w}):t.tags=t.tags.filter(b=>b.name!==w.name);let T=this.articles.findIndex(b=>b.guid===t.guid);T!==-1&&(this.articles[T]={...t}),this.callbacks.onArticleUpdate&&this.callbacks.onArticleUpdate(t,{tags:[...t.tags]},!1);let x=this.container.querySelector(`[id="article-${t.guid}"]`);if(x||(x=(S=this.container.closest(".rss-dashboard-container"))==null?void 0:S.querySelector(`[id="article-${t.guid}"]`)),x||(x=document.getElementById(`article-${t.guid}`)),x){x.classList.add("rss-dashboard-tag-change-feedback"),window.setTimeout(()=>{x.classList.remove("rss-dashboard-tag-change-feedback")},200);let b=x.querySelector(".rss-dashboard-article-tags");if(b)for(;b.firstChild;)b.removeChild(b.firstChild);else{let C=x.querySelector(".rss-dashboard-card-content")||x,A=C.querySelector(".rss-dashboard-action-toolbar");A&&(b=C.createDiv({cls:"rss-dashboard-article-tags"}),C.insertBefore(b,A))}if(b&&t.tags&&t.tags.length>0)t.tags.slice(0,re).forEach(A=>{b&&b.createDiv({cls:"rss-dashboard-article-tag",text:A.name}).style.setProperty("--tag-color",A.color||"var(--interactive-accent)")}),t.tags.length>re&&b&&b.createDiv({cls:"rss-dashboard-tag-overflow",text:`+${t.tags.length-re}`,attr:{title:t.tags.slice(re).map(A=>A.name).join(", ")}});else if(b)for(;b.firstChild;)b.removeChild(b.firstChild);x.offsetHeight}else{let b=document.body.createDiv({cls:"rss-dashboard-tag-change-notification",text:`Tag "${w.name}" ${E?"added":"removed"}`});window.setTimeout(()=>{b.parentNode&&b.parentNode.removeChild(b)},1500)}})});let h=d.createDiv({cls:"rss-dashboard-article-date"}),v=We(t.pubDate);h.textContent=v.text,h.setAttribute("title",v.title),s.addEventListener("click",()=>{this.callbacks.onArticleClick(t)}),s.addEventListener("contextmenu",y=>{y.preventDefault(),this.showArticleContextMenu(y,t)})}}renderPagination(i,e,t,s,a){let r=i.createDiv({cls:"rss-dashboard-pagination"}),n=r.createEl("button",{cls:"rss-dashboard-pagination-btn prev",text:"<"});n.disabled=e===1,n.onclick=()=>this.callbacks.onPageChange(e-1);let l=7,d=Math.max(1,e-3),c=Math.min(t,e+3);c-d<l-1&&(d===1?c=Math.min(t,d+l-1):c===t&&(d=Math.max(1,c-l+1))),d>1&&(this.createPageButton(r,1,e),d>2&&r.createEl("span",{text:"...",cls:"rss-dashboard-pagination-ellipsis"}));for(let h=d;h<=c;h++)this.createPageButton(r,h,e);c<t&&(c<t-1&&r.createEl("span",{text:"...",cls:"rss-dashboard-pagination-ellipsis"}),this.createPageButton(r,t,e));let u=r.createEl("button",{cls:"rss-dashboard-pagination-btn next",text:">"});u.disabled=e===t,u.onclick=()=>this.callbacks.onPageChange(e+1);let g=r.createEl("select",{cls:"rss-dashboard-page-size-dropdown"}),m=[10,20,40,50,60,80,100];for(let h of m){let v=g.createEl("option",{text:String(h),value:String(h)});h===s&&(v.selected=!0)}g.onchange=h=>{let v=Number(h.target.value);this.callbacks.onPageSizeChange(v)};let f=(e-1)*s+1,p=Math.min(e*s,a);r.createEl("span",{cls:"rss-dashboard-pagination-results",text:`Results: ${f} - ${p} of ${a}`})}createPageButton(i,e,t){let s=i.createEl("button",{cls:"rss-dashboard-pagination-btn"+(e===t?" active":""),text:String(e)});s.disabled=e===t,s.onclick=()=>this.callbacks.onPageChange(e)}showArticleContextMenu(i,e){let t=new B.Menu;e.saved&&(t.addItem(s=>{s.setTitle("Open saved article").setIcon("file-text").onClick(()=>{this.callbacks.onOpenSavedArticle&&this.callbacks.onOpenSavedArticle(e)})}),t.addItem(s=>{s.setTitle("Open in reader view").setIcon("book-open").onClick(()=>{this.callbacks.onOpenInReaderView&&this.callbacks.onOpenInReaderView(e)})}),t.addSeparator()),t.addItem(s=>{s.setTitle("Open in browser").setIcon("globe-2").onClick(()=>{window.open(e.link,"_blank")})}),t.addItem(s=>{s.setTitle("Open in split view").setIcon("panel-left").onClick(()=>{this.callbacks.onArticleClick(e)})}),t.addSeparator(),t.addItem(s=>{s.setTitle(e.read?"Mark as unread":"Mark as read").setIcon(e.read?"circle":"check-circle").onClick(()=>{this.callbacks.onArticleUpdate(e,{read:!e.read},!1)})}),t.addItem(s=>{s.setTitle(e.starred?"Unstar articles":"Star articles").setIcon("star").onClick(()=>{this.callbacks.onArticleUpdate(e,{starred:!e.starred},!1)})}),e.saved||(t.addSeparator(),t.addItem(s=>{s.setTitle(this.settings.articleSaving.saveFullContent?"Save full article":"Save article summary").setIcon("save").onClick(()=>{this.callbacks.onArticleSave(e)})})),t.showAtMouseEvent(i)}createPortalDropdown(i,e,t){var f;let s=i.ownerDocument,a=s.body;s.querySelectorAll(".rss-dashboard-tags-dropdown-content-portal").forEach(p=>{var h;(h=p.parentNode)==null||h.removeChild(p)});let r=a.createDiv({cls:"rss-dashboard-tags-dropdown-content rss-dashboard-tags-dropdown-content-portal"});for(let p of this.settings.availableTags){let h=r.createDiv({cls:"rss-dashboard-tag-item"}),v=((f=e.tags)==null?void 0:f.some(E=>E.name===p.name))||!1,y=h.createEl("input",{attr:{type:"checkbox"},cls:"rss-dashboard-tag-checkbox"});y.checked=v;let w=h.createDiv({cls:"rss-dashboard-tag-label",text:p.name});w.style.setProperty("--tag-color",p.color),y.addEventListener("change",E=>{E.stopPropagation();let T=E.target.checked;y.checked=T,h.classList.add("rss-dashboard-tag-item-processing"),t(p,T),window.setTimeout(()=>{h.classList.remove("rss-dashboard-tag-item-processing")},200)}),h.appendChild(y),h.appendChild(w),r.appendChild(h)}a.appendChild(r),r.addClass("rss-dashboard-tags-dropdown-content-portal");let n=i.getBoundingClientRect(),l=r.getBoundingClientRect(),c=(this.container.closest(".workspace-leaf-content")||a).getBoundingClientRect(),u=n.right,g=n.top;u+l.width>c.right&&(u=n.left-l.width),u<c.left&&(u=c.left);let m=s.defaultView||window;g+l.height>m.innerHeight&&(g=m.innerHeight-l.height-5),r.style.left=`${u}px`,r.style.top=`${g}px`,m.setTimeout(()=>{let p=h=>{r&&!r.contains(h.target)&&(r.remove(),s.removeEventListener("mousedown",p))};s.addEventListener("mousedown",p)},0)}updateRefreshButtonText(i){this.refreshButton&&this.refreshButton.setAttribute("title",i)}};function Tt(o){let i=ae(o),s=new DOMParser().parseFromString(i,"text/html").querySelector("img");return s?s.getAttribute("src"):null}var ne=require("obsidian");function jt(o){for(var i=1;i<arguments.length;i++){var e=arguments[i];for(var t in e)e.hasOwnProperty(t)&&(o[t]=e[t])}return o}function nt(o,i){return Array(i+1).join(o)}function Xt(o){return o.replace(/^\n*/,"")}function Jt(o){for(var i=o.length;i>0&&o[i-1]===`
`;)i--;return o.substring(0,i)}var Kt=["ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","BODY","CANVAS","CENTER","DD","DIR","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","FRAMESET","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","HTML","ISINDEX","LI","MAIN","MENU","NAV","NOFRAMES","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TBODY","TD","TFOOT","TH","THEAD","TR","UL"];function ot(o){return lt(o,Kt)}var At=["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"];function Ft(o){return lt(o,At)}function Qt(o){return Dt(o,At)}var Ct=["A","TABLE","THEAD","TBODY","TFOOT","TH","TD","IFRAME","SCRIPT","AUDIO","VIDEO"];function es(o){return lt(o,Ct)}function ts(o){return Dt(o,Ct)}function lt(o,i){return i.indexOf(o.nodeName)>=0}function Dt(o,i){return o.getElementsByTagName&&i.some(function(e){return o.getElementsByTagName(e).length})}var j={};j.paragraph={filter:"p",replacement:function(o){return`

`+o+`

`}};j.lineBreak={filter:"br",replacement:function(o,i,e){return e.br+`
`}};j.heading={filter:["h1","h2","h3","h4","h5","h6"],replacement:function(o,i,e){var t=Number(i.nodeName.charAt(1));if(e.headingStyle==="setext"&&t<3){var s=nt(t===1?"=":"-",o.length);return`

`+o+`
`+s+`

`}else return`

`+nt("#",t)+" "+o+`

`}};j.blockquote={filter:"blockquote",replacement:function(o){return o=o.replace(/^\n+|\n+$/g,""),o=o.replace(/^/gm,"> "),`

`+o+`

`}};j.list={filter:["ul","ol"],replacement:function(o,i){var e=i.parentNode;return e.nodeName==="LI"&&e.lastElementChild===i?`
`+o:`

`+o+`

`}};j.listItem={filter:"li",replacement:function(o,i,e){o=o.replace(/^\n+/,"").replace(/\n+$/,`
`).replace(/\n/gm,`
    `);var t=e.bulletListMarker+"   ",s=i.parentNode;if(s.nodeName==="OL"){var a=s.getAttribute("start"),r=Array.prototype.indexOf.call(s.children,i);t=(a?Number(a)+r:r+1)+".  "}return t+o+(i.nextSibling&&!/\n$/.test(o)?`
`:"")}};j.indentedCodeBlock={filter:function(o,i){return i.codeBlockStyle==="indented"&&o.nodeName==="PRE"&&o.firstChild&&o.firstChild.nodeName==="CODE"},replacement:function(o,i,e){return`

    `+i.firstChild.textContent.replace(/\n/g,`
    `)+`

`}};j.fencedCodeBlock={filter:function(o,i){return i.codeBlockStyle==="fenced"&&o.nodeName==="PRE"&&o.firstChild&&o.firstChild.nodeName==="CODE"},replacement:function(o,i,e){for(var t=i.firstChild.getAttribute("class")||"",s=(t.match(/language-(\S+)/)||[null,""])[1],a=i.firstChild.textContent,r=e.fence.charAt(0),n=3,l=new RegExp("^"+r+"{3,}","gm"),d;d=l.exec(a);)d[0].length>=n&&(n=d[0].length+1);var c=nt(r,n);return`

`+c+s+`
`+a.replace(/\n$/,"")+`
`+c+`

`}};j.horizontalRule={filter:"hr",replacement:function(o,i,e){return`

`+e.hr+`

`}};j.inlineLink={filter:function(o,i){return i.linkStyle==="inlined"&&o.nodeName==="A"&&o.getAttribute("href")},replacement:function(o,i){var e=i.getAttribute("href");e&&(e=e.replace(/([()])/g,"\\$1"));var t=qe(i.getAttribute("title"));return t&&(t=' "'+t.replace(/"/g,'\\"')+'"'),"["+o+"]("+e+t+")"}};j.referenceLink={filter:function(o,i){return i.linkStyle==="referenced"&&o.nodeName==="A"&&o.getAttribute("href")},replacement:function(o,i,e){var t=i.getAttribute("href"),s=qe(i.getAttribute("title"));s&&(s=' "'+s+'"');var a,r;switch(e.linkReferenceStyle){case"collapsed":a="["+o+"][]",r="["+o+"]: "+t+s;break;case"shortcut":a="["+o+"]",r="["+o+"]: "+t+s;break;default:var n=this.references.length+1;a="["+o+"]["+n+"]",r="["+n+"]: "+t+s}return this.references.push(r),a},references:[],append:function(o){var i="";return this.references.length&&(i=`

`+this.references.join(`
`)+`

`,this.references=[]),i}};j.emphasis={filter:["em","i"],replacement:function(o,i,e){return o.trim()?e.emDelimiter+o+e.emDelimiter:""}};j.strong={filter:["strong","b"],replacement:function(o,i,e){return o.trim()?e.strongDelimiter+o+e.strongDelimiter:""}};j.code={filter:function(o){var i=o.previousSibling||o.nextSibling,e=o.parentNode.nodeName==="PRE"&&!i;return o.nodeName==="CODE"&&!e},replacement:function(o){if(!o)return"";o=o.replace(/\r?\n|\r/g," ");for(var i=/^`|^ .*?[^ ].* $|`$/.test(o)?" ":"",e="`",t=o.match(/`+/gm)||[];t.indexOf(e)!==-1;)e=e+"`";return e+i+o+i+e}};j.image={filter:"img",replacement:function(o,i){var e=qe(i.getAttribute("alt")),t=i.getAttribute("src")||"",s=qe(i.getAttribute("title")),a=s?' "'+s+'"':"";return t?"!["+e+"]("+t+a+")":""}};function qe(o){return o?o.replace(/(\n+\s*)+/g,`
`):""}function xt(o){this.options=o,this._keep=[],this._remove=[],this.blankRule={replacement:o.blankReplacement},this.keepReplacement=o.keepReplacement,this.defaultRule={replacement:o.defaultReplacement},this.array=[];for(var i in o.rules)this.array.push(o.rules[i])}xt.prototype={add:function(o,i){this.array.unshift(i)},keep:function(o){this._keep.unshift({filter:o,replacement:this.keepReplacement})},remove:function(o){this._remove.unshift({filter:o,replacement:function(){return""}})},forNode:function(o){if(o.isBlank)return this.blankRule;var i;return(i=it(this.array,o,this.options))||(i=it(this._keep,o,this.options))||(i=it(this._remove,o,this.options))?i:this.defaultRule},forEach:function(o){for(var i=0;i<this.array.length;i++)o(this.array[i],i)}};function it(o,i,e){for(var t=0;t<o.length;t++){var s=o[t];if(ss(s,i,e))return s}}function ss(o,i,e){var t=o.filter;if(typeof t=="string"){if(t===i.nodeName.toLowerCase())return!0}else if(Array.isArray(t)){if(t.indexOf(i.nodeName.toLowerCase())>-1)return!0}else if(typeof t=="function"){if(t.call(o,i,e))return!0}else throw new TypeError("`filter` needs to be a string, array, or function")}function is(o){var i=o.element,e=o.isBlock,t=o.isVoid,s=o.isPre||function(u){return u.nodeName==="PRE"};if(!(!i.firstChild||s(i))){for(var a=null,r=!1,n=null,l=Et(n,i,s);l!==i;){if(l.nodeType===3||l.nodeType===4){var d=l.data.replace(/[ \r\n\t]+/g," ");if((!a||/ $/.test(a.data))&&!r&&d[0]===" "&&(d=d.substr(1)),!d){l=at(l);continue}l.data=d,a=l}else if(l.nodeType===1)e(l)||l.nodeName==="BR"?(a&&(a.data=a.data.replace(/ $/,"")),a=null,r=!1):t(l)||s(l)?(a=null,r=!0):a&&(r=!1);else{l=at(l);continue}var c=Et(n,l,s);n=l,l=c}a&&(a.data=a.data.replace(/ $/,""),a.data||at(a))}}function at(o){var i=o.nextSibling||o.parentNode;return o.parentNode.removeChild(o),i}function Et(o,i,e){return o&&o.parentNode===i||e(i)?i.nextSibling||i.parentNode:i.firstChild||i.nextSibling||i.parentNode}var ct=typeof window!="undefined"?window:{};function as(){var o=ct.DOMParser,i=!1;try{new o().parseFromString("","text/html")&&(i=!0)}catch(e){}return i}function rs(){var o=function(){};return ns()?o.prototype.parseFromString=function(i){var e=new window.ActiveXObject("htmlfile");return e.designMode="on",e.open(),e.write(i),e.close(),e}:o.prototype.parseFromString=function(i){var e=document.implementation.createHTMLDocument("");return e.open(),e.write(i),e.close(),e},o}function ns(){var o=!1;try{document.implementation.createHTMLDocument("").open()}catch(i){ct.ActiveXObject&&(o=!0)}return o}var os=as()?ct.DOMParser:rs();function ls(o,i){var e;if(typeof o=="string"){var t=cs().parseFromString('<x-turndown id="turndown-root">'+o+"</x-turndown>","text/html");e=t.getElementById("turndown-root")}else e=o.cloneNode(!0);return is({element:e,isBlock:ot,isVoid:Ft,isPre:i.preformattedCode?ds:null}),e}var rt;function cs(){return rt=rt||new os,rt}function ds(o){return o.nodeName==="PRE"||o.nodeName==="CODE"}function us(o,i){return o.isBlock=ot(o),o.isCode=o.nodeName==="CODE"||o.parentNode.isCode,o.isBlank=hs(o),o.flankingWhitespace=gs(o,i),o}function hs(o){return!Ft(o)&&!es(o)&&/^\s*$/i.test(o.textContent)&&!Qt(o)&&!ts(o)}function gs(o,i){if(o.isBlock||i.preformattedCode&&o.isCode)return{leading:"",trailing:""};var e=ms(o.textContent);return e.leadingAscii&&St("left",o,i)&&(e.leading=e.leadingNonAscii),e.trailingAscii&&St("right",o,i)&&(e.trailing=e.trailingNonAscii),{leading:e.leading,trailing:e.trailing}}function ms(o){var i=o.match(/^(([ \t\r\n]*)(\s*))(?:(?=\S)[\s\S]*\S)?((\s*?)([ \t\r\n]*))$/);return{leading:i[1],leadingAscii:i[2],leadingNonAscii:i[3],trailing:i[4],trailingNonAscii:i[5],trailingAscii:i[6]}}function St(o,i,e){var t,s,a;return o==="left"?(t=i.previousSibling,s=/ $/):(t=i.nextSibling,s=/^ /),t&&(t.nodeType===3?a=s.test(t.nodeValue):e.preformattedCode&&t.nodeName==="CODE"?a=!1:t.nodeType===1&&!ot(t)&&(a=s.test(t.textContent))),a}var ps=Array.prototype.reduce,fs=[[/\\/g,"\\\\"],[/\*/g,"\\*"],[/^-/g,"\\-"],[/^\+ /g,"\\+ "],[/^(=+)/g,"\\$1"],[/^(#{1,6}) /g,"\\$1 "],[/`/g,"\\`"],[/^~~~/g,"\\~~~"],[/\[/g,"\\["],[/\]/g,"\\]"],[/^>/g,"\\>"],[/_/g,"\\_"],[/^(\d+)\. /g,"$1\\. "]];function Ze(o){if(!(this instanceof Ze))return new Ze(o);var i={rules:j,headingStyle:"setext",hr:"* * *",bulletListMarker:"*",codeBlockStyle:"indented",fence:"```",emDelimiter:"_",strongDelimiter:"**",linkStyle:"inlined",linkReferenceStyle:"full",br:"  ",preformattedCode:!1,blankReplacement:function(e,t){return t.isBlock?`

`:""},keepReplacement:function(e,t){return t.isBlock?`

`+t.outerHTML+`

`:t.outerHTML},defaultReplacement:function(e,t){return t.isBlock?`

`+e+`

`:e}};this.options=jt({},i,o),this.rules=new xt(this.options)}Ze.prototype={turndown:function(o){if(!ws(o))throw new TypeError(o+" is not a string, or an element/document/fragment node.");if(o==="")return"";var i=It.call(this,new ls(o,this.options));return vs.call(this,i)},use:function(o){if(Array.isArray(o))for(var i=0;i<o.length;i++)this.use(o[i]);else if(typeof o=="function")o(this);else throw new TypeError("plugin must be a Function or an Array of Functions");return this},addRule:function(o,i){return this.rules.add(o,i),this},keep:function(o){return this.rules.keep(o),this},remove:function(o){return this.rules.remove(o),this},escape:function(o){return fs.reduce(function(i,e){return i.replace(e[0],e[1])},o)}};function It(o){var i=this;return ps.call(o.childNodes,function(e,t){t=new us(t,i.options);var s="";return t.nodeType===3?s=t.isCode?t.nodeValue:i.escape(t.nodeValue):t.nodeType===1&&(s=ys.call(i,t)),kt(e,s)},"")}function vs(o){var i=this;return this.rules.forEach(function(e){typeof e.append=="function"&&(o=kt(o,e.append(i.options)))}),o.replace(/^[\t\r\n]+/,"").replace(/[\t\r\n\s]+$/,"")}function ys(o){var i=this.rules.forNode(o),e=It.call(this,o),t=o.flankingWhitespace;return(t.leading||t.trailing)&&(e=e.trim()),t.leading+i.replacement(e,o,this.options)+t.trailing}function kt(o,i){var e=Jt(o),t=Xt(i),s=Math.max(o.length-e.length,i.length-t.length),a=`

`.substring(0,s);return e+a+t}function ws(o){return o!=null&&(typeof o=="string"||o.nodeType&&(o.nodeType===1||o.nodeType===9||o.nodeType===11))}var Ge=Ze;var gt=vt(ht());var Ae=class{constructor(i,e){this.app=i,this.settings=e,this.turndownService=new Ge,this.turndownService.addRule("math",{filter:function(t){return t.nodeName==="SPAN"&&t.classList.contains("math")},replacement:function(t,s){return s.textContent||""}})}cleanHtml(i){try{let e=ae(i),s=new DOMParser().parseFromString(e,"text/html");return s.querySelectorAll("script, style, iframe, .ad, .ads, .advertisement, div[class*='ad-'], div[id*='ad-'], div[class*='ads-'], div[id*='ads-']").forEach(c=>c.remove()),s.querySelectorAll("svg").forEach(c=>c.remove()),s.querySelectorAll("img").forEach(c=>{let u=c.getAttribute("src");if(u&&!u.startsWith("http")&&!u.startsWith("data:")&&u.startsWith("/")){let g=new URL(location.href);c.setAttribute("src",`${g.origin}${u}`)}c.hasAttribute("alt")||c.setAttribute("alt","Image")}),s.querySelectorAll("a").forEach(c=>{c.setAttribute("target","_blank"),c.setAttribute("rel","noopener noreferrer")}),s.querySelectorAll("table").forEach(c=>{c.classList.add("markdown-compatible-table")}),new XMLSerializer().serializeToString(s.body)}catch(e){return i}}generateFrontmatter(i){let e=this.settings.frontmatterTemplate;e||(e=`---
title: "{{title}}"
date: {{date}}
tags: [{{tags}}]
source: "{{source}}"
link: {{link}}
author: "{{author}}"
feedTitle: "{{feedTitle}}"
guid: "{{guid}}"
---`);let t="";return i.tags&&i.tags.length>0&&(t=i.tags.map(s=>s.name).join(", ")),this.settings.addSavedTag&&!t.toLowerCase().includes("saved")&&(t=t?`${t}, saved`:"saved"),e=e.replace(/{{title}}/g,i.title.replace(/"/g,'\\"')).replace(/{{date}}/g,new Date().toISOString()).replace(/{{tags}}/g,t).replace(/{{source}}/g,i.feedTitle.replace(/"/g,'\\"')).replace(/{{link}}/g,i.link).replace(/{{author}}/g,(i.author||"").replace(/"/g,'\\"')).replace(/{{feedTitle}}/g,i.feedTitle.replace(/"/g,'\\"')).replace(/{{guid}}/g,i.guid.replace(/"/g,'\\"')),i.mediaType==="video"&&i.videoId?e=e.replace(`---
`,`---
mediaType: video
videoId: "${i.videoId}"
`):i.mediaType==="podcast"&&i.audioUrl&&(e=e.replace(`---
`,`---
mediaType: podcast
audioUrl: "${i.audioUrl}"
`)),e+`
`}sanitizeFilename(i){return i.replace(/[/\\:*?"<>|]/g,"").replace(/\s+/g," ").trim().split(" ").slice(0,5).join(" ").substring(0,50)}applyTemplate(i,e,t){let s=t||this.cleanHtml(i.description),a=new Date(i.pubDate).toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"}),r="";return i.tags&&i.tags.length>0&&(r=i.tags.map(n=>n.name).join(", ")),this.settings.addSavedTag&&!r.toLowerCase().includes("saved")&&(r=r?`${r}, saved`:"saved"),e.replace(/{{title}}/g,i.title).replace(/{{date}}/g,a).replace(/{{isoDate}}/g,new Date(i.pubDate).toISOString()).replace(/{{link}}/g,i.link).replace(/{{author}}/g,i.author||"").replace(/{{source}}/g,i.feedTitle).replace(/{{feedTitle}}/g,i.feedTitle).replace(/{{summary}}/g,i.summary||"").replace(/{{content}}/g,s).replace(/{{tags}}/g,r).replace(/{{guid}}/g,i.guid)}normalizePath(i){return!i||i.trim()===""?"":i.replace(/^\/+|\/+$/g,"")}async ensureFolderExists(i){if(!i||i.trim()==="")return;let e=this.normalizePath(i);if(e)try{this.app.vault.getAbstractFileByPath(e)===null&&await this.app.vault.createFolder(e)}catch(t){throw new Error(`Failed to create folder: ${e}`)}}async fetchFullArticleContent(i){var e,t;try{let s={"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","Accept-Language":"en-US,en;q=0.9","Accept-Encoding":"gzip, deflate, br",DNT:"1",Connection:"keep-alive","Upgrade-Insecure-Requests":"1"},a=await(0,ne.requestUrl)({url:i,headers:s});if(!a.text)if(i.includes("journals.sagepub.com")&&i.includes("/doi/full/")){let c=i.replace("/doi/full/","/doi/abs/");try{if(a=await(0,ne.requestUrl)({url:c,headers:s}),!a.text)return""}catch(u){return""}}else return"";let r=new DOMParser,n=r.parseFromString(a.text,"text/html"),l=["access denied","forbidden","not found","page not found","404","403","401"],d=((e=n.body.textContent)==null?void 0:e.toLowerCase())||"";if(l.some(c=>d.includes(c))){if(i.includes("journals.sagepub.com")&&i.includes("/doi/full/")){let c=i.replace("/doi/full/","/doi/abs/");try{let u=await(0,ne.requestUrl)({url:c,headers:s});if(u.text){let g=r.parseFromString(u.text,"text/html"),m=((t=g.body.textContent)==null?void 0:t.toLowerCase())||"";if(!l.some(f=>m.includes(f)))return this.extractContentFromDocument(g,c)}}catch(u){}}return""}return this.extractContentFromDocument(n,i)}catch(s){return""}}extractContentFromDocument(i,e){if(typeof gt.Readability!="undefined"){let t=new gt.Readability(i).parse(),s=(t==null?void 0:t.content)||"";return this.convertRelativeUrlsInContent(ae(s),e)}else{let t=i.querySelector("main, article, .content, .post-content, .entry-content, .article-content, .full-text");if(t)return this.convertRelativeUrlsInContent(ae(new XMLSerializer().serializeToString(t)),e);{let s=[".article-body",".article-text",".fulltext",".full-text",".content-body",".main-content",'section[role="main"]',".article"];for(let a of s){let r=i.querySelector(a);if(r)return this.convertRelativeUrlsInContent(ae(new XMLSerializer().serializeToString(r)),e)}return this.convertRelativeUrlsInContent(ae(new XMLSerializer().serializeToString(i.body)),e)}}}convertRelativeUrlsInContent(i,e){if(!i||!e)return i;try{let t=(()=>{try{return new URL(e).host}catch(s){return""}})();return i=i.replace(/app:\/\//g,"https://"),i=i.replace(/<img([^>]+)src=["']([^"']+)["']/gi,(s,a,r)=>{try{let n=new URL(r,e);return n.host!==t?(n.host=t,n.protocol="https:",`<img${a}src="${n.toString()}"`):`<img${a}src="${n.toString()}"`}catch(n){return`<img${a}src="${r}"`}}),i=i.replace(/<source([^>]+)srcset=["']([^"']+)["']/gi,(s,a,r)=>{let n=r.split(",").map(l=>{let d=l.trim(),c=d.match(/^([^\s]+)(\s+\d+w)?$/);if(c){let u=c[1],g=c[2]||"";return this.convertToAbsoluteUrl(u,e)+g}return d}).join(", ");return`<source${a}srcset="${n}"`}),i=i.replace(/<a([^>]+)href=["']([^"']+)["']/gi,(s,a,r)=>{let n=this.convertToAbsoluteUrl(r,e);return`<a${a}href="${n}"`}),i}catch(t){return i}}convertToAbsoluteUrl(i,e){if(!i||!e)return i;if(i.startsWith("app://"))return i.replace("app://","https://");if(i.startsWith("//"))return"https:"+i;if(i.startsWith("http://")||i.startsWith("https://"))return i;try{let t=new URL(e);return i.startsWith("/")?`${t.protocol}//${t.host}${i}`:new URL(i,t).href}catch(t){return i}}async saveArticleWithFullContent(i,e,t){try{let s=new ne.Notice("Fetching full article content...",0),a=await this.fetchFullArticleContent(i.link);if(!a)return s.hide(),new ne.Notice("Could not fetch full content. Saving with available content."),await this.saveArticle(i,e,t);let r=this.turndownService.turndown(a);return s.hide(),await this.saveArticle(i,e,t,r)}catch(s){let a=s instanceof Error?s.message:String(s);return new ne.Notice(`Error saving article with full content: ${a}`),await this.saveArticle(i,e,t)}}async saveArticle(i,e,t,s){try{let a=e||this.settings.defaultFolder||"";a=this.normalizePath(a),a&&a.trim()!==""&&await this.ensureFolderExists(a);let r=this.sanitizeFilename(i.title),n=a&&a.trim()!==""?`${a}/${r}.md`:`${r}.md`,l=this.app.vault.getAbstractFileByPath(n);l!==null&&await this.app.fileManager.trashFile(l);let d="",c=t||this.settings.defaultTemplate||`# {{title}}

{{content}}

[Source]({{link}})`,u=c.trim().startsWith("---");this.settings.includeFrontmatter&&!u&&(d+=this.generateFrontmatter(i)),d+=this.applyTemplate(i,c,s);let g=await this.app.vault.create(n,d);if(i.saved=!0,i.savedFilePath=n,this.settings.addSavedTag&&(!i.tags||!i.tags.some(m=>m.name.toLowerCase()==="saved"))){let m={name:"saved",color:"#3498db"};i.tags?i.tags.push(m):i.tags=[m]}return new ne.Notice(`Article saved: ${r}`),g}catch(a){let r=a instanceof Error?a.message:String(a);return new ne.Notice(`Error saving article: ${r}`),null}}async fixSavedFilePaths(i){for(let e of i)if(e.saved&&e.savedFilePath){let t=e.savedFilePath,s=this.normalizePath(t);if(t!==s)if(this.app.vault.getAbstractFileByPath(s)!==null)e.savedFilePath=s;else{let a=this.app.vault.getAbstractFileByPath(t);if(a instanceof ne.TFile)try{let r=this.normalizePath(this.settings.defaultFolder||""),l=`${this.sanitizeFilename(e.title)}.md`,d=r&&r.trim()!==""?`${r}/${l}`:l;await this.app.fileManager.renameFile(a,d),e.savedFilePath=d}catch(r){e.saved=!1,e.savedFilePath=void 0,e.tags&&(e.tags=e.tags.filter(n=>n.name.toLowerCase()!=="saved"))}else e.saved=!1,e.savedFilePath=void 0,e.tags&&(e.tags=e.tags.filter(r=>r.name.toLowerCase()!=="saved"))}}}verifySavedArticle(i){if(!i.saved||!i.savedFilePath)return!1;try{return this.app.vault.getAbstractFileByPath(i.savedFilePath)===null?(i.saved=!1,i.savedFilePath=void 0,i.tags&&(i.tags=i.tags.filter(t=>t.name.toLowerCase()!=="saved")),!1):!0}catch(e){return!1}}verifyAllSavedArticles(i){i.filter(e=>e.saved).forEach(e=>this.verifySavedArticle(e))}};var Te=require("obsidian"),Xe=require("obsidian");var Ee=require("obsidian"),ee=class{static isYouTubeFeed(i){return i?this.YOUTUBE_PATTERNS.some(e=>i.includes(e)):!1}static async getYouTubeRssFeed(i){if(!i)return null;let e="",t="";try{if(/^UC[\w-]{22}$/.test(i))return`https://www.youtube.com/feeds/videos.xml?channel_id=${i}`;if(i.includes("youtube.com/channel/")){let s=i.match(/youtube\.com\/channel\/(UC[\w-]{22})/);s!=null&&s[1]&&(e=s[1])}else if(i.includes("@")){let s="";if(i.includes("youtube.com/@")?s=i.split("youtube.com/@")[1].split(/[?#/]/)[0]:i.startsWith("@")&&(s=i.substring(1)),s)try{let a=await(0,Ee.requestUrl)({url:`https://www.youtube.com/@${s}`,method:"GET",headers:{"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36"}});if(!a.text)throw new Error("Empty response from YouTube");let r=a.text.match(/channelId"?\s*:\s*"(UC[\w-]{22})"/);r!=null&&r[1]&&(e=r[1])}catch(a){new Ee.Notice(`Error fetching YouTube channel: ${a instanceof Error?a.message:"Unknown error"}`)}}else if(i.includes("youtube.com/user/")){let s=i.match(/youtube\.com\/user\/([^/?#]+)/);s!=null&&s[1]&&(t=s[1])}else if(i.includes("youtube.com/c/")){let s=i.match(/youtube\.com\/c\/([^/?#]+)/);if(s!=null&&s[1])try{let a=await(0,Ee.requestUrl)({url:`https://www.youtube.com/c/${s[1]}`,method:"GET",headers:{"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36"}});if(!a.text)throw new Error("Empty response from YouTube");let r=a.text.match(/channelId"?\s*:\s*"(UC[\w-]{22})"/);r!=null&&r[1]&&(e=r[1])}catch(a){new Ee.Notice(`Error fetching YouTube channel: ${a instanceof Error?a.message:"Unknown error"}`)}}else!/\s/.test(i)&&!i.includes("/")&&(/^UC[\w-]{22}$/.test(i)||(t=i));if(e)return`https://www.youtube.com/feeds/videos.xml?channel_id=${e}`;if(t)return`https://www.youtube.com/feeds/videos.xml?user=${t}`}catch(s){new Ee.Notice(`Error processing YouTube feed: ${s instanceof Error?s.message:"Unknown error"}`)}return null}static isPodcastFeed(i){var e,t,s,a;if(!((e=i==null?void 0:i.items)!=null&&e.length))return!1;try{let r=/\.(mp3|m4a|aac|ogg|opus|wav|flac)(?:\?|$)/i,n=i.items.slice(0,Math.min(10,i.items.length)),l=0;for(let d of n){let c=!!((s=(t=d.enclosure)==null?void 0:t.type)!=null&&s.startsWith("audio/")),u=!!((a=d.enclosure)!=null&&a.url&&r.test(d.enclosure.url)),g=!!(d.description&&this.extractPodcastAudio(d.description)),m=!!(d.link&&r.test(d.link));(c||u||g||m)&&l++}return l>0}catch(r){return!1}}static extractYouTubeVideoId(i){var e;if(i)try{let t=[/(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/|youtube\.com\/v\/|youtube\.com\/e\/|youtube\.com\/user\/[^/]+\/u\/\d+\/videos\/|youtube\.com\/user\/[^/]+\/|youtube\.com\/.*[?&]v=|youtube\.com\/.*[?&]v%3D|youtube\.com\/.+\/|youtube\.com\/(?:user|c)\/[^/]+\/#p\/a\/u\/\d+\/|youtube\.com\/playlist\?list=|youtube\.com\/user\/[^/]+\/videos\/|youtube\.com\/user\/[^/]+\/)([^"&?/\s]{11})/i,/(?:youtube\.com\/embed\/|youtube\.com\/v\/|youtu\.be\/)([^"&?/\s]{11})/i];for(let s of t){let a=i.match(s);if(((e=a==null?void 0:a[1])==null?void 0:e.length)===11)return a[1]}}catch(t){}}static extractPodcastAudio(i){if(i)try{let e=i.match(/<enclosure[^>]*url=["']([^"']*\.(?:mp3|m4a|wav|ogg|opus|aac|flac))["']/i);if(e!=null&&e[1])return e[1];let t=i.match(/<audio[^>]*src=["']([^"']*\.(?:mp3|m4a|wav|ogg|opus|aac|flac))["']/i);if(t!=null&&t[1])return t[1];let s=i.match(/href=["']([^"']*\.(?:mp3|m4a|wav|ogg|opus|aac|flac))["']/i);if(s!=null&&s[1])return s[1];let a=i.match(/<source[^>]*src=["']([^"']*\.(?:mp3|m4a|wav|ogg|opus|aac|flac))["']/i);if(a!=null&&a[1])return a[1]}catch(e){}}static extractPodcastDuration(i){if(i)try{let e=i.match(/duration[^0-9]*(\d+:\d+(?::\d+)?)/i)||i.match(/length[^0-9]*(\d+:\d+(?::\d+)?)/i)||i.match(/time[^0-9]*(\d+:\d+(?::\d+)?)/i)||i.match(/(\d+:\d+(?::\d+)?)\s*(?:min|minutes|mins)/i);if(e!=null&&e[1])return e[1]}catch(e){}}static processYouTubeFeed(i){i.mediaType="video";let e=i.items.map(t=>{let s=this.extractYouTubeVideoId(t.link),a=t.coverImage;return s&&(a=[`https://img.youtube.com/vi/${s}/maxresdefault.jpg`,`https://img.youtube.com/vi/${s}/hqdefault.jpg`,`https://img.youtube.com/vi/${s}/mqdefault.jpg`,`https://img.youtube.com/vi/${s}/sddefault.jpg`,`https://img.youtube.com/vi/${s}/default.jpg`][0]||t.coverImage),{...t,mediaType:"video",videoId:s,coverImage:a||t.coverImage}});return{...i,items:e}}static processPodcastFeed(i){i.mediaType="podcast";let e=i.items.map(t=>{var r,n;let s=((r=t.enclosure)==null?void 0:r.url)||this.extractPodcastAudio(t.description),a=t.duration||((n=t.itunes)==null?void 0:n.duration)||this.extractPodcastDuration(t.description);return{...t,mediaType:"podcast",audioUrl:s,duration:a,enclosure:t.enclosure}});return{...i,items:e}}static detectAndProcessFeed(i){return this.isYouTubeFeed(i.url)?this.processYouTubeFeed(i):i.items.some(t=>{var s,a;return(a=(s=t.enclosure)==null?void 0:s.type)==null?void 0:a.startsWith("video/")})?{...i,mediaType:"video",items:i.items.map(t=>{var s,a;return(a=(s=t.enclosure)==null?void 0:s.type)!=null&&a.startsWith("video/")?{...t,mediaType:"video",videoUrl:t.enclosure.url}:t})}:this.isPodcastFeed(i)?this.processPodcastFeed(i):{...i,mediaType:"article",items:i.items.map(t=>({...t,mediaType:"article"}))}}static getYouTubePlayerHtml(i,e=560,t=315){return`
            <div class="rss-dashboard-media-player youtube-player">
                <iframe 
                    width="${e}" 
                    height="${t}" 
                    src="https://www.youtube.com/embed/${i}" 
                    frameborder="0" 
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                    allowfullscreen>
                </iframe>
            </div>
        `}static getAudioPlayerHtml(i,e=""){return`
            <div class="rss-dashboard-media-player audio-player">
                <div class="audio-player-title">${e}</div>
                <audio controls preload="metadata">
                    <source src="${i}" type="audio/mpeg">
                    Your browser does not support the audio element.
                </audio>
            </div>
        `}static applyMediaTags(i,e){if(!i.mediaType||i.mediaType==="article")return i;let t;if(i.mediaType==="video"?t=this.isYouTubeFeed(i.url)?"youtube":"video":i.mediaType==="podcast"&&(t="podcast"),!t)return i;let s=e.find(r=>r.name.toLowerCase()===t);if(!s)return i;let a=i.items.map(r=>(r.tags||(r.tags=[]),r.tags.some(n=>n.name.toLowerCase()===t)||r.tags.push({...s}),r));return{...i,items:a}}};ee.YOUTUBE_PATTERNS=["youtube.com/feeds/videos.xml","youtube.com/channel/","youtube.com/user/","youtube.com/c/","youtube.com/@","youtube.com/watch","youtu.be/"];var we=require("obsidian"),Ye=class{constructor(i,e){this.app=i,this.settings=e}async openInWebViewer(i,e){let t=this.app.plugins.plugins["webpage-html-export"];if(t!=null&&t.openWebpage)try{return await t.openWebpage(i,e),window.setTimeout(()=>{this.addCustomSaveButton()},1e3),!0}catch(s){return new we.Notice(`Error opening URL in web viewer: ${s instanceof Error?s.message:"Unknown error"}`),!1}return!1}addCustomSaveButton(){let i=document.querySelector(".webpage-container");if(!i||i.querySelector(".rss-custom-save-button"))return;let e=i.querySelector(".webpage-control-bar");e||(e=i.createDiv({cls:"webpage-control-bar"}),i.prepend(e));let t=e.createEl("button",{cls:"rss-custom-save-button"}),s=t.createSpan({cls:"rss-custom-save-button-icon"});(0,we.setIcon)(s,"save"),t.createSpan({text:"Save with template"}),t.title="Save with custom template",t.addEventListener("click",()=>{this.showSaveDialog()}),e.appendChild(t)}showSaveDialog(){let i=this.app.plugins.plugins["webpage-html-export"];if(!i)return;let e=i.currentTitle||"Untitled",t=i.currentUrl||"",s=i.cleanedHtml||"",a=document.body.createDiv({cls:"rss-dashboard-modal"}),r=a.createDiv({cls:"rss-dashboard-modal-content"});new we.Setting(r).setName("Save with template").setHeading();let n=r.createEl("label",{text:"Save to folder:"}),l=r.createEl("input",{attr:{type:"text",placeholder:"Enter folder path",value:this.settings.defaultFolder||"RSS articles/",autocomplete:"off"}});l.spellcheck=!1,l.addEventListener("focus",()=>l.select());let d=r.createEl("label",{text:"Use template:"}),c=r.createEl("textarea",{attr:{placeholder:"Enter template",rows:"6",autocomplete:"off"}});c.spellcheck=!1,c.value=this.settings.defaultTemplate||`---
title: {{title}}
---

# {{title}}

#rss #{{feedTitle}}

{{content}}`,c.addEventListener("focus",()=>c.select());let u=r.createDiv({cls:"rss-dashboard-checkbox"}),g=u.createEl("input",{attr:{type:"checkbox",id:"include-frontmatter"}});g.checked=this.settings.includeFrontmatter!==!1,u.createEl("label",{attr:{htmlFor:"include-frontmatter"},text:"Include frontmatter"});let m=r.createDiv({cls:"rss-dashboard-modal-buttons"}),f=m.createEl("button",{text:"Cancel"});f.addEventListener("click",()=>{document.body.removeChild(a)});let p=m.createEl("button",{text:"Save",cls:"rss-dashboard-primary-button"});p.addEventListener("click",()=>{(async()=>{let h=l.value.trim(),v=c.value.trim(),y=g.checked;try{await this.saveArticle({title:e,link:t,description:s,pubDate:new Date().toUTCString(),guid:t,feedTitle:"Web viewer",feedUrl:"",coverImage:"",read:!0,starred:!1,tags:[],saved:!1},h,v,y),document.body.removeChild(a)}catch(w){let E=w instanceof Error?w.message:String(w);new we.Notice(`Error saving article: ${E}`)}})()}),l.addEventListener("keydown",h=>{h.key==="Enter"?c.focus():h.key==="Escape"&&document.body.removeChild(a)}),c.addEventListener("keydown",h=>{h.key==="Enter"&&!h.shiftKey?(p.click(),h.preventDefault()):h.key==="Escape"&&document.body.removeChild(a)}),m.appendChild(f),m.appendChild(p),r.appendChild(n),r.appendChild(l),r.appendChild(d),r.appendChild(c),r.appendChild(u),r.appendChild(m),a.appendChild(r),document.body.appendChild(a),requestAnimationFrame(()=>{l.focus(),l.select()})}async saveArticle(i,e,t,s){e&&await this.ensureFolderExists(e);let a=this.sanitizeFilename(i.title),r=e?`${e}/${a}.md`:`${a}.md`;if(this.app.vault.getAbstractFileByPath(r)!==null)return new we.Notice(`File already exists: ${a}`),null;let n="";s&&(n+=this.generateFrontmatter(i)),n+=this.applyTemplate(i,t);let l=await this.app.vault.create(r,n);return new we.Notice(`Article saved: ${a}`),l}generateFrontmatter(i){let e=this.settings.frontmatterTemplate;e||(e=`---
title: "{{title}}"
date: {{date}}
tags: [{{tags}}]
source: "{{source}}"
link: {{link}}
author: "{{author}}"
feedTitle: "{{feedTitle}}"
guid: "{{guid}}"
---
`);let t="";return i.tags&&i.tags.length>0&&(t=i.tags.map(s=>s.name).join(", ")),this.settings.addSavedTag&&!t.toLowerCase().includes("saved")&&(t=t?`${t}, saved`:"saved"),e=e.replace(/{{title}}/g,i.title.replace(/"/g,'\\"')).replace(/{{date}}/g,new Date().toISOString()).replace(/{{tags}}/g,t).replace(/{{source}}/g,(i.feedTitle||"Web viewer").replace(/"/g,'\\"')).replace(/{{link}}/g,i.link).replace(/{{author}}/g,(i.author||"").replace(/"/g,'\\"')).replace(/{{feedTitle}}/g,(i.feedTitle||"Web viewer").replace(/"/g,'\\"')).replace(/{{guid}}/g,i.guid.replace(/"/g,'\\"')),e}sanitizeFilename(i){return i.replace(/[/\\:*?"<>|]/g,"_").replace(/\s+/g,"_").replace(/_+/g,"_").substring(0,100)}applyTemplate(i,e){let t=new Date().toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"});return e.replace(/{{title}}/g,i.title).replace(/{{date}}/g,t).replace(/{{isoDate}}/g,new Date().toISOString()).replace(/{{link}}/g,i.link).replace(/{{author}}/g,i.author||"").replace(/{{source}}/g,i.feedTitle||"Web viewer").replace(/{{summary}}/g,i.summary||"").replace(/{{content}}/g,i.description)}async ensureFolderExists(i){!i||i.trim()===""||this.app.vault.getAbstractFileByPath(i)===null&&await this.app.vault.createFolder(i)}};var ue=require("obsidian"),Ne=class{constructor(i,e,t,s){this.audioElement=null;this.currentItem=null;this.playlist=[];this.progressInterval=null;this.progressData=new Map;this.currentPlaylistIndex=0;this.isShuffled=!1;this.originalPlaylist=[];this.playerEl=null;this.playButton=null;this.currentTimeEl=null;this.durationEl=null;this.progressBarEl=null;this.progressFilledEl=null;this.speedButtonEl=null;this.shuffleButton=null;this.repeatButton=null;this.volumeSlider=null;this.volumeContainer=null;this.container=i,this.app=e,this.theme=t||"obsidian",s&&(this.playlist=s,this.originalPlaylist=[...s]),this.loadProgressData()}setPlaylist(i){this.playlist=i,this.originalPlaylist=[...i],this.currentPlaylistIndex=0,this.isShuffled=!1}loadEpisode(i,e){if(e&&Array.isArray(e)&&this.setPlaylist(e),!!i.audioUrl&&(this.currentItem=i,this.currentPlaylistIndex=this.playlist.findIndex(t=>t.guid===i.guid),this.render(),this.audioElement)){this.audioElement.src=i.audioUrl,this.audioElement.load();let t=this.progressData.get(i.guid);t&&t.position>0&&(this.audioElement.currentTime=t.position,this.updateProgressDisplay())}}render(){var y,w;if(!this.currentItem)return;let i=this.container.querySelector(".playlist-list"),e=i?i.scrollTop:0;this.container.empty();let t=this.container.createDiv({cls:"rss-reader-podcast-container"});t.setAttribute("data-podcast-theme",this.theme);let s=t.createDiv({cls:"podcast-player-header"});s.createDiv({cls:"podcast-player-title",text:this.currentItem.title}),s.createDiv({cls:"podcast-player-meta",text:`${this.currentItem.feedTitle}${this.currentItem.author?" - "+this.currentItem.author:""}`}),this.playerEl=t.createDiv({cls:"podcast-player-main"});let a=this.playerEl.createDiv({cls:"podcast-player-left"}),r=this.currentItem.coverImage||this.currentItem.image||((w=(y=this.currentItem.itunes)==null?void 0:y.image)==null?void 0:w.href)||"";if(r){let E=a.createEl("img",{cls:"podcast-cover",attr:{src:r,alt:this.currentItem.title}});E.onerror=()=>{E.addClass("hidden"),this.createCoverPlaceholder(a)}}let n=this.playerEl.createDiv({cls:"podcast-player-center"}),l=n.createDiv({cls:"podcast-seekbar-row"});this.currentTimeEl=l.createDiv({cls:"rss-current-time",text:"0:00"});let d=l.createDiv({cls:"podcast-progress-bar-wrapper"});if(this.progressBarEl=d.createEl("progress",{cls:"podcast-progress-bar"}),this.progressBarEl.value=0,this.progressBarEl.max=1,this.progressFilledEl=d.createDiv({cls:"podcast-progress-bar-filled"}),this.durationEl=l.createDiv({cls:"rss-duration",text:"-0:00"}),this.progressBarEl){let E=this.progressBarEl,T=!1,x=S=>{let b=E.getBoundingClientRect(),C;S instanceof MouseEvent?C=S.clientX:C=S.touches[0].clientX;let A=Math.max(0,Math.min(1,(C-b.left)/b.width));return this.audioElement&&this.audioElement.duration?A*this.audioElement.duration:0};E.addEventListener("click",S=>{if(!this.audioElement||!this.audioElement.duration)return;let b=x(S);this.audioElement.currentTime=b,this.updateProgressDisplay()}),E.addEventListener("mousedown",S=>{if(!this.audioElement||!this.audioElement.duration)return;T=!0;let b=A=>{if(!T||!this.audioElement||!this.audioElement.duration)return;let F=x(A);this.audioElement.currentTime=F,this.updateProgressDisplay()},C=()=>{T=!1,window.removeEventListener("mousemove",b),window.removeEventListener("mouseup",C)};window.addEventListener("mousemove",b),window.addEventListener("mouseup",C)}),E.addEventListener("touchstart",S=>{if(!this.audioElement||!this.audioElement.duration)return;T=!0;let b=A=>{if(!T||!this.audioElement||!this.audioElement.duration)return;let F=x(A);this.audioElement.currentTime=F,this.updateProgressDisplay()},C=()=>{T=!1,window.removeEventListener("touchmove",b),window.removeEventListener("touchend",C)};window.addEventListener("touchmove",b),window.addEventListener("touchend",C)})}let c=n.createDiv({cls:"podcast-controls-row"}),u=c.createDiv({cls:"podcast-toolbar-left"});this.shuffleButton=u.createEl("button",{cls:"rss-shuffle-btn"}),(0,ue.setIcon)(this.shuffleButton,"shuffle"),this.shuffleButton.onclick=()=>this.toggleShuffle(),this.updateShuffleButton(),this.speedButtonEl=u.createEl("select",{cls:"rss-speed-control"}),[.75,1,1.25,1.5,1.75,2,2.5,3].forEach(E=>{var x;let T=(x=this.speedButtonEl)==null?void 0:x.createEl("option",{attr:{value:E.toString()},text:`${E}\xD7`});T&&E===1&&(T.selected=!0)}),this.speedButtonEl.onchange=()=>{this.audioElement&&this.speedButtonEl&&(this.audioElement.playbackRate=Number(this.speedButtonEl.value))},this.audioElement&&(this.audioElement.playbackRate=1);let g=c.createDiv({cls:"podcast-toolbar-center"}),m=g.createEl("button",{cls:"rss-rewind"});(0,ue.setIcon)(m,"skip-back"),m.onclick=()=>{this.audioElement&&(this.audioElement.currentTime=Math.max(0,this.audioElement.currentTime-10),this.updateProgressDisplay())},this.playButton=g.createEl("button",{cls:"rss-play-pause"}),(0,ue.setIcon)(this.playButton,"play"),this.playButton.onclick=()=>this.togglePlayback();let f=g.createEl("button",{cls:"rss-forward"});(0,ue.setIcon)(f,"skip-forward"),f.onclick=()=>{this.audioElement&&(this.audioElement.currentTime=Math.min(this.audioElement.duration,this.audioElement.currentTime+45),this.updateProgressDisplay())};let p=c.createDiv({cls:"podcast-toolbar-right"});this.repeatButton=p.createEl("button",{cls:"rss-repeat-btn"}),(0,ue.setIcon)(this.repeatButton,"repeat"),this.repeatButton.onclick=()=>this.toggleRepeat(),this.volumeContainer=p.createDiv({cls:"rss-volume-control-container"});let h=this.volumeContainer.createEl("button",{cls:"rss-volume"});(0,ue.setIcon)(h,"volume-2"),this.volumeSlider=this.volumeContainer.createEl("div",{cls:"rss-volume-slider"});let v=this.volumeSlider.createEl("input",{type:"range",cls:"rss-volume-bar"});if(v.min="0",v.max="100",v.value="100",v.oninput=()=>{this.audioElement&&v&&(this.audioElement.volume=Number(v.value)/100)},this.audioElement=t.createEl("audio",{attr:{preload:"metadata"}}),this.currentItem.audioUrl&&(this.audioElement.src=this.currentItem.audioUrl),this.audioElement.onplay=()=>this.updatePlayButtonIcon(!0),this.audioElement.onpause=()=>this.updatePlayButtonIcon(!1),this.audioElement.ontimeupdate=()=>this.updateProgressDisplay(),this.audioElement.onloadedmetadata=()=>this.updateProgressDisplay(),this.audioElement.onended=()=>this.handleEpisodeEnd(),this.audioElement.volume=1,this.audioElement.playbackRate=1,this.updateProgressDisplay(),this.playlist&&this.playlist.length>1){let E=this.container.createDiv({cls:"podcast-playlist-section"});E.setAttribute("data-podcast-theme",this.theme);let T=E.createDiv({cls:"playlist-header"});T.createDiv({cls:"playlist-title",text:`Playlist (${this.playlist.length} episodes)`});let x=T.createDiv({cls:"playlist-controls"}),S=x.createEl("button",{cls:"playlist-nav-btn"});(0,ue.setIcon)(S,"chevron-left"),S.onclick=()=>this.playPrevious();let b=x.createEl("button",{cls:"playlist-nav-btn"});(0,ue.setIcon)(b,"chevron-right"),b.onclick=()=>this.playNext();let C=E.createDiv({cls:"playlist-list"});this.playlist.forEach((A,F)=>{var $,z,Q,V,Y,J,R,K,le;let D=C.createDiv({cls:"playlist-episode-row"}),L=this.progressData.get(A.guid);if(L&&L.position>0){D.addClass("has-progress");let H=L.position/L.duration*100;D.style.setProperty("--progress-width",`${H}%`)}let M=D.createEl("button",{cls:"playlist-play-btn"});(0,ue.setIcon)(M,"play"),M.onclick=()=>{this.loadEpisode(A),window.setTimeout(()=>{this.audioElement&&this.audioElement.play().catch(H=>{console.error("Failed to play audio:",H)})},100)};let U=A.coverImage||A.image||((z=($=A.itunes)==null?void 0:$.image)==null?void 0:z.href)||((Q=this.currentItem)==null?void 0:Q.coverImage)||((V=this.currentItem)==null?void 0:V.image)||((R=(J=(Y=this.currentItem)==null?void 0:Y.itunes)==null?void 0:J.image)==null?void 0:R.href)||"";if(U){let H=D.createEl("img",{cls:"playlist-ep-cover",attr:{src:U,alt:A.title}});H.onerror=()=>{H.addClass("hidden");let se=D.createDiv({cls:"playlist-ep-cover-placeholder"});se.textContent="\u{1F3A7}"}}else{let H=D.createDiv({cls:"playlist-ep-cover-placeholder"});H.textContent="\u{1F3A7}"}let _=D.createDiv({cls:"playlist-ep-info"});_.createDiv({cls:"playlist-ep-title",text:A.title});let G=_.createDiv({cls:"playlist-ep-meta"});if(G.createDiv({cls:"playlist-ep-date",text:A.pubDate?new Date(A.pubDate).toLocaleDateString():""}),A.duration||(K=A.itunes)!=null&&K.duration){let H=G.createDiv({cls:"episode-duration-badge"});H.textContent=A.duration||((le=A.itunes)==null?void 0:le.duration)||""}if(L&&L.position>0){let H=D.createDiv({cls:"episode-progress-indicator"}),se=L.position/L.duration*100;H.style.setProperty("--progress-width",`${se}%`)}this.currentItem&&A.guid===this.currentItem.guid&&D.addClass("active")}),e>0&&(C.scrollTop=e)}else{let E=this.container.createDiv({cls:"playlist-empty"});E.textContent="No other episodes available in this feed"}}createCoverPlaceholder(i){let e=i.createDiv({cls:"podcast-cover-placeholder"});e.textContent="\u{1F3A7}"}toggleShuffle(){this.isShuffled=!this.isShuffled,this.isShuffled?this.playlist=[...this.originalPlaylist].sort(()=>Math.random()-.5):this.playlist=[...this.originalPlaylist],this.updateShuffleButton(),this.render()}updateShuffleButton(){this.shuffleButton&&this.shuffleButton.classList.toggle("active",this.isShuffled)}toggleRepeat(){this.repeatButton&&this.repeatButton.classList.toggle("active")}playNext(){if(this.playlist.length===0)return;this.currentPlaylistIndex=(this.currentPlaylistIndex+1)%this.playlist.length;let i=this.playlist[this.currentPlaylistIndex];this.loadEpisode(i)}playPrevious(){if(this.playlist.length===0)return;this.currentPlaylistIndex=this.currentPlaylistIndex===0?this.playlist.length-1:this.currentPlaylistIndex-1;let i=this.playlist[this.currentPlaylistIndex];this.loadEpisode(i)}handleEpisodeEnd(){var i;this.updatePlayButtonIcon(!1),(i=this.repeatButton)!=null&&i.classList.contains("active")?this.audioElement&&(this.audioElement.currentTime=0,this.audioElement.play()):this.playNext()}togglePlayback(){this.audioElement&&(this.audioElement.paused?this.audioElement.play():this.audioElement.pause())}cyclePlaybackSpeed(){if(!this.audioElement||!this.speedButtonEl)return;let i=[1,1.25,1.5,1.75,2,.75],e=this.audioElement.playbackRate,t=i.findIndex(s=>s===e)+1;t>=i.length&&(t=0),this.audioElement.playbackRate=i[t],this.speedButtonEl.textContent=`${i[t].toFixed(2)}x`}startProgressTracking(){this.progressInterval&&window.clearInterval(this.progressInterval),this.progressInterval=window.setInterval(()=>{this.updateProgressDisplay(),this.audioElement&&this.currentItem&&this.saveProgress()},1e3)}stopProgressTracking(){this.progressInterval&&(window.clearInterval(this.progressInterval),this.progressInterval=null)}updateProgressDisplay(){if(!this.audioElement)return;let i=this.formatTime(this.audioElement.currentTime);if(this.currentTimeEl&&(this.currentTimeEl.textContent=i),this.audioElement.duration&&!isNaN(this.audioElement.duration)){let e=this.formatTime(this.audioElement.duration);if(this.durationEl&&(this.durationEl.textContent=e),this.progressBarEl&&(this.progressBarEl.value=this.audioElement.currentTime,this.progressBarEl.max=this.audioElement.duration),this.progressFilledEl){let t=this.audioElement.currentTime/this.audioElement.duration*100;this.progressFilledEl.style.setProperty("--progress-percent",`${t}%`)}}}formatTime(i){let e=Math.floor(i/60),t=Math.floor(i%60);return`${e}:${t.toString().padStart(2,"0")}`}updatePlayButtonIcon(i){this.playButton&&(0,ue.setIcon)(this.playButton,i?"pause":"play")}saveProgress(){!this.audioElement||!this.currentItem||this.audioElement.currentTime<3||this.audioElement.duration&&this.audioElement.currentTime>this.audioElement.duration-3||(this.progressData.set(this.currentItem.guid,{position:this.audioElement.currentTime,duration:this.audioElement.duration||0}),this.saveProgressData())}saveProgressData(){try{let i={};this.progressData.forEach((e,t)=>{i[t]=e}),this.app.saveLocalStorage("rss-podcast-progress",i)}catch(i){console.error("Failed to save podcast progress:",i)}}loadProgressData(){try{let i=this.app.loadLocalStorage("rss-podcast-progress");if(i&&typeof i=="object"){let e=i;this.progressData.clear(),Object.entries(e).forEach(([t,s])=>{this.progressData.set(t,s)})}}catch(i){console.error("Failed to load podcast progress:",i)}}updateTheme(i){this.theme=i,this.container.querySelectorAll("[data-podcast-theme]").forEach(t=>{t.setAttribute("data-podcast-theme",i)})}destroy(){this.stopProgressTracking(),this.audioElement&&(this.audioElement.pause(),this.audioElement.src="",this.audioElement.remove(),this.audioElement=null),this.saveProgressData()}};var Me=require("obsidian"),Ut=require("obsidian");var je=class{constructor(i,e){this.currentItem=null;this.playerEl=null;this.iframeEl=null;this.container=i,this.onVideoSelect=e}loadVideo(i){if(!i.videoId){new Me.Notice("No video ID provided");return}try{this.currentItem=i,this.render()}catch(e){new Me.Notice(`Error loading video: ${e instanceof Error?e.message:"Unknown error"}`)}}render(){if(!this.currentItem||!this.currentItem.videoId)return;this.container.empty(),this.playerEl=this.container.createDiv({cls:"rss-video-player"});let i=this.playerEl.createDiv({cls:"rss-video-container"});this.iframeEl=this.container.createEl("iframe",{attr:{src:`https://www.youtube.com/embed/${this.currentItem.videoId}?rel=0&autoplay=1`,allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; fullscreen"}}),this.iframeEl.allowFullscreen=!0,i.appendChild(this.iframeEl);let e=this.playerEl.createDiv({cls:"rss-video-details"});new Me.Setting(e).setName(this.currentItem.title).setHeading().settingEl.addClass("rss-video-title");let s=e.createDiv({cls:"rss-video-meta"});if(s.createDiv({cls:"rss-video-channel",text:this.currentItem.feedTitle}),s.createDiv({cls:"rss-video-date",text:new Date(this.currentItem.pubDate).toLocaleDateString()}),this.currentItem.description){let g=e.createDiv({cls:"rss-video-description"}),m=f=>{let p=ae(f),v=new DOMParser().parseFromString(p,"text/html");return v.querySelectorAll("script").forEach(y=>y.remove()),v.querySelectorAll("a").forEach(y=>{y.target="_blank",y.rel="noopener noreferrer"}),new XMLSerializer().serializeToString(v.body)};g.textContent=m(this.currentItem.description)}let a=this.playerEl.createDiv({cls:"rss-video-links"}),r=a.createDiv({cls:"rss-video-youtube-button"});(0,Ut.setIcon)(r,"youtube"),r.addEventListener("click",()=>{var g;(g=this.currentItem)!=null&&g.videoId&&window.open(`https://www.youtube.com/watch?v=${this.currentItem.videoId}`,"_blank")});let n=a.createDiv({cls:"rss-video-quality"});n.createDiv({cls:"rss-video-quality-label",text:"Quality: "});let l=n.createDiv({cls:"rss-video-quality-options"});["sd","hd","Full hd"].forEach((g,m)=>{let f=l.createDiv({cls:`rss-video-quality-option ${m===1?"active":""}`,text:g});f.addEventListener("click",()=>{if(l.querySelectorAll(".rss-video-quality-option").forEach(p=>{p.classList.remove("active")}),f.classList.add("active"),this.iframeEl&&this.currentItem){let p="";m===0?p="medium":m===1?p="hd720":m===2&&(p="hd1080"),this.iframeEl.src=`https://www.youtube.com/embed/${this.currentItem.videoId}?rel=0&vq=${p}`}})});let c=this.playerEl.createDiv({cls:"rss-video-related"});c.createEl("h4",{text:"From the same channel"});let u=this.findRelatedVideos();if(u.length>0){let g=c.createDiv({cls:"rss-video-related-list"});u.forEach(m=>{let f=g.createDiv({cls:"rss-video-related-item"});m.videoId&&f.createDiv({cls:"rss-video-related-thumbnail"}).createEl("img",{attr:{src:`https://img.youtube.com/vi/${m.videoId}/mqdefault.jpg`,alt:m.title}});let p=f.createDiv({cls:"rss-video-related-info"});p.createDiv({cls:"rss-video-related-title",text:m.title}),p.createDiv({cls:"rss-video-related-date",text:new Date(m.pubDate).toLocaleDateString()}),f.addEventListener("click",()=>{this.onVideoSelect?this.onVideoSelect(m):this.loadVideo(m)})})}else c.createDiv({cls:"rss-video-related-empty",text:"No related videos found"})}findRelatedVideos(){return this.currentItem?[]:[]}setRelatedVideos(i){var s;if(!this.currentItem)return;let e=i.filter(a=>this.currentItem&&a.guid!==this.currentItem.guid&&a.videoId&&a.feedUrl===this.currentItem.feedUrl).slice(0,5),t=(s=this.playerEl)==null?void 0:s.querySelector(".rss-video-related");if(t)if(t.empty(),t.createEl("h4",{text:"From the same channel"}),e.length>0){let a=t.createDiv({cls:"rss-video-related-list"});e.forEach(r=>{let n=a.createDiv({cls:"rss-video-related-item"});r.videoId&&n.createDiv({cls:"rss-video-related-thumbnail"}).createEl("img",{attr:{src:`https://img.youtube.com/vi/${r.videoId}/mqdefault.jpg`,alt:r.title}});let l=n.createDiv({cls:"rss-video-related-info"});l.createDiv({cls:"rss-video-related-title",text:r.title}),l.createDiv({cls:"rss-video-related-date",text:new Date(r.pubDate).toLocaleDateString()}),n.addEventListener("click",()=>{this.onVideoSelect?this.onVideoSelect(r):this.loadVideo(r)})})}else t.createDiv({cls:"rss-video-related-empty",text:"No related videos found"})}destroy(){this.iframeEl&&(this.iframeEl.src="",this.iframeEl.remove(),this.iframeEl=null),this.playerEl=null}};var Bt=require("obsidian"),_t=vt(ht());var oe="rss-reader-view",ge=class extends Te.ItemView{constructor(e,t,s,a){var r;super(e);this.currentItem=null;this.webViewerIntegration=null;this.podcastPlayer=null;this.videoPlayer=null;this.relatedItems=[];this.turndownService=new Ge;this.settings=t,this.articleSaver=s,this.onArticleSave=a;try{let l=(r=this.app.plugins)==null?void 0:r.plugins;l&&"webpage-html-export"in l&&(this.webViewerIntegration=new Ye(this.app,t.articleSaving))}catch(n){}}isPodcastPlaying(){if(!this.podcastPlayer)return!1;let e=this.podcastPlayer.audioElement;return e!=null&&!e.paused&&e.currentTime>0}getViewType(){return oe}getDisplayText(){return this.currentItem?this.currentItem.title:"RSS reader"}getIcon(){if(this.currentItem){if(this.currentItem.mediaType==="video")return"play-circle";if(this.currentItem.mediaType==="podcast")return"headphones"}return"file-text"}onOpen(){this.contentEl.empty(),this.contentEl.addClass("rss-reader-view");let e=this.contentEl.createDiv({cls:"rss-reader-header"}),t=e.createDiv({cls:"rss-reader-back-button"});(0,Xe.setIcon)(t,"arrow-left"),t.addEventListener("click",()=>{this.app.workspace.detachLeavesOfType(oe)}),this.titleElement=e.createDiv({cls:"rss-reader-title",text:"RSS reader"}),this.currentItem=null;let s=e.createDiv({cls:"rss-reader-actions"});s.createDiv({cls:"rss-reader-saved-label",text:"Saved"});let a=s.createDiv({cls:"rss-reader-action-button",attr:{title:"Save article"}});(0,Xe.setIcon)(a,"save"),a.addEventListener("click",n=>{this.currentItem&&this.showSaveOptions(n,this.currentItem)});let r=s.createDiv({cls:"rss-reader-action-button",attr:{title:"Open in Browser"}});return(0,Xe.setIcon)(r,"globe-2"),r.addEventListener("click",()=>{this.currentItem&&window.open(this.currentItem.link,"_blank")}),this.readingContainer=this.contentEl.createDiv({cls:"rss-reader-content"}),Promise.resolve()}getCustomTemplateForArticle(e){var s;let t=this.settings.feeds.find(a=>a.url===e.feedUrl);if(t!=null&&t.customTemplate){let n=((s=this.settings.articleSaving.savedTemplates)!=null?s:[]).find(l=>l.id===t.customTemplate);if(n)return n.template}}showSaveOptions(e,t){let s=new Te.Menu;s.addItem(a=>{a.setTitle("Save with default settings").setIcon("save").onClick(async()=>{let r=this.turndownService.turndown(this.currentFullContent||t.description||""),n=this.getCustomTemplateForArticle(t);await this.articleSaver.saveArticle(t,void 0,n,r)&&(this.onArticleSave(t),this.updateSavedLabel(!0))})}),s.addItem(a=>{a.setTitle("Save to custom folder...").setIcon("folder").onClick(()=>{this.showCustomSaveModal(t)})}),s.showAtMouseEvent(e)}showCustomSaveModal(e){let t=document.body.createDiv({cls:"rss-dashboard-modal rss-dashboard-modal-container"}),s=t.createDiv({cls:"rss-dashboard-modal-content"});new Te.Setting(s).setName("Save article").setHeading();let a=s.createEl("label",{text:"Save to folder:"}),r=s.createEl("input",{attr:{type:"text",placeholder:"Enter folder path",value:this.settings.articleSaving.defaultFolder||""}}),n=s.createEl("label",{text:"Use template:"}),l=s.createEl("textarea",{attr:{placeholder:"Enter template",rows:"6"}}),d=this.getCustomTemplateForArticle(e);l.value=d||this.settings.articleSaving.defaultTemplate||"";let c=s.createDiv({cls:"rss-dashboard-modal-buttons"}),u=c.createEl("button",{text:"Cancel"});u.addEventListener("click",()=>{document.body.removeChild(t)});let g=c.createEl("button",{text:"Save",cls:"rss-dashboard-primary-button"});g.addEventListener("click",()=>{(async()=>{let m=r.value.trim(),f=l.value.trim()||void 0,p=this.turndownService.turndown(this.currentFullContent||e.description||"");await this.articleSaver.saveArticle(e,m,f,p)&&(this.onArticleSave(e),this.updateSavedLabel(!0)),document.body.removeChild(t)})()}),c.appendChild(u),c.appendChild(g),s.appendChild(a),s.appendChild(r),s.appendChild(n),s.appendChild(l),s.appendChild(c),t.appendChild(s),document.body.appendChild(t)}async displayItem(e,t=[]){if(this.readingContainer&&this.readingContainer.empty(),this.currentItem=e,this.relatedItems=t,this.titleElement&&this.titleElement.setText(e.title),this.updateSavedLabel(!1),e.saved&&!this.checkSavedFileExists(e)&&(e.saved=!1,e.tags&&(e.tags=e.tags.filter(a=>a.name.toLowerCase()!=="saved")),e.feedUrl)){let a=this.settings.feeds.find(r=>r.url===e.feedUrl);if(a){let r=a.items.find(n=>n.guid===e.guid);r&&(r.saved=!1,r.tags&&(r.tags=r.tags.filter(n=>n.name.toLowerCase()!=="saved")))}}if(e.mediaType==="video"&&!e.videoId&&e.link){let s=ee.extractYouTubeVideoId(e.link);s&&(e.videoId=s)}if(e.mediaType==="video"&&e.videoId)await this.displayVideo(e);else if(e.mediaType==="video"&&e.videoUrl)await this.displayVideoPodcast(e);else if(e.mediaType==="podcast"&&(e.audioUrl||ee.extractPodcastAudio(e.description))){if(!e.audioUrl){let s=ee.extractPodcastAudio(e.description);s&&(e.audioUrl=s)}await this.displayPodcast(e)}else{let s=await this.fetchFullArticleContent(e.link);this.currentFullContent=s,await this.displayArticle(e,s)}e.read||(e.read=!0)}async displayVideo(e){this.podcastPlayer&&(this.podcastPlayer.destroy(),this.podcastPlayer=null);let t=this.readingContainer.createDiv({cls:"rss-reader-video-container enhanced"});e.videoId?(this.videoPlayer=new je(t,s=>{this.displayItem(s,this.relatedItems)}),this.videoPlayer.loadVideo(e),this.relatedItems.length>0&&this.videoPlayer.setRelatedVideos(this.relatedItems)):(t.createDiv({cls:"rss-reader-error",text:"Video id not found. Cannot play this video."}),await this.displayArticle(e))}async displayPodcast(e){this.videoPlayer&&(this.videoPlayer.destroy(),this.videoPlayer=null);let t=this.readingContainer.createDiv({cls:"rss-reader-podcast-container enhanced"}),s;if(e.feedUrl){let a=this.settings.feeds.find(r=>r.url===e.feedUrl);a&&(s=a.items.filter(r=>r.mediaType==="podcast"))}if(e.audioUrl)this.podcastPlayer=new Ne(t,this.app,this.settings.media.podcastTheme),this.podcastPlayer.loadEpisode(e,s);else{let a=ee.extractPodcastAudio(e.description);if(a){let r={...e,audioUrl:a};this.podcastPlayer=new Ne(t,this.app,this.settings.media.podcastTheme),this.podcastPlayer.loadEpisode(r,s)}else t.createDiv({cls:"rss-reader-error",text:"Audio url not found. Cannot play this podcast."}),await this.displayArticle(e)}}updatePodcastTheme(e){this.podcastPlayer&&this.podcastPlayer.updateTheme(e)}async displayArticle(e,t){if(this.podcastPlayer&&(this.podcastPlayer.destroy(),this.podcastPlayer=null),this.videoPlayer&&(this.videoPlayer.destroy(),this.videoPlayer=null),this.webViewerIntegration){try{await this.webViewerIntegration.openInWebViewer(e.link,e.title)||this.renderArticle(e,t)}catch(s){this.renderArticle(e,t)}return}this.renderArticle(e,t)}renderArticle(e,t){var f;let s=this.readingContainer.createDiv({cls:"rss-reader-article-header"});new Te.Setting(s).setName(e.title).setHeading().settingEl.addClass("rss-reader-item-title");let r=s.createDiv({cls:"rss-reader-meta"});if(r.createDiv({cls:"rss-reader-feed-title",text:e.feedTitle}),r.createDiv({cls:"rss-reader-pub-date",text:new Date(e.pubDate).toLocaleString()}),e.tags&&e.tags.length>0){let p=s.createDiv({cls:"rss-reader-tags"});for(let h of e.tags){let v=p.createDiv({cls:"rss-reader-tag"});v.textContent=h.name,v.style.setProperty("--tag-color",h.color)}}this.settings.display.showCoverImage&&(e.coverImage||e.image&&typeof e.image=="object"&&e.image.url||typeof e.image=="string"&&e.image)&&this.readingContainer.createDiv({cls:"rss-reader-cover-image"}).createEl("img",{attr:{src:(f=e.coverImage||e.image&&typeof e.image=="object"&&e.image.url||(typeof e.image=="string"?e.image:""))!=null?f:"",alt:e.title}}).addEventListener("error",function(){this.remove()});let n=this.readingContainer.createDiv({cls:"rss-reader-article-content"}),l=ae(t||e.description||""),d=this.convertRelativeUrlsInContent(l,e.link),u=new DOMParser().parseFromString(d,"text/html");function g(p,h){h.forEach(v=>{if(v.nodeType===Node.TEXT_NODE)p.appendText(v.textContent||"");else if(v.nodeType===Node.ELEMENT_NODE){let y=v;if(!(y.tagName==="I"&&y.classList.contains("icon-class"))){let E=y.tagName.toLowerCase(),T=p.createEl(E);Array.from(y.attributes).forEach(x=>{T.setAttr(x.name,x.value)}),g(T,v.childNodes)}}})}g(n,u.body.childNodes),n.querySelectorAll("img").forEach(p=>{let h=p.getAttribute("src");h&&h.startsWith("app://")&&p.setAttribute("src",h.replace("app://","https://")),p.classList.add("rss-reader-responsive-img"),p.addEventListener("error",function(){this.remove()})}),n.querySelectorAll("source").forEach(p=>{let h=p.getAttribute("srcset");if(h){let v=h.split(",").map(y=>{let w=y.trim(),E=w.match(/^([^\s]+)(\s+\d+w)?$/);if(E){let T=E[1],x=E[2]||"",S=T;return T.startsWith("app://")?S=T.replace("app://","https://"):T.startsWith("//")&&(S="https:"+T),S+x}return w}).join(", ");p.setAttribute("srcset",v)}}),n.querySelectorAll("a").forEach(p=>{let h=p.getAttribute("href");h&&h.startsWith("app://")&&p.setAttribute("href",h.replace("app://","https://"))}),this.app.workspace.trigger("parse-math",n),n.querySelectorAll("a").forEach(p=>{p.setAttribute("target","_blank"),p.setAttribute("rel","noopener noreferrer")})}async fetchFullArticleContent(e){try{let t=await(0,Bt.requestUrl)({url:e}),a=new DOMParser().parseFromString(t.text,"text/html"),n=new _t.Readability(a).parse(),l=(n==null?void 0:n.content)||"";return this.convertRelativeUrlsInContent(l,e)}catch(t){return""}}convertHtmlToMarkdown(e){return this.turndownService.turndown(e)}showMarkdownView(e,t){let s=document.body.createDiv({cls:"rss-reader-markdown-modal"}),a=s.createDiv({cls:"rss-reader-markdown-content"});a.createDiv({text:e}),a.createEl("button",{text:"Save to vault"}).addEventListener("click",()=>{(async()=>{let l=this.turndownService.turndown(this.currentFullContent||t.description||""),d=this.getCustomTemplateForArticle(t);await this.articleSaver.saveArticle(t,void 0,d,l)&&this.onArticleSave(t),document.body.removeChild(s)})()}),a.createEl("button",{text:"Close"}).addEventListener("click",()=>{document.body.removeChild(s)}),document.body.appendChild(s)}onClose(){return this.contentEl.empty(),Promise.resolve()}convertRelativeUrlsInContent(e,t){if(!e||!t)return e;try{let s=(()=>{try{return new URL(t).host}catch(a){return""}})();return e=e.replace(/app:\/\//g,"https://"),e=e.replace(/<img([^>]+)src=["']([^"']+)["']/gi,(a,r,n)=>{try{let l=new URL(n,t);return l.host!==s?(l.host=s,l.protocol="https:",`<img${r}src="${l.toString()}"`):`<img${r}src="${l.toString()}"`}catch(l){return`<img${r}src="${n}"`}}),e=e.replace(/<source([^>]+)srcset=["']([^"']+)["']/gi,(a,r,n)=>{let l=n.split(",").map(d=>{let c=d.trim(),u=c.match(/^([^\s]+)(\s+\d+w)?$/);if(u){let g=u[1],m=u[2]||"";return this.convertToAbsoluteUrl(g,t)+m}return c}).join(", ");return`<source${r}srcset="${l}"`}),e=e.replace(/<a([^>]+)href=["']([^"']+)["']/gi,(a,r,n)=>{let l=this.convertToAbsoluteUrl(n,t);return`<a${r}href="${l}"`}),e}catch(s){return e}}convertToAbsoluteUrl(e,t){if(!e||!t)return e;if(e.startsWith("app://"))return e.replace("app://","https://");if(e.startsWith("//"))return"https:"+e;if(e.startsWith("http://")||e.startsWith("https://"))return e;try{let s=new URL(t);return e.startsWith("/")?`${s.protocol}//${s.host}${e}`:new URL(e,s).href}catch(s){return e}}updateSavedLabel(e){let t=this.contentEl.querySelector(".rss-reader-saved-label");t&&(e?(t.classList.remove("hidden"),t.classList.add("visible")):(t.classList.remove("visible"),t.classList.add("hidden")))}resetTitle(){this.titleElement&&this.titleElement.setText("RSS reader")}checkSavedFileExists(e){try{let t=this.settings.articleSaving.defaultFolder||"RSS articles",s=this.sanitizeFilename(e.title),a=t?`${t}/${s}.md`:`${s}.md`;return this.app.vault.getAbstractFileByPath(a)!==null}catch(t){return!1}}sanitizeFilename(e){return e.replace(/[/\\:*?"<>|]/g,"_").replace(/\s+/g,"_").replace(/_+/g,"_").substring(0,100)}async displayVideoPodcast(e){var d;this.podcastPlayer&&(this.podcastPlayer.destroy(),this.podcastPlayer=null),this.videoPlayer&&(this.videoPlayer.destroy(),this.videoPlayer=null);let t=this.readingContainer.createDiv({cls:"rss-reader-video-podcast-container enhanced"});if(e.videoUrl){let c=t.createEl("video",{cls:"rss-reader-video",attr:{controls:"true",...e.coverImage?{poster:e.coverImage}:{}}});c.createEl("source",{attr:{src:e.videoUrl,type:"video/mp4"}}),c.appendText("Your browser does not support the video tag.")}else{t.createDiv({cls:"rss-reader-error",text:"Video url not found. Cannot play this video podcast."}),await this.displayArticle(e);return}let s=t.createDiv({cls:"rss-video-info"});new Te.Setting(s).setName(e.title).setHeading().settingEl.addClass("rss-video-title");let r=s.createDiv({cls:"rss-video-meta-row"});r.createDiv({text:e.feedTitle,cls:"rss-video-channel"}),r.createDiv({text:new Date(e.pubDate).toLocaleDateString(),cls:"rss-video-date"});let n=t.createDiv({cls:"rss-video-related"});n.createEl("h4",{text:"From the same channel"});let l=(((d=this.settings.feeds.find(c=>c.url===e.feedUrl))==null?void 0:d.items)||[]).filter(c=>c.mediaType==="video"&&c.guid!==e.guid).slice(0,6);if(l.length>0){let c=n.createDiv({cls:"rss-video-related-list rss-video-related-grid"});l.forEach(u=>{let g=c.createDiv({cls:"rss-video-related-item rss-video-related-card"});u.coverImage&&g.createDiv({cls:"rss-video-related-thumbnail"}).createEl("img",{attr:{src:u.coverImage,alt:u.title}});let m=g.createDiv({cls:"rss-video-related-info"});m.createDiv({cls:"rss-video-related-title",text:u.title}),m.createDiv({cls:"rss-video-related-date",text:new Date(u.pubDate).toLocaleDateString()}),g.addEventListener("click",()=>{this.displayItem(u,l)})})}else n.createDiv({cls:"rss-video-related-empty",text:"No related videos found"})}};var Se="rss-dashboard-view",Re=class extends O.ItemView{constructor(e,t){var r,n;super(e);this.plugin=t;this.currentFolder=null;this.currentFeed=null;this.currentTag=null;this.selectedArticle=null;this.tagsCollapsed=!0;this.collapsedFolders=[];this.allArticlesPage=1;this.unreadArticlesPage=1;this.readArticlesPage=1;this.savedArticlesPage=1;this.starredArticlesPage=1;this.sidebarContainer=null;this.verificationTimeout=null;this.folderPages={};this.folderPageSizes={};this.feedPages={};this.feedPageSizes={};this.articleReaderLeafWhilePodcast=null;this.settings=this.plugin.settings,this.collapsedFolders=this.settings.collapsedFolders||[],this.saver=new Ae(this.app,this.settings.articleSaving);let s=((r=this.settings.display)==null?void 0:r.defaultFilter)||"all",a=((n=this.settings.display)==null?void 0:n.hiddenFilters)||[];s!=="all"&&!a.includes(s)?this.currentFolder=s:this.currentFolder=null}getViewType(){return Se}getDisplayText(){return"RSS dashboard"}getIcon(){return"rss"}onOpen(){this.registerEvent(this.app.vault.on("delete",s=>{s instanceof O.TFile&&this.handleFileDeleted(s)})),this.registerEvent(this.app.vault.on("rename",(s,a)=>{s instanceof O.TFile&&this.handleFileRenamed(s,a)})),this.registerEvent(this.app.vault.on("modify",()=>{this.verificationTimeout&&window.clearTimeout(this.verificationTimeout),this.verificationTimeout=window.setTimeout(()=>{this.verifySavedArticles()},3e5)}));let e=this.containerEl.children[1];e.addClass("rss-dashboard-container");let t=e.querySelector(".rss-dashboard-layout");return t||(t=e.createDiv({cls:"rss-dashboard-layout"})),this.sidebarContainer?this.sidebarContainer.parentElement!==t&&t.appendChild(this.sidebarContainer):this.sidebarContainer=t.createDiv({cls:"rss-dashboard-sidebar-container"}),this.sidebar||(this.sidebar=new $e(this.app,this.sidebarContainer,this.plugin,this.settings,{currentFolder:this.currentFolder,currentFeed:this.currentFeed,currentTag:this.currentTag,tagsCollapsed:this.tagsCollapsed,collapsedFolders:this.collapsedFolders},{onFolderClick:this.handleFolderClick.bind(this),onFeedClick:this.handleFeedClick.bind(this),onTagClick:this.handleTagClick.bind(this),onToggleTagsCollapse:this.handleToggleTagsCollapse.bind(this),onToggleFolderCollapse:this.handleToggleFolderCollapse.bind(this),onBatchToggleFolders:this.handleBatchToggleFolders.bind(this),onAddFolder:this.handleAddFolder.bind(this),onAddSubfolder:this.handleAddSubfolder.bind(this),onAddFeed:this.handleAddFeed.bind(this),onEditFeed:this.handleEditFeed.bind(this),onDeleteFeed:this.handleDeleteFeed.bind(this),onDeleteFolder:this.handleDeleteFolder.bind(this),onRefreshFeeds:this.handleRefreshFeeds.bind(this),onUpdateFeed:this.handleUpdateFeed.bind(this),onImportOpml:this.handleImportOpml.bind(this),onExportOpml:this.handleExportOpml.bind(this),onToggleSidebar:this.handleToggleSidebar.bind(this),onManageFeeds:()=>{new He(this.app,this.plugin).open()}})),this.render(),Promise.resolve()}render(){this.verifySavedArticles(),this.articleList&&this.articleList.destroy(),this.settings.sidebarCollapsed?this.containerEl.addClass("sidebar-collapsed"):this.containerEl.removeClass("sidebar-collapsed"),this.sidebar&&(this.sidebar.clearFolderPathCache(),this.sidebar.options={currentFolder:this.currentFolder,currentFeed:this.currentFeed,currentTag:this.currentTag,tagsCollapsed:this.tagsCollapsed,collapsedFolders:this.collapsedFolders},this.sidebar.settings=this.settings,this.sidebar.render());let e=this.containerEl.children[1],t=e.querySelector(".rss-dashboard-layout");t||(t=e.createDiv({cls:"rss-dashboard-layout"}));let s=t.querySelector(".rss-dashboard-content");s?s.empty():s=t.createDiv({cls:"rss-dashboard-content"}),this.renderToolbar(s);let a=s.createDiv({cls:"rss-dashboard-articles"}),r=this.getAllFilteredArticles(),n=this.getCurrentPageSize(),l=this.getCurrentPage(),d=r.length,c=Math.max(1,Math.ceil(d/n)),u=(l-1)*n,g=u+n,m=r.slice(u,g);this.articleList=new Ve(a,this.settings,this.getArticlesTitle(),m,this.selectedArticle,{onArticleClick:f=>{this.handleArticleClick(f)},onToggleViewStyle:this.handleToggleViewStyle.bind(this),onRefreshFeeds:this.handleRefreshFeeds.bind(this),onArticleUpdate:(f,p,h)=>{this.handleArticleUpdate(f,p,h)},onArticleSave:f=>{this.handleArticleSave(f)},onOpenSavedArticle:f=>{this.handleOpenSavedArticle(f)},onOpenInReaderView:f=>{this.handleOpenInReaderView(f)},onToggleSidebar:this.handleToggleSidebar.bind(this),onSortChange:this.handleSortChange.bind(this),onGroupChange:this.handleGroupChange.bind(this),onFilterChange:this.handleFilterChange.bind(this),onPageChange:this.handlePageChange.bind(this),onPageSizeChange:this.handlePageSizeChange.bind(this)},l,c,n,d),this.articleList.render(),this.updateRefreshButtonText()}renderToolbar(e){e.createDiv({cls:"rss-dashboard-toolbar"})}getArticlesTitle(){return this.currentFeed?this.currentFeed.title:this.currentFolder==="starred"?"Starred items":this.currentFolder==="unread"?"Unread items":this.currentFolder==="read"?"Read items":this.currentFolder==="saved"?"Saved items":this.currentFolder==="videos"?"Videos":this.currentFolder==="podcasts"?"Podcasts":this.currentTag?`Tag: ${this.currentTag}`:this.currentFolder?this.currentFolder:"All articles"}getFilteredArticles(){let e=[];if(this.currentFeed){let t=this.currentFeed.maxItemsLimit||this.settings.maxItems;e=this.currentFeed.items.slice(0,t)}else if(this.currentFolder==="starred")for(let t of this.settings.feeds)e=e.concat(t.items.filter(s=>s.starred).map(s=>({...s,feedTitle:t.title,feedUrl:t.url})));else if(this.currentFolder==="unread")for(let t of this.settings.feeds)e=e.concat(t.items.filter(s=>!s.read).map(s=>({...s,feedTitle:t.title,feedUrl:t.url})));else if(this.currentFolder==="read")for(let t of this.settings.feeds)e=e.concat(t.items.filter(s=>s.read).map(s=>({...s,feedTitle:t.title,feedUrl:t.url})));else if(this.currentFolder==="saved")for(let t of this.settings.feeds)e=e.concat(t.items.filter(s=>s.saved).map(s=>({...s,feedTitle:t.title,feedUrl:t.url})));else if(this.currentFolder==="videos")for(let t of this.settings.feeds)e=e.concat(t.items.filter(s=>s.mediaType==="video").map(s=>({...s,feedTitle:t.title,feedUrl:t.url})));else if(this.currentFolder==="podcasts")for(let t of this.settings.feeds)e=e.concat(t.items.filter(s=>s.mediaType==="podcast").map(s=>({...s,feedTitle:t.title,feedUrl:t.url})));else if(this.currentTag)for(let t of this.settings.feeds)e=e.concat(t.items.filter(s=>s.tags&&s.tags.some(a=>a.name===this.currentTag)).map(s=>({...s,feedTitle:t.title,feedUrl:t.url})));else if(this.currentFolder){let t=this.getAllDescendantFolders(this.currentFolder);for(let s of this.settings.feeds)s.folder&&t.includes(s.folder)&&(e=e.concat(s.items.map(a=>({...a,feedTitle:s.title,feedUrl:s.url}))))}else for(let t of this.settings.feeds)e=e.concat(t.items.map(s=>({...s,feedTitle:t.title,feedUrl:t.url})));if(this.settings.articleFilter.type==="age"&&typeof this.settings.articleFilter.value=="number"&&this.settings.articleFilter.value>0){let t=Date.now()-this.settings.articleFilter.value;e=e.filter(s=>new Date(s.pubDate).getTime()>t)}if(this.settings.articleSort==="oldest"?e.sort((t,s)=>new Date(t.pubDate).getTime()-new Date(s.pubDate).getTime()):e.sort((t,s)=>new Date(s.pubDate).getTime()-new Date(t.pubDate).getTime()),this.currentFolder===null&&this.currentFeed===null&&this.currentTag===null){let t=this.settings.allArticlesPageSize,s=0,a=this.allArticlesPage*t;return e.slice(s,a)}else if(this.currentFolder==="unread"){let t=this.settings.unreadArticlesPageSize,s=0,a=this.unreadArticlesPage*t;return e.slice(s,a)}else if(this.currentFolder==="read"){let t=this.settings.readArticlesPageSize,s=0,a=this.readArticlesPage*t;return e.slice(s,a)}else if(this.currentFolder==="saved"){let t=this.settings.savedArticlesPageSize,s=0,a=this.savedArticlesPage*t;return e.slice(s,a)}else if(this.currentFolder==="starred"){let t=this.settings.starredArticlesPageSize,s=0,a=this.starredArticlesPage*t;return e.slice(s,a)}return e}findFolderByPath(e){let t=e.split("/"),s=this.settings.folders.find(a=>a.name===t[0]);for(let a=1;a<t.length&&s;a++)s=(s.subfolders||[]).find(r=>r.name===t[a]);return s||null}getAllDescendantFolders(e){let t=[e],s=this.findFolderByPath(e);function a(r,n){if(r.subfolders)for(let l of r.subfolders){let d=n+"/"+l.name;t.push(d),a(l,d)}}return s&&a(s,e),t}handleFolderClick(e){let t=0;if(this.sidebarContainer){let s=this.sidebarContainer.querySelector(".rss-dashboard-feed-folders-section");s&&(t=s.scrollTop)}if(this.currentFeed=null,this.currentTag=null,this.currentFolder!==e&&(e==="unread"?this.unreadArticlesPage=1:e==="read"?this.readArticlesPage=1:e==="saved"?this.savedArticlesPage=1:e==="starred"?this.starredArticlesPage=1:e===null?this.allArticlesPage=1:e&&(this.folderPages[e]=1)),this.currentFolder=e,this.sidebarContainer){let s=this.sidebarContainer.querySelector(".rss-dashboard-feed-folders-section");s&&(s.scrollTop=t)}this.render()}handleFeedClick(e){let t=0;if(this.sidebarContainer){let s=this.sidebarContainer.querySelector(".rss-dashboard-feed-folders-section");s&&(t=s.scrollTop)}this.currentFeed=e,this.currentFolder=null,this.currentTag=null,this.selectedArticle=null,e&&e.url&&(this.feedPages[e.url]=1),this.render(),this.sidebarContainer&&window.setTimeout(()=>{var a;let s=(a=this.sidebarContainer)==null?void 0:a.querySelector(".rss-dashboard-feed-folders-section");s&&(s.scrollTop=t)},0)}handleTagClick(e){this.currentTag=e,this.currentFolder=null,this.currentFeed=null,this.selectedArticle=null,this.render()}handleToggleTagsCollapse(){this.tagsCollapsed=!this.tagsCollapsed,this.render()}handleToggleFolderCollapse(e,t=!0){this.collapsedFolders.includes(e)?this.collapsedFolders=this.collapsedFolders.filter(s=>s!==e):this.collapsedFolders.push(e),this.settings.collapsedFolders=this.collapsedFolders,this.plugin.saveSettings(),t&&this.render()}handleBatchToggleFolders(e,t){this.collapsedFolders=this.collapsedFolders.filter(s=>!t.includes(s)),e.forEach(s=>{this.collapsedFolders.includes(s)||this.collapsedFolders.push(s)}),this.settings.collapsedFolders=this.collapsedFolders,this.plugin.saveSettings(),this.render()}handleAddFolder(e){this.plugin.addFolder(e)}handleAddSubfolder(e,t){this.plugin.addSubfolder(e,t)}async handleAddFeed(e,t,s,a,r,n){await this.plugin.addFeed(e,t,s,a,r,n),this.render()}handleEditFeed(e,t,s,a){this.plugin.editFeed(e,t,s,a),this.render()}handleDeleteFeed(e){this.plugin.settings.feeds=this.plugin.settings.feeds.filter(t=>t!==e),this.plugin.saveSettings(),this.currentFeed===e&&(this.currentFeed=null),this.render()}handleDeleteFolder(e){this.plugin.settings.feeds=this.plugin.settings.feeds.filter(t=>t.folder!==e),this.plugin.settings.folders=this.plugin.settings.folders.filter(t=>t.name!==e),this.plugin.saveSettings(),this.currentFolder===e&&(this.currentFolder=null),this.render()}handleRefreshFeeds(){if(this.currentFeed)this.plugin.refreshSelectedFeed(this.currentFeed);else if(this.currentFolder&&!["read","unread","starred","saved","videos","podcasts"].includes(this.currentFolder))this.plugin.refreshFeedsInFolder(this.currentFolder);else if(this.currentTag){let e=this.settings.feeds.filter(t=>t.items.some(s=>s.tags&&s.tags.some(a=>a.name===this.currentTag)));e.length>0?this.plugin.refreshFeeds(e):new O.Notice("No feeds found with the selected tag")}else this.plugin.refreshFeeds()}handleImportOpml(){this.plugin.importOpml()}handleExportOpml(){this.plugin.exportOpml()}handleToggleSidebar(){this.settings.sidebarCollapsed=!this.settings.sidebarCollapsed,this.plugin.saveSettings(),this.render()}async handleArticleClick(e){if(this.selectedArticle=e,e.read||await this.updateArticleStatus(e,{read:!0},!1),e.saved){let r=new O.Notice("Opening saved article...",0);try{let n=await this.findSavedArticleFile(e);if(n){await this.openSavedArticleFile(n),r.hide();return}else await this.updateArticleStatus(e,{saved:!1},!1),e.tags&&(e.tags=e.tags.filter(l=>l.name.toLowerCase()!=="saved")),r.hide(),new O.Notice("Saved article file not found. Opening original source instead.")}catch(n){r.hide();let l=n instanceof Error?n.message:String(n);new O.Notice(`Error opening saved article: ${l}`)}}let t=this.app.workspace.getLeavesOfType(oe);if((await Promise.all(t.map(async r=>((0,O.requireApiVersion)("1.7.2")&&await r.loadIfDeferred(),r.view instanceof ge?r.view.isPodcastPlaying():!1)))).some(r=>r))if(this.settings.media.openInSplitView)if(this.articleReaderLeafWhilePodcast&&this.app.workspace.getLeavesOfType(oe).includes(this.articleReaderLeafWhilePodcast))await this.openArticleInSpecificLeaf(e,this.articleReaderLeafWhilePodcast);else{let r=await this.openArticleInNewTab(e);this.articleReaderLeafWhilePodcast=r}else window.open(e.link,"_blank");else this.articleReaderLeafWhilePodcast=null,this.settings.media.openInSplitView?t.length>0?await this.openArticleInSpecificLeaf(e,t[0]):await this.openArticleInNewTab(e):window.open(e.link,"_blank")}async openArticleInNewTab(e){let{workspace:t}=this.app,s=t.getLeaf("split");if(s&&(await s.setViewState({type:oe,active:!0}),await t.revealLeaf(s),s.view instanceof ge)){let a=s.view,r=this.getRelatedItems(e);await a.displayItem(e,r)}return s}async openArticleInSpecificLeaf(e,t){if(t&&(await t.setViewState({type:oe,active:!0}),await this.app.workspace.revealLeaf(t),t.view instanceof ge)){let s=t.view,a=this.getRelatedItems(e);await s.displayItem(e,a)}}getRelatedItems(e){if(!e.feedUrl)return[];let t=this.settings.feeds.find(s=>s.url===e.feedUrl);return t?t.items.filter(s=>s.guid!==e.guid).sort((s,a)=>new Date(a.pubDate).getTime()-new Date(s.pubDate).getTime()).slice(0,5):[]}handleToggleViewStyle(e){this.settings.viewStyle=e,this.plugin.saveSettings(),this.render()}async handleArticleUpdate(e,t,s=!0){await this.updateArticleStatus(e,t,s)}async handleArticleSave(e){let t=this.settings.feeds.find(r=>r.url===e.feedUrl),s;if(t!=null&&t.customTemplate){let n=(this.settings.articleSaving.savedTemplates||[]).find(l=>l.id===t.customTemplate);n&&(s=n.template)}(this.settings.articleSaving.saveFullContent?await this.saver.saveArticleWithFullContent(e,void 0,s):await this.saver.saveArticle(e,void 0,s))&&(await this.updateArticleStatus(e,{saved:!0},!1),this.updateArticleSaveButton(e.guid))}async updateArticleStatus(e,t,s=!0){let a=this.settings.feeds.find(n=>n.url===e.feedUrl);if(!a)return;let r=a.items.find(n=>n.guid===e.guid);r&&(Object.assign(r,t),Object.assign(e,t),t.tags&&(r.tags=t.tags,e.tags=t.tags),await this.plugin.saveSettings(),s&&this.render())}updateArticleSaveButton(e){let t=document.getElementById(`article-${e}`);if(t){let s=t.querySelector(".rss-dashboard-save-toggle");s&&s.classList.add("saved")}}showEditFeedModal(e){this.sidebar.showEditFeedModal(e)}refresh(){this.render()}onClose(){return this.verificationTimeout&&window.clearTimeout(this.verificationTimeout),this.articleList&&this.articleList.destroy(),Promise.resolve()}async handleUpdateFeed(e){try{new O.Notice(`Updating feed "${e.title}"...`);let t=await this.plugin.feedParser.parseFeed(e.url,e);if(t){let s=this.settings.feeds.findIndex(a=>a.url===e.url);s>=0&&(this.settings.feeds[s]=t,await this.plugin.saveSettings())}this.render(),new O.Notice(`Feed "${e.title}" updated successfully`)}catch(t){new O.Notice(`Error updating feed "${e.title}": ${t instanceof Error?t.message:"Unknown error"}`)}}updateRefreshButtonText(){if(!this.articleList)return;let e="Refresh all feeds";if(this.currentFeed)e=`Refresh feed: "${this.currentFeed.title}"`;else if(this.currentFolder&&!["read","unread","starred","saved","videos","podcasts"].includes(this.currentFolder)){let t=this.settings.feeds.filter(s=>s.folder?s.folder===this.currentFolder||s.folder.startsWith(this.currentFolder+"/"):!1);e=`Refresh ${t.length} feed${t.length!==1?"s":""} in folder: "${this.currentFolder}"`}else if(this.currentTag){let t=this.settings.feeds.filter(s=>s.items.some(a=>a.tags&&a.tags.some(r=>r.name===this.currentTag)));e=`Refresh ${t.length} feed${t.length!==1?"s":""} with tag: "${this.currentTag}"`}else e=`Refresh all ${this.settings.feeds.length} feeds`;this.articleList.updateRefreshButtonText(e)}handleSortChange(e){this.settings.articleSort=e,this.plugin.saveSettings(),this.render()}handleFilterChange(e){this.settings.articleFilter=e,this.plugin.saveSettings(),this.render()}handleGroupChange(e){this.settings.articleGroupBy=e,this.plugin.saveSettings(),this.render()}getTotalArticlesCountForCurrentView(){let e=[];if(this.currentFeed)return this.currentFeed.items.length;if(this.currentFolder==="starred")for(let t of this.settings.feeds)e=e.concat(t.items.filter(s=>s.starred));else if(this.currentFolder==="unread")for(let t of this.settings.feeds)e=e.concat(t.items.filter(s=>!s.read));else if(this.currentFolder==="read")for(let t of this.settings.feeds)e=e.concat(t.items.filter(s=>s.read));else if(this.currentFolder==="saved")for(let t of this.settings.feeds)e=e.concat(t.items.filter(s=>s.saved));else if(this.currentFolder==="videos")for(let t of this.settings.feeds)e=e.concat(t.items.filter(s=>s.mediaType==="video"));else if(this.currentFolder==="podcasts")for(let t of this.settings.feeds)e=e.concat(t.items.filter(s=>s.mediaType==="podcast"));else if(this.currentTag)for(let t of this.settings.feeds)e=e.concat(t.items.filter(s=>s.tags&&s.tags.some(a=>a.name===this.currentTag)));else if(this.currentFolder){let t=this.getAllDescendantFolders(this.currentFolder);for(let s of this.settings.feeds)s.folder&&t.includes(s.folder)&&(e=e.concat(s.items))}else for(let t of this.settings.feeds)e=e.concat(t.items);if(this.settings.articleFilter.type==="age"&&typeof this.settings.articleFilter.value=="number"&&this.settings.articleFilter.value>0){let t=Date.now()-this.settings.articleFilter.value;e=e.filter(s=>new Date(s.pubDate).getTime()>t)}return e.length}getCurrentPage(){return this.currentFeed&&this.currentFeed.url?this.feedPages[this.currentFeed.url]||1:this.currentFolder&&!["unread","read","saved","starred","videos","podcasts"].includes(this.currentFolder)?this.folderPages[this.currentFolder]||1:this.currentFolder===null&&this.currentFeed===null&&this.currentTag===null?this.allArticlesPage:this.currentFolder==="unread"?this.unreadArticlesPage:this.currentFolder==="read"?this.readArticlesPage:this.currentFolder==="saved"?this.savedArticlesPage:this.currentFolder==="starred"?this.starredArticlesPage:this.allArticlesPage}async findSavedArticleFile(e){if(!e.saved)return null;if(e.savedFilePath)try{let r=this.app.vault.getAbstractFileByPath(e.savedFilePath);if(r!==null){if(r instanceof O.TFile)return r}else return await this.updateArticleStatus(e,{saved:!1,savedFilePath:void 0},!1),null}catch(r){}let t=this.sanitizeFilename(e.title),s=this.settings.articleSaving.defaultFolder||"",a=s&&s.trim()!==""?`${s}/${t}.md`:`${t}.md`;try{let r=this.app.vault.getAbstractFileByPath(a);if(r!==null&&r instanceof O.TFile)return await this.updateArticleStatus(e,{savedFilePath:a},!1),r}catch(r){}return null}async openSavedArticleFile(e){try{let t=this.app.workspace.getLeaf("split");await t.openFile(e),this.app.workspace.revealLeaf(t),new O.Notice(`Opened saved article: ${e.basename}`)}catch(t){let s=t instanceof Error?t.message:String(t);new O.Notice(`Error opening saved article: ${s}`)}}sanitizeFilename(e){return e.replace(/[/\\:*?"<>|]/g,"").replace(/\s+/g," ").trim().split(" ").slice(0,5).join(" ").substring(0,50)}async handleOpenSavedArticle(e){if(!e.saved){new O.Notice("Article is not saved locally");return}let t=new O.Notice("Opening saved article...",0);try{let s=await this.findSavedArticleFile(e);s?(await this.openSavedArticleFile(s),t.hide()):(await this.updateArticleStatus(e,{saved:!1},!1),e.tags&&(e.tags=e.tags.filter(a=>a.name.toLowerCase()!=="saved")),t.hide(),new O.Notice("Saved article file not found. Article status updated."))}catch(s){t.hide();let a=s instanceof Error?s.message:String(s);new O.Notice(`Error opening saved article: ${a}`)}}async handleOpenInReaderView(e){this.selectedArticle=e,e.read||await this.updateArticleStatus(e,{read:!0},!1);let t=this.app.workspace.getLeavesOfType(oe);if((await Promise.all(t.map(async r=>((0,O.requireApiVersion)("1.7.2")&&await r.loadIfDeferred(),r.view instanceof ge?r.view.isPodcastPlaying():!1)))).some(r=>r))if(this.settings.media.openInSplitView)if(this.articleReaderLeafWhilePodcast&&this.app.workspace.getLeavesOfType(oe).includes(this.articleReaderLeafWhilePodcast))await this.openArticleInSpecificLeaf(e,this.articleReaderLeafWhilePodcast);else{let r=await this.openArticleInNewTab(e);this.articleReaderLeafWhilePodcast=r}else window.open(e.link,"_blank");else this.articleReaderLeafWhilePodcast=null,this.settings.media.openInSplitView?t.length>0?await this.openArticleInSpecificLeaf(e,t[0]):await this.openArticleInNewTab(e):window.open(e.link,"_blank")}verifySavedArticles(){let e=this.getFilteredArticles();this.saver.verifyAllSavedArticles(e)}handleFileDeleted(e){let s=this.getAllArticles().filter(a=>a.saved&&a.savedFilePath===e.path);s.forEach(a=>{a.saved=!1,a.savedFilePath=void 0,a.tags&&(a.tags=a.tags.filter(r=>r.name.toLowerCase()!=="saved"))}),s.length>0&&this.render()}handleFileRenamed(e,t){let a=this.getAllArticles().filter(r=>r.saved&&r.savedFilePath===t);a.forEach(r=>{r.saved=!1,r.savedFilePath=e.path,r.tags&&(r.tags=r.tags.filter(n=>n.name.toLowerCase()!=="saved"))}),a.length>0&&this.render()}getAllArticles(){let e=[];for(let t of this.settings.feeds)e=e.concat(t.items);return e}handlePageChange(e){this.currentFeed&&this.currentFeed.url?this.feedPages[this.currentFeed.url]=e:this.currentFolder&&!["unread","read","saved","starred","videos","podcasts"].includes(this.currentFolder)?this.folderPages[this.currentFolder]=e:this.currentFolder===null&&this.currentFeed===null&&this.currentTag===null?this.allArticlesPage=e:this.currentFolder==="unread"?this.unreadArticlesPage=e:this.currentFolder==="read"?this.readArticlesPage=e:this.currentFolder==="saved"?this.savedArticlesPage=e:this.currentFolder==="starred"&&(this.starredArticlesPage=e),this.render()}handlePageSizeChange(e){this.currentFeed&&this.currentFeed.url?this.feedPageSizes[this.currentFeed.url]=e:this.currentFolder&&!["unread","read","saved","starred","videos","podcasts"].includes(this.currentFolder)?this.folderPageSizes[this.currentFolder]=e:this.currentFolder===null&&this.currentFeed===null&&this.currentTag===null?this.settings.allArticlesPageSize=e:this.currentFolder==="unread"?this.settings.unreadArticlesPageSize=e:this.currentFolder==="read"?this.settings.readArticlesPageSize=e:this.currentFolder==="saved"?this.settings.savedArticlesPageSize=e:this.currentFolder==="starred"&&(this.settings.starredArticlesPageSize=e),this.render()}getAllFilteredArticles(){let e=[];if(this.currentFeed){let t=this.currentFeed.maxItemsLimit||this.settings.maxItems;e=this.currentFeed.items.slice(0,t)}else if(this.currentFolder==="starred")for(let t of this.settings.feeds)e=e.concat(t.items.filter(s=>s.starred).map(s=>({...s,feedTitle:t.title,feedUrl:t.url})));else if(this.currentFolder==="unread")for(let t of this.settings.feeds)e=e.concat(t.items.filter(s=>!s.read).map(s=>({...s,feedTitle:t.title,feedUrl:t.url})));else if(this.currentFolder==="read")for(let t of this.settings.feeds)e=e.concat(t.items.filter(s=>s.read).map(s=>({...s,feedTitle:t.title,feedUrl:t.url})));else if(this.currentFolder==="saved")for(let t of this.settings.feeds)e=e.concat(t.items.filter(s=>s.saved).map(s=>({...s,feedTitle:t.title,feedUrl:t.url})));else if(this.currentFolder==="videos")for(let t of this.settings.feeds)e=e.concat(t.items.filter(s=>s.mediaType==="video").map(s=>({...s,feedTitle:t.title,feedUrl:t.url})));else if(this.currentFolder==="podcasts")for(let t of this.settings.feeds)e=e.concat(t.items.filter(s=>s.mediaType==="podcast").map(s=>({...s,feedTitle:t.title,feedUrl:t.url})));else if(this.currentTag)for(let t of this.settings.feeds)e=e.concat(t.items.filter(s=>s.tags&&s.tags.some(a=>a.name===this.currentTag)).map(s=>({...s,feedTitle:t.title,feedUrl:t.url})));else if(this.currentFolder){let t=this.getAllDescendantFolders(this.currentFolder);for(let s of this.settings.feeds)s.folder&&t.includes(s.folder)&&(e=e.concat(s.items.map(a=>({...a,feedTitle:s.title,feedUrl:s.url}))))}else for(let t of this.settings.feeds)e=e.concat(t.items.map(s=>({...s,feedTitle:t.title,feedUrl:t.url})));if(this.settings.articleFilter.type==="age"&&typeof this.settings.articleFilter.value=="number"&&this.settings.articleFilter.value>0){let t=Date.now()-this.settings.articleFilter.value;e=e.filter(s=>new Date(s.pubDate).getTime()>t)}return this.settings.articleSort==="oldest"?e.sort((t,s)=>new Date(t.pubDate).getTime()-new Date(s.pubDate).getTime()):e.sort((t,s)=>new Date(s.pubDate).getTime()-new Date(t.pubDate).getTime()),e}getCurrentPageSize(){return this.currentFeed&&this.currentFeed.url?this.feedPageSizes[this.currentFeed.url]||this.settings.allArticlesPageSize:this.currentFolder&&!["unread","read","saved","starred","videos","podcasts"].includes(this.currentFolder)?this.folderPageSizes[this.currentFolder]||this.settings.allArticlesPageSize:this.currentFolder===null&&this.currentFeed===null&&this.currentTag===null?this.settings.allArticlesPageSize:this.currentFolder==="unread"?this.settings.unreadArticlesPageSize:this.currentFolder==="read"?this.settings.readArticlesPageSize:this.currentFolder==="saved"?this.settings.savedArticlesPageSize:this.currentFolder==="starred"?this.settings.starredArticlesPageSize:this.settings.allArticlesPageSize}};var X=require("obsidian");var me=require("obsidian");var W=require("obsidian");function te(o){if(!o)return!1;let i=o.slice(0,2048).toLowerCase();return i.includes("<rss")||i.includes("<feed")||i.includes("<rdf:rdf")||i.includes("<rdf")||i.includes('xmlns="http://purl.org/rss/1.0/"')||i.includes("xmlns:rdf=")}async function zt(o){try{let i=await(0,W.requestUrl)({url:o,method:"GET",headers:{"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36",Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"}});if(!i.text)return null;if(o.includes("feeds.feedburner.com")){let s=o.match(/feeds\.feedburner\.com\/([^/?]+)/);if(s){let a=s[1],r=[`https://feeds.feedburner.com/${a}?format=xml`,`https://feeds.feedburner.com/${a}?fmt=xml`,`https://feeds.feedburner.com/${a}?type=xml`,`https://feeds.feedburner.com/${a}/feed`,`https://feeds.feedburner.com/${a}/rss`,`https://feeds.feedburner.com/${a}/atom`,`https://feeds.feedburner.com/${a}.xml`,`https://feeds.feedburner.com/${a}/feed.xml`,`https://feeds.feedburner.com/${a}/rss.xml`,`https://feeds.feedburner.com/${a}/atom.xml`];for(let n of r)try{let l=await(0,W.requestUrl)({url:n,method:"GET",headers:{"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36",Accept:"application/rss+xml, application/atom+xml, application/rdf+xml, application/xml, text/xml;q=0.9, */*;q=0.8"}});if(l.text&&(l.text.includes("<rss")||l.text.includes("<feed")||l.text.includes("<channel")))return n}catch(l){continue}}}let e=i.text.match(/<link[^>]+(?:type="application\/rss\+xml"|type="application\/atom\+xml"|type="application\/rdf\+xml"|type="application\/xml")[^>]+href="([^"]+)"/gi);if(e)for(let s of e){let a=s.match(/href="([^"]+)"/);if(a){let r=a[1];if(r.startsWith("/")){let n=new URL(o);r=`${n.protocol}//${n.host}${r}`}else r.startsWith("http")||(r=`${o}/${r}`);return r}}let t=[/<a[^>]+href="([^"]*feed[^"]*)"[^>]*>/gi,/<a[^>]+href="([^"]*rss[^"]*)"[^>]*>/gi,/<a[^>]+href="([^"]*atom[^"]*)"[^>]*>/gi,/<a[^>]+href="([^"]*rdf[^"]*)"[^>]*>/gi,/<a[^>]+href="([^"]*xml[^"]*)"[^>]*>/gi];for(let s of t){let a=i.text.match(s);if(a)for(let r of a){let n=r.match(/href="([^"]+)"/);if(n){let l=n[1];if(l.startsWith("/")){let d=new URL(o);l=`${d.protocol}//${d.host}${l}`}else l.startsWith("http")||(l=`${o}/${l}`);if(l===o)continue;return l}}}}catch(i){}return null}async function pt(o){let i=W.Platform.isAndroidApp;async function e(t){if(t.includes("feeds.feedburner.com")){let a=t.replace(/^http:\/\//i,"https://").match(/feeds\.feedburner\.com\/([^/?]+)/);if(a){let r=a[1],n=[`https://feeds.feedburner.com/${r}?format=xml`,`https://feeds.feedburner.com/${r}?fmt=xml`,`https://feeds.feedburner.com/${r}?type=xml`,`https://feeds.feedburner.com/${r}`];for(let l of n)try{let d=await(0,W.requestUrl)({url:l,method:"GET",headers:{"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36",Accept:"application/rss+xml, application/xml, application/atom+xml, text/xml;q=0.9, */*;q=0.8"}});if(d.text&&te(d.text))return d.text;throw new Error("Not a valid RSS/Atom feed")}catch(d){continue}}}try{let s=t,a=await(0,W.requestUrl)({url:s,method:"GET",headers:{"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Feedbro/4.0",Accept:"application/rss+xml, application/atom+xml, application/rdf+xml, application/xml, text/xml;q=0.9, */*;q=0.8"}});if(!a.text)throw new Error("Empty response from feed");if(te(a.text)){if(!/<item\b[\s\S]*?<\/item>/i.test(a.text)){let l=a.text.match(/<atom:link[^>]*href=["']([^"']+)["'][^>]*>/i),d=a.text.match(/<channel[^>]*>[\s\S]*?<link[^>]*>([^<]+)<\/link>/i),c=(l==null?void 0:l[1])||(d==null?void 0:d[1])||"";if(c&&/arxiv\.org\//i.test(c))try{let u=await(0,W.requestUrl)({url:c,method:"GET",headers:{"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Feedbro/4.0",Accept:"application/rss+xml, application/atom+xml, application/rdf+xml, application/xml, text/xml;q=0.9, */*;q=0.8"}});if(u.text&&te(u.text))return u.text}catch(u){}}return a.text}let r=t.startsWith("http://")?t.replace(/^http:\/\//i,"https://"):t.startsWith("https://")?t.replace(/^https:\/\//i,"http://"):"";if(r)try{let n=await(0,W.requestUrl)({url:r,method:"GET",headers:{"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Feedbro/4.0",Accept:"application/rss+xml, application/atom+xml, application/rdf+xml, application/xml, text/xml;q=0.9, */*;q=0.8"}});if(n.text&&te(n.text))return n.text}catch(n){}if(a.text.includes("<?php")||a.text.includes("WordPress")||a.text.includes("wp-blog-header.php")){console.warn("Received php file instead of RSS feed, trying alternative URLs...");let n=s.replace(/\/feed\/?$/,""),l=[`${n}/feed/rss/`,`${n}/feed/rss2/`,`${n}/feed/atom/`,`${n}/rss/`,`${n}/rss.xml`,`${n}/feed.xml`,`${n}/index.php/feed/`,`${n}/?feed=rss2`,`${n}/?feed=rss`,`${n}/?feed=atom`,`${n}/wp-feed.php`,`${n}/feed/feed/`,`${n}/feed/rdf/`,`${n}/?feed=rss2&paged=1`,`${n}/?feed=rss&paged=1`,`${n}/feed`,`${n}/rss`,`${n}/rss.xml`,`${n}/index.rss`,`${n}/index.xml`,`${n}/index.php?feed=rss2`,`${n}/index.php?feed=rss`,`${n}/index.php?feed=atom`];for(let c of l)try{let u=await(0,W.requestUrl)({url:c,method:"GET",headers:{"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Feedbro/4.0",Accept:"application/rss+xml, application/atom+xml, application/rdf+xml, application/xml, text/xml;q=0.9, */*;q=0.8"}});if(u.text&&te(u.text))return u.text;throw new Error("Not a valid RSS/Atom feed")}catch(u){continue}let d=await zt(n)||(n.includes("arxiv.org")?n.replace("export.arxiv.org","rss.arxiv.org"):null);if(d)try{let c=await(0,W.requestUrl)({url:d,method:"GET",headers:{"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Feedbro/4.0",Accept:"application/rss+xml, application/atom+xml, application/rdf+xml, application/xml, text/xml;q=0.9, */*;q=0.8"}});if(c.text&&te(c.text))return c.text;throw new Error("Not a valid RSS/Atom feed")}catch(c){}throw new Error("All alternative feed URLs failed, received PHP file instead of RSS feed")}throw new Error("Not a valid RSS/Atom feed")}catch(s){console.warn(`[RSS dashboard] direct fetch failed for ${t}, trying AllOrigins proxy...`,s);try{let a=`https://api.allorigins.win/get?url=${encodeURIComponent(t)}`,r=await(0,W.requestUrl)({url:a,method:"GET"}),n=JSON.parse(r.text);if(!n.contents)throw new Error("No contents from AllOrigins");if(te(n.contents))return n.contents;throw new Error("Not a valid RSS/Atom feed")}catch(a){console.error(`[RSS dashboard] AllOrigins proxy fetch failed for ${t}:`,a);try{let r=`https://api.allorigins.win/raw?url=${encodeURIComponent(t)}`,n=await(0,W.requestUrl)({url:r,method:"GET"});if(n.text&&te(n.text))return n.text;throw new Error("AllOrigins raw returned non-feed")}catch(r){}if(!i){try{let r=`https://api.codetabs.com/v1/proxy/?quest=${encodeURIComponent(t)}`,n=await(0,W.requestUrl)({url:r,method:"GET"});if(n.text&&te(n.text))return n.text;throw new Error("Not a valid RSS/Atom feed")}catch(r){console.warn("[RSS dashboard] codetabs proxy failed",r)}try{let r=`https://cors.isomorphic-git.org/${t}`,n=await(0,W.requestUrl)({url:r,method:"GET"});if(n.text&&te(n.text))return n.text;throw new Error("Not a valid RSS/Atom feed")}catch(r){console.warn("[RSS dashboard] isomorphic-git proxy failed",r)}try{let r=`https://thingproxy.freeboard.io/fetch/${encodeURIComponent(t)}`,n=await(0,W.requestUrl)({url:r,method:"GET"});if(n.text&&te(n.text))return n.text;throw new Error("Not a valid RSS/Atom feed")}catch(r){console.warn("[RSS dashboard] thingproxy failed",r)}try{let r=await zt(t);if(r&&r!==t){let n=await(0,W.requestUrl)({url:r,method:"GET",headers:{"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Feedbro/4.0",Accept:"application/rss+xml, application/xml, application/atom+xml, text/xml;q=0.9, */*;q=0.8"}});if(n.text&&te(n.text))return n.text;throw new Error("Not a valid RSS/Atom feed")}}catch(r){console.warn("[RSS dashboard] discoverFeedUrl proxy fetch failed",r)}}throw new Error(`Could not fetch a valid RSS/Atom feed from ${t}`)}}}try{return await e(o)}catch(t){if(i)throw t;try{let s=`https://api.codetabs.com/v1/proxy/?quest=${encodeURIComponent(o)}`,a=await(0,W.requestUrl)({url:s,method:"GET",headers:{Accept:"application/rss+xml, application/atom+xml, application/rdf+xml, application/xml, text/xml;q=0.9, */*;q=0.8"}});if(a.text&&te(a.text))return a.text;throw new Error("First proxy blocked by Cloudflare")}catch(s){try{let a=`https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(o)}`,r=await(0,W.requestUrl)({url:a,method:"GET"}),n=JSON.parse(r.text);if(n.status==="ok"&&n.feed){let l=n.feed,d=n.items||[],c=`<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0">
<channel>
    <title>${l.title||"Unknown feed"}</title>
    <description>${l.description||""}</description>
    <link>${l.link||""}</link>
    <language>${l.language||"en"}</language>`;return l.image&&(c+=`
    <image>
        <url>${l.image}</url>
        <title>${l.title||"Unknown feed"}</title>
        <link>${l.link||""}</link>
    </image>`),d.forEach(u=>{c+=`
    <item>
        <title>${u.title||""}</title>
        <link>${u.link||""}</link>
        <description><![CDATA[${u.description||""}]]></description>
        <pubDate>${u.pubDate||new Date().toISOString()}</pubDate>
        <guid>${u.link||""}</guid>
    </item>`}),c+=`
</channel>
</rss>`,c}else throw new Error("RSS2JSON returned error: "+(n.message||"Unknown error"))}catch(a){throw t}}}}var mt=class{parseXML(i){return new DOMParser().parseFromString(i,"text/xml")}detectEncoding(i){let e=i.match(/encoding=["']([^"']+)["']/);return e?e[1]:"UTF-8"}getTextContent(i,e){var a;if(!i)return"";let t=null;if(e.includes("\\:"))t=i.querySelector(e);else if(e.includes(":")){let r=e.split(":");if(r.length===2){let[n,l]=r;try{t=i.querySelector(`${n}\\:${l}`)}catch(d){try{let c=i.getElementsByTagNameNS("*",l);c.length>0&&(t=c[0])}catch(c){try{t=i.querySelector(l)}catch(u){t=i.querySelector(`*[local-name()="${l}"]`)}}}if(!t&&n==="content"&&l==="encoded"){let d=["content\\:encoded","content:encoded",'*[local-name()="encoded"]',"encoded"];for(let c of d)try{if(t=i.querySelector(c),t)break}catch(u){continue}}}}else if(t=i.querySelector(e),!t){let r=i.getElementsByTagName(e);if(r.length>0)t=r[0];else if(i.getElementsByTagNameNS){let n=i.getElementsByTagNameNS("*",e);n.length>0&&(t=n[0])}}if(!t)return"";let s=((a=t.textContent)==null?void 0:a.trim())||"";return s?this.sanitizeCDATA(s):""}sanitizeCDATA(i){if(!i)return"";let e=i.replace(/<!\[CDATA\[/g,"").replace(/\]\]>/g,"").trim();return e=this.decodeHtmlEntities(e),e=e.replace(/\s+/g," ").trim(),e}decodeHtmlEntities(i){return i?i.replace(/&nbsp;/g," ").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&#x27;/g,"'").replace(/&#x2F;/g,"/").replace(/&#8230;/g,"...").replace(/&#8217;/g,"\u2019").replace(/&#8216;/g,"\u2018").replace(/&#8220;/g,"\u201C").replace(/&#8221;/g,"\u201D").replace(/&#8211;/g,"\u2013").replace(/&#8212;/g,"\u2014").replace(/&#038;/g,"&").replace(/&#x26;/g,"&").replace(/&#x3c;/g,"<").replace(/&#x3e;/g,">").replace(/&#x22;/g,'"').replace(/&#x27;/g,"'").replace(/&#x2f;/g,"/").replace(/&apos;/g,"'").replace(/&lsquo;/g,"\u2018").replace(/&rsquo;/g,"\u2019").replace(/&ldquo;/g,"\u201C").replace(/&rdquo;/g,"\u201D").replace(/&ndash;/g,"\u2013").replace(/&mdash;/g,"\u2014").replace(/&hellip;/g,"...").replace(/&copy;/g,"\xA9").replace(/&reg;/g,"\xAE").replace(/&trade;/g,"\u2122").replace(/&deg;/g,"\xB0").replace(/&plusmn;/g,"\xB1").replace(/&times;/g,"\xD7").replace(/&divide;/g,"\xF7").replace(/&frac12;/g,"\xBD").replace(/&frac14;/g,"\xBC").replace(/&frac34;/g,"\xBE").replace(/&sup1;/g,"\xB9").replace(/&sup2;/g,"\xB2").replace(/&sup3;/g,"\xB3").replace(/&micro;/g,"\xB5").replace(/&para;/g,"\xB6").replace(/&middot;/g,"\xB7").replace(/&bull;/g,"\u2022").replace(/&dagger;/g,"\u2020").replace(/&Dagger;/g,"\u2021").replace(/&permil;/g,"\u2030").replace(/&lsaquo;/g,"\u2039").replace(/&rsaquo;/g,"\u203A").replace(/&euro;/g,"\u20AC").replace(/&pound;/g,"\xA3").replace(/&cent;/g,"\xA2").replace(/&curren;/g,"\xA4").replace(/&yen;/g,"\xA5").replace(/&brvbar;/g,"\xA6").replace(/&sect;/g,"\xA7").replace(/&uml;/g,"\xA8").replace(/&ordf;/g,"\xAA").replace(/&laquo;/g,"\xAB").replace(/&not;/g,"\xAC").replace(/&shy;/g,"\xAD").replace(/&macr;/g,"\xAF").replace(/&ordm;/g,"\xBA").replace(/&raquo;/g,"\xBB").replace(/&frac14;/g,"\xBC").replace(/&frac12;/g,"\xBD").replace(/&frac34;/g,"\xBE").replace(/&iquest;/g,"\xBF").replace(/&Agrave;/g,"\xC0").replace(/&Aacute;/g,"\xC1").replace(/&Acirc;/g,"\xC2").replace(/&Atilde;/g,"\xC3").replace(/&Auml;/g,"\xC4").replace(/&Aring;/g,"\xC5").replace(/&AElig;/g,"\xC6").replace(/&Ccedil;/g,"\xC7").replace(/&Egrave;/g,"\xC8").replace(/&Eacute;/g,"\xC9").replace(/&Ecirc;/g,"\xCA").replace(/&Euml;/g,"\xCB").replace(/&Igrave;/g,"\xCC").replace(/&Iacute;/g,"\xCD").replace(/&Icirc;/g,"\xCE").replace(/&Iuml;/g,"\xCF").replace(/&ETH;/g,"\xD0").replace(/&Ntilde;/g,"\xD1").replace(/&Ograve;/g,"\xD2").replace(/&Oacute;/g,"\xD3").replace(/&Ocirc;/g,"\xD4").replace(/&Otilde;/g,"\xD5").replace(/&Ouml;/g,"\xD6").replace(/&times;/g,"\xD7").replace(/&Oslash;/g,"\xD8").replace(/&Ugrave;/g,"\xD9").replace(/&Uacute;/g,"\xDA").replace(/&Ucirc;/g,"\xDB").replace(/&Uuml;/g,"\xDC").replace(/&Yacute;/g,"\xDD").replace(/&THORN;/g,"\xDE").replace(/&szlig;/g,"\xDF").replace(/&agrave;/g,"\xE0").replace(/&aacute;/g,"\xE1").replace(/&acirc;/g,"\xE2").replace(/&atilde;/g,"\xE3").replace(/&auml;/g,"\xE4").replace(/&aring;/g,"\xE5").replace(/&aelig;/g,"\xE6").replace(/&ccedil;/g,"\xE7").replace(/&egrave;/g,"\xE8").replace(/&eacute;/g,"\xE9").replace(/&ecirc;/g,"\xEA").replace(/&euml;/g,"\xEB").replace(/&igrave;/g,"\xEC").replace(/&iacute;/g,"\xED").replace(/&icirc;/g,"\xEE").replace(/&iuml;/g,"\xEF").replace(/&eth;/g,"\xF0").replace(/&ntilde;/g,"\xF1").replace(/&ograve;/g,"\xF2").replace(/&oacute;/g,"\xF3").replace(/&ocirc;/g,"\xF4").replace(/&otilde;/g,"\xF5").replace(/&ouml;/g,"\xF6").replace(/&divide;/g,"\xF7").replace(/&oslash;/g,"\xF8").replace(/&ugrave;/g,"\xF9").replace(/&uacute;/g,"\xFA").replace(/&ucirc;/g,"\xFB").replace(/&uuml;/g,"\xFC").replace(/&yacute;/g,"\xFD").replace(/&thorn;/g,"\xFE").replace(/&yuml;/g,"\xFF").replace(/&#(\d+);/g,(t,s)=>{let a=parseInt(s,10);return a>=0&&a<=1114111?String.fromCodePoint(a):t}).replace(/&#x([0-9a-fA-F]+);/g,(t,s)=>{let a=parseInt(s,16);return a>=0&&a<=1114111?String.fromCodePoint(a):t}):""}getAttribute(i,e,t){let s=i==null?void 0:i.querySelector(e);return(s==null?void 0:s.getAttribute(t))||""}getTextContentWithMultipleSelectors(i,e){var t;if(!i)return"";for(let s of e)try{let a=i.querySelector(s);if(a&&((t=a.textContent)!=null&&t.trim()))return this.sanitizeCDATA(a.textContent.trim())}catch(a){continue}return""}getTextContentWithNamespace(i,e,t){var a;let s=i==null?void 0:i.querySelector(`${e}\\:${t}`);return((a=s==null?void 0:s.textContent)==null?void 0:a.trim())||""}validateFeedStructure(i){var l;if(i.querySelector("rss")||i.querySelector("feed"))return!0;let s=i.documentElement;return!!(s&&(s.getAttribute("xmlns:rdf")||((l=s.getAttribute("xmlns"))==null?void 0:l.includes("rdf")))||i.querySelector("channel")||i.querySelector("item"))}sanitizeText(i){if(!i)return"";let e=i.replace(/<[^>]*>/g,"");return e=this.decodeHtmlEntities(e),e.replace(/\s+/g," ").trim()}convertAppUrls(i){return i&&i.startsWith("app://")?i.replace("app://","https://"):i}extractImageFromContent(i){if(!i)return"";try{let e=i.match(/<img[^>]+src=["']([^"']+)["'][^>]*>/i),t=e?e[1]:"";return this.convertAppUrls(t)}catch(e){return""}}transformSageUrl(i){if(i.includes("journals.sagepub.com")){if(i.includes("/doi/abs/"))return i.replace("/doi/abs/","/doi/full/");if(i.includes("/doi/")&&!i.includes("/doi/full/"))return i.replace("/doi/","/doi/full/")}return i}parseRSS(i){let e=i.querySelector("channel");if(!e)throw new Error("Invalid rss feed: no channel element found");let t=this.getTextContent(e,"title"),s=this.getTextContent(e,"description"),a=this.getTextContent(e,"link"),r=this.getTextContentWithMultipleSelectors(e,["author","dc\\:creator","dc:creator",'*[local-name()="creator"]']),n=e.querySelector("image"),l=n?{url:this.getTextContent(n,"url")}:void 0,d=e.querySelector("itunes\\:image"),c=d?{url:d.getAttribute("href")||""}:void 0,u=d&&d.getAttribute("href")||"",g=n?this.getTextContent(n,"url"):"",m=[];return e.querySelectorAll("item").forEach(h=>{let v=this.getTextContent(h,"title"),y=this.getTextContent(h,"link");y=this.transformSageUrl(y);let w=this.getTextContent(h,"description"),E=this.getTextContent(h,"pubDate"),T=this.getTextContent(h,"guid")||y;(w==="null"||w==="")&&(w="");let x=this.getTextContent(h,"pubYear"),S=this.getTextContent(h,"volume"),b=this.getTextContent(h,"issue"),C=this.getTextContent(h,"startPage"),A=this.getTextContent(h,"endPage"),F=this.getTextContent(h,"fileSize"),D=this.getTextContent(h,"authors"),L=x||S||b||C||A||F||D?{pubYear:x,volume:S,issue:b,startPage:C,endPage:A,fileSize:F,authors:D}:void 0,M=D||this.getTextContentWithMultipleSelectors(h,["author","dc\\:creator","dc:creator",'*[local-name()="creator"]']),U=this.getTextContentWithMultipleSelectors(h,["content\\:encoded","content:encoded",'*[local-name()="encoded"]',"encoded"])||w,_=h.querySelector("enclosure"),G=_?{url:_.getAttribute("url")||"",type:_.getAttribute("type")||"",length:_.getAttribute("length")||""}:void 0,$={duration:this.getTextContent(h,"itunes\\:duration"),explicit:this.getTextContent(h,"itunes\\:explicit"),image:{href:this.getAttribute(h,"itunes\\:image","href")},category:this.getTextContent(h,"itunes\\:category"),summary:this.getTextContent(h,"itunes\\:summary"),episodeType:this.getTextContent(h,"itunes\\:episodeType"),season:this.getTextContent(h,"itunes\\:season"),episode:this.getTextContent(h,"itunes\\:episode")},z=h.querySelector("image"),Q=z?{url:this.getTextContent(z,"url")}:void 0,V="",Y=h.querySelector("media\\:content");if(Y){let R=Y.getAttribute("url");R&&(V=R)}let J="";!Q&&!V&&(J=this.extractImageFromContent(U||w||"")),m.push({title:v,link:y,description:w,pubDate:E,guid:T,author:M,content:U,enclosure:G,itunes:$,image:Q||(V?{url:V}:void 0)||(J?{url:J}:void 0),category:this.getTextContent(h,"category"),ieee:L})}),{title:t,description:s,link:a,author:r,image:c||l,items:m,type:"rss",feedItunesImage:u,feedImageUrl:g}}parseRSS1(i){let e=i.querySelector("channel");if(!e)throw new Error("Invalid rss 1.0 feed: no channel element found");let t=this.getTextContent(e,"title"),s=this.getTextContent(e,"description"),a=this.getTextContent(e,"link"),r=this.getTextContent(e,"dc:creator")||this.getTextContent(e,"dc:publisher"),n,l=e.querySelector("image");if(l){let u=l.getAttribute("rdf:resource");if(u)n={url:this.convertAppUrls(u)};else{let g=this.getTextContent(l,"url");g&&(n={url:this.convertAppUrls(g)})}}let d=[];return Array.from(i.getElementsByTagName("item")).forEach((u,g)=>{let m=u.getAttribute("rdf:about")||this.getTextContent(u,"guid")||this.getTextContent(u,"link")||this.getTextContent(u,"prism:url"),f=this.getTextContent(u,"title")||this.getTextContent(u,"dc:title"),p=this.getTextContent(u,"link")||this.getTextContent(u,"prism:url");p=this.transformSageUrl(p);let h=this.getTextContent(u,"description")||this.getTextContent(u,"content:encoded"),v=this.getTextContent(u,"dc:date")||this.getTextContent(u,"pubDate"),y=u.querySelectorAll("dc\\:creator"),w="";y.length>0?w=Array.from(y).map(T=>{var x;return(x=T.textContent)==null?void 0:x.trim()}).filter(T=>T).join(", "):w=this.getTextContent(u,"dc:creator")||"";let E=this.getTextContentWithMultipleSelectors(u,["content\\:encoded","content:encoded",'*[local-name()="encoded"]',"encoded"])||h;d.push({title:f||"Untitled",link:p||"#",description:h||"",pubDate:v||new Date().toISOString(),guid:m||p||`item-${d.length}`,author:w||void 0,content:E||h||"",category:this.getTextContent(u,"category")})}),{title:t||"Unknown feed",description:s||"",link:a||"",author:r||void 0,image:n,items:d,type:"rss",feedItunesImage:"",feedImageUrl:""}}parseAtom(i){let e=i.querySelector("feed");if(!e)throw new Error("Invalid atom feed: no feed element found");let t=this.getTextContent(e,"title"),s=this.getTextContent(e,"subtitle"),a=this.getAttribute(e,'link[rel="alternate"]',"href")||this.getAttribute(e,"link","href"),r=this.getTextContent(e,"author > name"),n=e.querySelector("icon"),l=n?{url:n.textContent||""}:void 0,d=[];return Array.from(e.getElementsByTagName("entry")).forEach((u,g)=>{let m=this.getTextContent(u,"title"),f=this.getAtomEntryLink(u);f=this.transformSageUrl(f);let p=this.getTextContent(u,"summary"),h=this.getTextContent(u,"published")||this.getTextContent(u,"updated"),v=this.getTextContent(u,"id")||f,y=this.getTextContent(u,"author > name"),w=this.getTextContent(u,"content")||p;d.push({title:m,link:f,description:p,pubDate:h,guid:v,author:y,content:w,category:this.getTextContent(u,"category")})}),{title:t,description:s,link:a,author:r,image:l,items:d,type:"atom",feedItunesImage:"",feedImageUrl:""}}parseJSON(i){var e,t,s;try{let a=JSON.parse(i);if(a.version&&a.version.startsWith("https://jsonfeed.org/"))return{title:a.title||"",description:a.description,link:a.home_page_url,author:(t=(e=a.authors)==null?void 0:e[0])==null?void 0:t.name,image:a.icon?{url:a.icon}:void 0,items:((s=a.items)==null?void 0:s.map(r=>{var l,d,c;let n=r.url||"";return n=this.transformSageUrl(n),{title:r.title||"",link:n,description:r.summary||"",pubDate:r.date_published||new Date().toISOString(),guid:r.id||n||"",author:(d=(l=r.authors)==null?void 0:l[0])==null?void 0:d.name,content:r.content_html||r.content_text||"",image:r.image?{url:r.image}:void 0,category:r.category||((c=r.tags)==null?void 0:c[0])||""}}))||[],type:"json",feedItunesImage:"",feedImageUrl:""};throw new Error("Unsupported json feed format")}catch(a){throw new Error(`Failed to parse json feed: ${a instanceof Error?a.message:String(a)}`)}}fallbackParse(i){try{let e=i;e=e.replace(/<\?php[\s\S]*?\?>/gi,""),e=e.replace(/<\?.*?\?>/gi,"");let t=e.match(/<rss[^>]*>/i);if(t){let p=e.indexOf(t[0]);e=e.substring(p)}let s=e.match(/<\/rss>/i);if(s){let p=e.indexOf(s[0])+s[0].length;e=e.substring(0,p)}let a=e.match(/<channel[^>]*>[\s\S]*?<title[^>]*>([^<]+)<\/title>/i),r=a?this.sanitizeCDATA(a[1].trim()):"Unknown feed",n=e.match(/<channel[^>]*>[\s\S]*?<description[^>]*>([\s\S]*?)<\/description>/i),l=n?this.sanitizeCDATA(n[1].trim()):"",d=e.match(/<channel[^>]*>[\s\S]*?<link[^>]*>([^<]+)<\/link>/i),c=d?d[1].trim():"",u=[],g=[],m=/<item[^>]*>([\s\S]*?)<\/item>/gi,f;for(;(f=m.exec(e))!==null;)g.push(f);if(g.length===0){let p=/<item[^>]*>/gi;for(;(f=p.exec(e))!==null;){let h=f.index,v=f[0],y=h+v.length,w=e.substring(y),E=w.match(/<item[^>]*>/i),T=w.match(/<\/channel>/i),x=w.match(/<\/rss>/i),S=w.length;E&&E.index!==void 0&&(S=Math.min(S,E.index)),T&&T.index!==void 0&&(S=Math.min(S,T.index)),x&&x.index!==void 0&&(S=Math.min(S,x.index));let b=w.substring(0,S),C=v+b;g.push([C,b])}}if(g.length===0){let p=/<item[^>]*>([\s\S]*?)<\/item>/gi;for(;(f=p.exec(i))!==null;)g.push(f)}return g.forEach((p,h)=>{let v=p[1],y="",w="",E="",T=v.match(/<title[^>]*>([^<]+)<\/title>/i);if(!T)return;let x=this.sanitizeCDATA(T[1].trim()),S=v.match(/<link[^>]*>([^<]+)<\/link>/i),b=S?S[1].trim():"#";b=this.transformSageUrl(b);let C=v.match(/<description[^>]*>([\s\S]*?)<\/description>/i),A=C?this.sanitizeCDATA(C[1].trim()):"";(A==="null"||A==="")&&(A="");let F=v.match(/<pubDate[^>]*>([^<]+)<\/pubDate>/i);w=F?F[1].trim():new Date().toISOString();let D=v.match(/<guid[^>]*>([^<]+)<\/guid>/i);E=D?D[1].trim():b;let L=[v.match(/<author[^>]*>([^<]+)<\/author>/i),v.match(/<dc:creator[^>]*>([^<]+)<\/dc:creator>/i),v.match(/<dc\\:creator[^>]*>([^<]+)<\/dc\\:creator>/i),v.match(/<dc:creator[^>]*><!\[CDATA\[([^\]]*)\]\]><\/dc:creator>/i),v.match(/<dc\\:creator[^>]*><!\[CDATA\[([^\]]*)\]\]><\/dc\\:creator>/i)];for(let ve of L)if(ve){y=this.sanitizeCDATA(ve[1].trim());break}let M=v.match(/<category[^>]*>([^<]+)<\/category>/i),U=M?this.sanitizeCDATA(M[1].trim()):"",_=v.match(/<pubYear[^>]*>([^<]+)<\/pubYear>/i),G=_?this.sanitizeCDATA(_[1].trim()):"",$=v.match(/<volume[^>]*>([^<]+)<\/volume>/i),z=$?this.sanitizeCDATA($[1].trim()):"",Q=v.match(/<issue[^>]*>([^<]+)<\/issue>/i),V=Q?this.sanitizeCDATA(Q[1].trim()):"",Y=v.match(/<startPage[^>]*>([^<]+)<\/startPage>/i),J=Y?this.sanitizeCDATA(Y[1].trim()):"",R=v.match(/<endPage[^>]*>([^<]+)<\/endPage>/i),K=R?this.sanitizeCDATA(R[1].trim()):"",le=v.match(/<fileSize[^>]*>([^<]+)<\/fileSize>/i),H=le?this.sanitizeCDATA(le[1].trim()):"",se=v.match(/<authors[^>]*>([^<]+)<\/authors>/i),ce=se?this.sanitizeCDATA(se[1].trim()):"",fe=G||z||V||J||K||H||ce?{pubYear:G,volume:z,issue:V,startPage:J,endPage:K,fileSize:H,authors:ce}:void 0;ce&&!y&&(y=ce),u.push({title:x,link:b,description:A,pubDate:w,guid:E,author:y||void 0,content:A,category:U,ieee:fe})}),{title:r,description:l,link:c,author:void 0,image:void 0,items:u,type:"rss",feedItunesImage:"",feedImageUrl:""}}catch(e){throw new Error(`Fallback parsing failed: ${e instanceof Error?e.message:String(e)}`)}}extractRssContent(i){let e="",t=i.match(/<rss[^>]*>[\s\S]*?<\/rss>/i);if(t)e=t[0];else{let s=i.match(/<channel[^>]*>[\s\S]*?<\/channel>/i);if(s)e=`<?xml version="1.0" encoding="UTF-8"?><rss version="2.0">${s[0]}</rss>`;else{let a=i.match(/<item[^>]*>[\s\S]*?<\/item>/gi);if(a&&a.length>0){let r=i.match(/<title[^>]*>([^<]+)<\/title>/i),n=i.match(/<description[^>]*>([\s\S]*?)<\/description>/i),l=i.match(/<link[^>]*>([^<]+)<\/link>/i),d=r?r[1].trim():"Unknown feed",c=n?n[1].trim():"",u=l?l[1].trim():"";e=`<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0">
<channel>
    <title>${d}</title>
    <description>${c}</description>
    <link>${u}</link>
    ${a.join(`
    `)}
</channel>
</rss>`}}}return e||i}preprocessXmlContent(i){let e=i;e=e.replace(/^\uFEFF/,"");let t=e.match(/<\?xml[^>]*\?>/),s="";if(t&&(s=t[0]),e=e.replace(/<\?.*?\?>/g,""),s&&(e=s+e),e=e.trim(),!s){let r=e.match(/<rss[^>]*>/i);if(r){let n=e.indexOf(r[0]);e=e.substring(n)}}let a=e.match(/<\/rss>/i);if(a){let r=e.indexOf(a[0])+a[0].length;e=e.substring(0,r)}return e=e.replace(/<!\[CDATA\[[\s\S]*?\]\]>/g,r=>r.replace(/&/g,"__AMP__")),e=e.replace(/&/g,(r,n,l)=>{let d=l.substring(n+1);return d.match(/^(amp|lt|gt|quot|apos);/)||d.match(/^#\d+;/)||d.match(/^#x[0-9a-fA-F]+;/i)?r:"&amp;"}),e=e.replace(/__AMP__/g,"&"),e.startsWith("<?xml")||(e='<?xml version="1.0" encoding="UTF-8"?>'+e),e}parseString(i){try{if(i.trim().startsWith("{"))return this.parseJSON(i);let e=this.preprocessXmlContent(i.trim()),t=this.parseXML(e);if(t.querySelector("parsererror")){let n=this.extractRssContent(i);if(n!==i)try{let l=this.parseXML(n);if(!l.querySelector("parsererror")&&this.validateFeedStructure(l)){let c=l.documentElement;if(c&&c.tagName.toLowerCase()==="rdf:rdf")return this.parseRSS1(l);if(l.querySelector("rss"))return this.parseRSS(l);if(l.querySelector("feed"))return this.parseAtom(l)}}catch(l){console.error("[RSS dashboard] parseString: Error in fallback extraction",l)}return this.fallbackParse(i)}if(!this.validateFeedStructure(t))return this.fallbackParse(i);let a=t.documentElement;return a&&(a.tagName.toLowerCase()==="rdf:rdf"||a.getAttribute("xmlns")==="http://purl.org/rss/1/")?this.parseRSS1(t):t.querySelector("rss")?this.parseRSS(t):t.querySelector("feed")?this.parseAtom(t):this.fallbackParse(i)}catch(e){console.error("[RSS dashboard] parseString error:",e);try{return this.fallbackParse(i)}catch(t){let s=e instanceof Error?e.message:String(e),a=t instanceof Error?t.message:String(t);throw new Error(`All parsing attempts failed: ${s}. Fallback error: ${a}`)}}}getAtomEntryLink(i){let e=i.querySelector('link[rel="alternate"][type="text/html"]');return(e&&e.getAttribute("href")||(e=i.querySelector('link[rel="alternate"]'),e&&e.getAttribute("href"))||(e=i.querySelector("link[href]"),e&&e.getAttribute("href")))&&e.getAttribute("href")||""}},Je=class{constructor(i,e){this.mediaSettings=i,this.availableTags=e,this.parser=new mt}convertToAbsoluteUrl(i,e){if(!i||!e)return i;if(i.startsWith("app://"))return i.replace("app://","https://");if(i.startsWith("//"))return"https:"+i;if(i.startsWith("http://")||i.startsWith("https://"))return i;try{let t=new URL(e);return i.startsWith("/")?`${t.protocol}//${t.host}${i}`:new URL(i,t).href}catch(t){return i}}decodeHtmlEntities(i){return i?i.replace(/&nbsp;/g," ").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&#x27;/g,"'").replace(/&#x2F;/g,"/").replace(/&#8230;/g,"...").replace(/&#8217;/g,"\u2019").replace(/&#8216;/g,"\u2018").replace(/&#8220;/g,"\u201C").replace(/&#8221;/g,"\u201D").replace(/&#8211;/g,"\u2013").replace(/&#8212;/g,"\u2014").replace(/&#038;/g,"&").replace(/&#x26;/g,"&").replace(/&#x3c;/g,"<").replace(/&#x3e;/g,">").replace(/&#x22;/g,'"').replace(/&#x27;/g,"'").replace(/&#x2f;/g,"/").replace(/&apos;/g,"'").replace(/&lsquo;/g,"\u2018").replace(/&rsquo;/g,"\u2019").replace(/&ldquo;/g,"\u201C").replace(/&rdquo;/g,"\u201D").replace(/&ndash;/g,"\u2013").replace(/&mdash;/g,"\u2014").replace(/&hellip;/g,"...").replace(/&copy;/g,"\xA9").replace(/&reg;/g,"\xAE").replace(/&trade;/g,"\u2122").replace(/&deg;/g,"\xB0").replace(/&plusmn;/g,"\xB1").replace(/&times;/g,"\xD7").replace(/&divide;/g,"\xF7").replace(/&frac12;/g,"\xBD").replace(/&frac14;/g,"\xBC").replace(/&frac34;/g,"\xBE").replace(/&sup1;/g,"\xB9").replace(/&sup2;/g,"\xB2").replace(/&sup3;/g,"\xB3").replace(/&micro;/g,"\xB5").replace(/&para;/g,"\xB6").replace(/&middot;/g,"\xB7").replace(/&bull;/g,"\u2022").replace(/&dagger;/g,"\u2020").replace(/&Dagger;/g,"\u2021").replace(/&permil;/g,"\u2030").replace(/&lsaquo;/g,"\u2039").replace(/&rsaquo;/g,"\u203A").replace(/&euro;/g,"\u20AC").replace(/&pound;/g,"\xA3").replace(/&cent;/g,"\xA2").replace(/&curren;/g,"\xA4").replace(/&yen;/g,"\xA5").replace(/&brvbar;/g,"\xA6").replace(/&sect;/g,"\xA7").replace(/&uml;/g,"\xA8").replace(/&ordf;/g,"\xAA").replace(/&laquo;/g,"\xAB").replace(/&not;/g,"\xAC").replace(/&shy;/g,"\xAD").replace(/&macr;/g,"\xAF").replace(/&ordm;/g,"\xBA").replace(/&raquo;/g,"\xBB").replace(/&frac14;/g,"\xBC").replace(/&frac12;/g,"\xBD").replace(/&frac34;/g,"\xBE").replace(/&iquest;/g,"\xBF").replace(/&Agrave;/g,"\xC0").replace(/&Aacute;/g,"\xC1").replace(/&Acirc;/g,"\xC2").replace(/&Atilde;/g,"\xC3").replace(/&Auml;/g,"\xC4").replace(/&Aring;/g,"\xC5").replace(/&AElig;/g,"\xC6").replace(/&Ccedil;/g,"\xC7").replace(/&Egrave;/g,"\xC8").replace(/&Eacute;/g,"\xC9").replace(/&Ecirc;/g,"\xCA").replace(/&Euml;/g,"\xCB").replace(/&Igrave;/g,"\xCC").replace(/&Iacute;/g,"\xCD").replace(/&Icirc;/g,"\xCE").replace(/&Iuml;/g,"\xCF").replace(/&ETH;/g,"\xD0").replace(/&Ntilde;/g,"\xD1").replace(/&Ograve;/g,"\xD2").replace(/&Oacute;/g,"\xD3").replace(/&Ocirc;/g,"\xD4").replace(/&Otilde;/g,"\xD5").replace(/&Ouml;/g,"\xD6").replace(/&times;/g,"\xD7").replace(/&Oslash;/g,"\xD8").replace(/&Ugrave;/g,"\xD9").replace(/&Uacute;/g,"\xDA").replace(/&Ucirc;/g,"\xDB").replace(/&Uuml;/g,"\xDC").replace(/&Yacute;/g,"\xDD").replace(/&THORN;/g,"\xDE").replace(/&szlig;/g,"\xDF").replace(/&agrave;/g,"\xE0").replace(/&aacute;/g,"\xE1").replace(/&acirc;/g,"\xE2").replace(/&atilde;/g,"\xE3").replace(/&auml;/g,"\xE4").replace(/&aring;/g,"\xE5").replace(/&aelig;/g,"\xE6").replace(/&ccedil;/g,"\xE7").replace(/&egrave;/g,"\xE8").replace(/&eacute;/g,"\xE9").replace(/&ecirc;/g,"\xEA").replace(/&euml;/g,"\xEB").replace(/&igrave;/g,"\xEC").replace(/&iacute;/g,"\xED").replace(/&icirc;/g,"\xEE").replace(/&iuml;/g,"\xEF").replace(/&eth;/g,"\xF0").replace(/&ntilde;/g,"\xF1").replace(/&ograve;/g,"\xF2").replace(/&oacute;/g,"\xF3").replace(/&ocirc;/g,"\xF4").replace(/&otilde;/g,"\xF5").replace(/&ouml;/g,"\xF6").replace(/&divide;/g,"\xF7").replace(/&oslash;/g,"\xF8").replace(/&ugrave;/g,"\xF9").replace(/&uacute;/g,"\xFA").replace(/&ucirc;/g,"\xFB").replace(/&uuml;/g,"\xFC").replace(/&yacute;/g,"\xFD").replace(/&thorn;/g,"\xFE").replace(/&yuml;/g,"\xFF").replace(/&#(\d+);/g,(t,s)=>{let a=parseInt(s,10);return a>=0&&a<=1114111?String.fromCodePoint(a):t}).replace(/&#x([0-9a-fA-F]+);/g,(t,s)=>{let a=parseInt(s,16);return a>=0&&a<=1114111?String.fromCodePoint(a):t}):""}convertRelativeUrlsInContent(i,e){if(!i||!e)return i;try{return i=i.replace(/app:\/\//g,"https://"),i=i.replace(/<img([^>]+)src=["']([^"']+)["']/gi,(t,s,a)=>{let r=this.parser.decodeHtmlEntities(a),n=this.convertToAbsoluteUrl(r,e);return`<img${s}src="${n}"`}),i=i.replace(/<source([^>]+)srcset=["']([^"']+)["']/gi,(t,s,a)=>{let r=a.split(",").map(n=>{let l=n.trim(),d=l.match(/^([^\s]+)(\s+\d+w)?$/);if(d){let c=d[1],u=d[2]||"",g=this.parser.decodeHtmlEntities(c);return this.convertToAbsoluteUrl(g,e)+u}return l}).join(", ");return`<source${s}srcset="${r}"`}),i=i.replace(/<a([^>]+)href=["']([^"']+)["']/gi,(t,s,a)=>{let r=this.decodeHtmlEntities(a),n=this.convertToAbsoluteUrl(r,e);return`<a${s}href="${n}"`}),i}catch(t){return i}}extractCoverImage(i,e=""){if(!i)return"";try{let s=new DOMParser().parseFromString(i,"text/html"),a=s.querySelector('meta[property="og:image"]');if(a!=null&&a.getAttribute("content")){let d=a.getAttribute("content");if(d&&d.startsWith("http"))return d;if(d&&e)return this.convertToAbsoluteUrl(d,e)}let r=s.querySelector('meta[name="twitter:image"]');if(r!=null&&r.getAttribute("content")){let d=r.getAttribute("content");if(d&&d.startsWith("http"))return d;if(d&&e)return this.convertToAbsoluteUrl(d,e)}let n=s.querySelector("img");if(n!=null&&n.getAttribute("src")){let d=n.getAttribute("src");if(d&&d.startsWith("http"))return d;if(d&&e)return this.convertToAbsoluteUrl(d,e)}let l=s.querySelectorAll("img");for(let d of Array.from(l)){let c=d.getAttribute("src");if(c&&c.startsWith("http")&&(c.endsWith(".jpg")||c.endsWith(".jpeg")||c.endsWith(".png")||c.endsWith(".gif")||c.endsWith(".webp")||c.includes("image")))return c;if(c&&e&&(c.endsWith(".jpg")||c.endsWith(".jpeg")||c.endsWith(".png")||c.endsWith(".gif")||c.endsWith(".webp")||c.includes("image")))return this.convertToAbsoluteUrl(c,e)}}catch(t){}return""}extractPodcastCoverImage(i,e,t){var a,r,n;if((r=(a=i.itunes)==null?void 0:a.image)!=null&&r.href){let l=this.convertToAbsoluteUrl(i.itunes.image.href,t);if(l)return l}if((n=i.image)!=null&&n.url){let l=this.convertToAbsoluteUrl(i.image.url,t);if(l)return l}if(e){let l="";if(typeof e=="string"?l=e:e.url&&(l=e.url),l){let d=this.convertToAbsoluteUrl(l,t);if(d)return d}}let s=this.extractCoverImage(i.content||i.description||"",t);return s||""}extractSummary(i,e=220){if(!i)return"";try{let a=new DOMParser().parseFromString(i,"text/html").body.textContent||"";return a=this.decodeHtmlEntities(a),a=a.replace(/\s+/g," ").trim(),a.length>e&&(a=a.substring(0,e)+"..."),a}catch(t){return""}}async parseFeed(i,e=null){if(!i)throw new Error("Feed url is required");let t=await pt(i),s=this.parser.parseString(t),a=(e==null?void 0:e.title)||s.title||"Unnamed feed",r=e||{title:a,url:i,folder:"Uncategorized",items:[],lastUpdated:Date.now()},n=new Map;e&&e.items.forEach(h=>{n.set(h.guid,h)});let l=[],d=[];s.items.forEach(h=>{var b,C,A,F,D,L,M,U,_,G,$,z,Q,V,Y,J,R,K,le,H,se,ce,fe,ve,De,Be,xe,ie,de;let v=(C=(b=h.enclosure)==null?void 0:b.type)==null?void 0:C.startsWith("audio/"),y=!!(h.link&&h.link.includes(".mp3")),w=v||y,E=v?this.convertToAbsoluteUrl(((A=h.enclosure)==null?void 0:A.url)||"",i):y?this.convertToAbsoluteUrl(h.link||"",i):void 0,T=h.enclosure||(y?{url:this.convertToAbsoluteUrl(h.link||"",i),type:"audio/mpeg",length:""}:void 0),x=this.convertToAbsoluteUrl(h.guid||h.link||"",i),S=n.get(x);if(S){let q=S.coverImage;w?q=this.extractPodcastCoverImage(h,s.image,i)||S.coverImage:q=this.extractCoverImage(h.content||h.description||"",i)||this.convertToAbsoluteUrl(((D=(F=h.itunes)==null?void 0:F.image)==null?void 0:D.href)||((L=h.image)==null?void 0:L.url)||"",i)||(s.image&&typeof s.image=="object"&&s.image.url?this.convertToAbsoluteUrl(s.image.url,i):"")||S.coverImage;let he={...S,title:h.title||S.title,description:this.convertRelativeUrlsInContent(h.description||"",i),content:this.convertRelativeUrlsInContent(h.content||"",i),pubDate:h.pubDate||S.pubDate,author:h.author||s.author||S.author,read:S.read,starred:S.starred,tags:S.tags,saved:S.saved,feedTitle:r.title,coverImage:q,summary:this.extractSummary(h.content||h.description||"")||S.summary,image:this.convertToAbsoluteUrl(((U=(M=h.itunes)==null?void 0:M.image)==null?void 0:U.href)||((_=h.image)==null?void 0:_.url)||((G=s.image)==null?void 0:G.url)||"",i)||S.image,duration:(($=h.itunes)==null?void 0:$.duration)||S.duration,explicit:((z=h.itunes)==null?void 0:z.explicit)==="yes"||S.explicit,category:((Q=h.itunes)==null?void 0:Q.category)||S.category,episodeType:((V=h.itunes)==null?void 0:V.episodeType)||S.episodeType,season:(Y=h.itunes)!=null&&Y.season?Number(h.itunes.season):S.season,episode:(J=h.itunes)!=null&&J.episode?Number(h.itunes.episode):S.episode,enclosure:T||S.enclosure,ieee:h.ieee||S.ieee,audioUrl:E||S.audioUrl,mediaType:w?"podcast":S.mediaType||"article"};d.push(he)}else{let q="";w?(q=this.extractPodcastCoverImage(h,s.image,i),q||(s.feedItunesImage?q=this.convertToAbsoluteUrl(s.feedItunesImage,i):s.feedImageUrl?q=this.convertToAbsoluteUrl(s.feedImageUrl,i):s.image&&typeof s.image=="object"&&s.image.url?q=this.convertToAbsoluteUrl(s.image.url,i):typeof s.image=="string"&&(q=this.convertToAbsoluteUrl(s.image,i))),q||(q=this.extractCoverImage(h.content||h.description||"",i))):q=this.extractCoverImage(h.content||h.description||"",i)||this.convertToAbsoluteUrl(((K=(R=h.itunes)==null?void 0:R.image)==null?void 0:K.href)||((le=h.image)==null?void 0:le.url)||"",i)||(s.image&&typeof s.image=="object"&&s.image.url?this.convertToAbsoluteUrl(s.image.url,i):"");let he=this.convertToAbsoluteUrl(((se=(H=h.itunes)==null?void 0:H.image)==null?void 0:se.href)||((ce=h.image)==null?void 0:ce.url)||((fe=s.image)==null?void 0:fe.url)||"",i);he||(he=this.extractCoverImage(h.content||h.description||"",i));let ye=this.extractSummary(h.content||h.description||""),Ie={title:h.title||"No title",link:this.convertToAbsoluteUrl(h.link||"",i),description:this.convertRelativeUrlsInContent(h.description||"",i),content:this.convertRelativeUrlsInContent(h.content||"",i),pubDate:h.pubDate||new Date().toISOString(),guid:x,read:!1,starred:!1,tags:[],feedTitle:r.title,feedUrl:r.url,coverImage:q,summary:ye,author:h.author||s.author,saved:!1,mediaType:w?"podcast":"article",duration:(ve=h.itunes)==null?void 0:ve.duration,explicit:((De=h.itunes)==null?void 0:De.explicit)==="yes",image:he,category:(Be=h.itunes)==null?void 0:Be.category,episodeType:(xe=h.itunes)==null?void 0:xe.episodeType,season:(ie=h.itunes)!=null&&ie.season?Number(h.itunes.season):void 0,episode:(de=h.itunes)!=null&&de.episode?Number(h.itunes.episode):void 0,enclosure:T,ieee:h.ieee,audioUrl:E};l.push(Ie)}});let c=[];e&&e.items.forEach(h=>{let v=this.convertToAbsoluteUrl(h.guid||h.link||"",i);n.has(v)||c.push(h)}),c.push(...d),c.push(...l),r.items=c,r.lastUpdated=Date.now(),this.applyFeedLimits(r);let u=[s.feedItunesImage,s.feedImageUrl,s.image&&typeof s.image=="object"?s.image.url:"",typeof s.image=="string"?s.image:""].filter(Boolean),g=u.length>0?u[0]:"",m={};r.items.forEach(h=>{h.coverImage&&(m[h.coverImage]=(m[h.coverImage]||0)+1)});let f=r.items.length;Object.entries(m).forEach(([h,v])=>{h&&(h===g||u.includes(h))&&v>=Math.max(2,Math.floor(f*.8))&&r.items.forEach(y=>{y.coverImage===h&&(y.coverImage="")})});let p=ee.detectAndProcessFeed(r);return p.mediaType==="video"&&!(e!=null&&e.folder)?p.folder=this.mediaSettings.defaultYouTubeFolder:p.mediaType==="podcast"&&!(e!=null&&e.folder)&&(p.folder=this.mediaSettings.defaultPodcastFolder),ee.applyMediaTags(p,this.availableTags)}applyFeedLimits(i){if(i.maxItemsLimit&&i.maxItemsLimit>0&&i.items.length>i.maxItemsLimit){let e=i.items.filter(r=>r.read),t=i.items.filter(r=>!r.read);t.sort((r,n)=>new Date(n.pubDate).getTime()-new Date(r.pubDate).getTime());let s=Math.max(0,i.maxItemsLimit-e.length),a=t.slice(0,s);i.items=[...e,...a]}if(i.autoDeleteDuration&&i.autoDeleteDuration>0){let e=new Date;e.setDate(e.getDate()-i.autoDeleteDuration);let t=i.items.filter(a=>a.read),s=i.items.filter(a=>!a.read&&new Date(a.pubDate).getTime()>e.getTime());i.items=[...t,...s]}}async refreshFeed(i){try{return await this.parseFeed(i.url,i)}catch(e){return i}}async refreshAllFeeds(i){let e=[];for(let t of i)try{let s=await this.refreshFeed(t);e.push(s)}catch(s){console.error(`[RSS dashboard] Error refreshing feed ${t.title}:`,s),e.push(t)}return e}};var Ke=class extends me.Modal{constructor(e,t){super(e);this.articles=[];this.isLoading=!0;this.error=null;this.feed=t}onOpen(){let{contentEl:e}=this;this.modalEl.addClasses(["rss-dashboard-modal","rss-dashboard-modal-container","feed-preview-modal"]),e.empty(),this.renderHeader(e),this.loadFeedPreview()}renderHeader(e){let t=e.createDiv({cls:"feed-preview-header"}),s=t.createDiv({cls:"feed-preview-title-section"}),a=s.createDiv({cls:"feed-preview-logo-container"});this.feed.imageUrl?a.createEl("img",{cls:"feed-preview-logo",attr:{src:this.feed.imageUrl}}):a.createDiv({cls:"feed-preview-initials",text:this.getInitials(this.feed.title)});let r=s.createDiv({cls:"feed-preview-title-info"});new me.Setting(r).setName(this.feed.title).setHeading().settingEl.addClass("feed-preview-title"),r.createEl("p",{text:this.feed.url,cls:"feed-preview-url"}),this.feed.summary&&r.createEl("p",{text:this.feed.summary,cls:"feed-preview-summary"});let l=t.createDiv({cls:"feed-preview-meta"});if(this.feed.type){let d=l.createDiv({cls:"feed-preview-type"});d.textContent=this.feed.type}if(this.feed.domain.length>0){let d=l.createDiv({cls:"feed-preview-categories"});this.feed.domain.forEach(c=>{d.createDiv({cls:"feed-preview-category",text:c}).style.setProperty("--tag-color",this.getTagColor(c))})}if(this.feed.tags.length>0){let d=l.createDiv({cls:"feed-preview-tags"});this.feed.tags.forEach(c=>{d.createDiv({cls:"feed-preview-tag",text:c}).style.setProperty("--tag-color",this.getTagColor(c))})}}async loadFeedPreview(){try{this.isLoading=!0,this.error=null;let e=await pt(this.feed.url);this.articles=this.parseFeedXml(e),this.renderContent()}catch(e){this.error=e instanceof Error?e.message:"Unknown error occurred",this.renderError()}finally{this.isLoading=!1}}parseFeedXml(e){try{let s=new DOMParser().parseFromString(e,"text/xml"),a=[],r=s.querySelectorAll("item");return r.length>0?r.forEach((n,l)=>{var v,y,w,E,T,x,S,b,C,A,F,D,L;if(l>=10)return;let d=((y=(v=n.querySelector("title"))==null?void 0:v.textContent)==null?void 0:y.trim())||"",c=((E=(w=n.querySelector("link"))==null?void 0:w.textContent)==null?void 0:E.trim())||"",u=((x=(T=n.querySelector("description"))==null?void 0:T.textContent)==null?void 0:x.trim())||"",g=((b=(S=n.querySelector("pubDate"))==null?void 0:S.textContent)==null?void 0:b.trim())||"",m=((A=(C=n.querySelector("author"))==null?void 0:C.textContent)==null?void 0:A.trim())||((D=(F=n.querySelector("dc\\:creator"))==null?void 0:F.textContent)==null?void 0:D.trim())||"",f="",h=(((L=n.querySelector("content\\:encoded"))==null?void 0:L.textContent)||u).match(/<img[^>]+src=["']([^"']+)["'][^>]*>/i);if(h)f=h[1];else{let M=n.querySelector("media\\:content");if(M){let U=M.getAttribute("url");U&&(f=U)}else{let U=n.querySelector('enclosure[type^="image"]');U&&(f=U.getAttribute("url")||"")}}a.push({title:d,link:c,description:this.sanitizeText(u),pubDate:g,author:m,image:f})}):s.querySelectorAll("entry").forEach((l,d)=>{var p,h,v,y,w,E,T,x,S,b,C,A,F;if(d>=10)return;let c=((h=(p=l.querySelector("title"))==null?void 0:p.textContent)==null?void 0:h.trim())||"",u=((v=l.querySelector("link"))==null?void 0:v.getAttribute("href"))||"",g=((w=(y=l.querySelector("summary"))==null?void 0:y.textContent)==null?void 0:w.trim())||((T=(E=l.querySelector("content"))==null?void 0:E.textContent)==null?void 0:T.trim())||"",m=((S=(x=l.querySelector("published"))==null?void 0:x.textContent)==null?void 0:S.trim())||((C=(b=l.querySelector("updated"))==null?void 0:b.textContent)==null?void 0:C.trim())||"",f=((F=(A=l.querySelector("author > name"))==null?void 0:A.textContent)==null?void 0:F.trim())||"";a.push({title:c,link:u,description:this.sanitizeText(g),pubDate:m,author:f})}),a}catch(t){return[]}}sanitizeText(e){return e?e.replace(/<[^>]*>/g,"").replace(/&nbsp;/g," ").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&#x27;/g,"'").replace(/&#x2F;/g,"/").replace(/\s+/g," ").trim():""}renderError(){let t=this.contentEl.createDiv({cls:"feed-preview-error"});(0,me.setIcon)(t,"alert-triangle"),t.appendText(` Error: ${this.error}`);let s=t.createEl("button",{cls:"mod-cta"});s.textContent="Retry",s.addEventListener("click",()=>{this.loadFeedPreview()})}renderContent(){let e=this.contentEl;if(this.articles.length===0){let n=e.createDiv({cls:"feed-preview-empty"});(0,me.setIcon)(n,"rss"),n.appendText(" No articles found in this feed");return}let t=e.createDiv({cls:"feed-preview-content"}),s=t.createDiv({cls:"feed-preview-articles-header"});new me.Setting(s).setName(`Latest ${this.articles.length} articles`).setHeading().settingEl.addClass("feed-preview-articles-title");let r=t.createDiv({cls:"feed-preview-grid"});this.articles.forEach(n=>{this.renderArticleCard(r,n)})}renderArticleCard(e,t){let s=e.createDiv({cls:"feed-preview-article-card"});if(t.image){let l=s.createDiv({cls:"feed-preview-article-image-container"});l.createEl("img",{cls:"feed-preview-article-image",attr:{src:t.image}}).addEventListener("error",()=>{l.remove()})}let a=s.createDiv({cls:"feed-preview-article-content"});a.createEl("h4",{text:t.title,cls:"feed-preview-article-title"}).addEventListener("click",()=>{window.open(t.link,"_blank")}),t.description&&a.createDiv({text:t.description.length>150?t.description.substring(0,150)+"...":t.description,cls:"feed-preview-article-description"});let n=a.createDiv({cls:"feed-preview-article-meta"});if(t.author){let l=n.createDiv({cls:"feed-preview-article-author"});(0,me.setIcon)(l,"user"),l.appendText(` ${t.author}`)}if(t.pubDate){let l=n.createDiv({cls:"feed-preview-article-date"});(0,me.setIcon)(l,"calendar");let c=new Date(t.pubDate).toLocaleDateString();l.appendText(` ${c}`)}}getInitials(e){let t=e.split(" ");return t.length>1?(t[0][0]+t[1][0]).toUpperCase():t.length===1&&t[0].length>1?(t[0][0]+t[0][1]).toUpperCase():t.length===1&&t[0].length===1?t[0][0].toUpperCase():"NA"}getTagColor(e){let t=0;if(e.length===0)return"hsl(0, 0%, 80%)";for(let a=0;a<e.length;a++)t=e.charCodeAt(a)+((t<<5)-t),t=t&t;return`hsl(${Math.abs(t%360)}, 60%, 75%)`}onClose(){this.contentEl.empty()}};var Ot=[{id:"feed-000",title:"Obsidian Changelog",url:"https://obsidian.md/changelog.xml",imageUrl:"https://obsidian.md/images/obsidian-logo-gradient.svg",domain:["Technology"],subdomain:["Productivity"],area:["PKM"],topic:["Updates"],tags:["obsidian","changelog"],type:"Release Notes",createdAt:"2025-06-25T16:55:00.000Z",summary:"Follow Obsidian updates and improvements.",rating:5},{id:"feed-001",title:"BBC News - World",url:"https://feeds.bbci.co.uk/news/world/rss.xml",imageUrl:"https://www.google.com/s2/favicons?domain=bbc.com&sz=128",domain:["News"],subdomain:["World News"],area:["International"],topic:["General News"],tags:["news","international"],type:"News",createdAt:"2025-06-25T16:55:00.000Z",summary:"Global news coverage from BBC News (World edition).",rating:5},{id:"feed-002",title:"The New York Times - Top Stories",url:"https://rss.nytimes.com/services/xml/rss/nyt/HomePage.xml",imageUrl:"https://www.google.com/s2/favicons?domain=nytimes.com&sz=128",domain:["News"],subdomain:["Top Stories"],area:["U.S. & World"],topic:["Current Events"],tags:["news","politics"],type:"News",createdAt:"2025-06-25T16:55:00.000Z",summary:"Top news stories and breaking news from The New York Times.",rating:5},{id:"feed-003",title:"World History Encyclopedia",url:"http://www.ancient.eu.com/rss/",imageUrl:"https://pbs.twimg.com/profile_images/1365290462383198212/TzOD8oZj_400x400.jpg",domain:["History"],subdomain:["World History"],area:["International"],topic:["General News"],tags:["news","wire"],type:"News",createdAt:"2025-06-25T16:55:00.000Z",summary:"Engaging people with cultural heritage and to improve history education worldwide..",rating:5},{id:"feed-004",title:"Al Jazeera English - News",url:"https://www.aljazeera.com/xml/rss/all.xml",imageUrl:"https://www.google.com/s2/favicons?domain=aljazeera.com&sz=128",domain:["News"],subdomain:["World News"],area:["Global"],topic:["International Affairs"],tags:["news","global"],type:"News",createdAt:"2025-06-25T16:55:00.000Z",summary:"Global news stories and analysis from Al Jazeera English.",rating:4},{id:"feed-005",title:"The Guardian - World News",url:"https://www.theguardian.com/world/rss",imageUrl:"https://www.google.com/s2/favicons?domain=theguardian.com&sz=128",domain:["News"],subdomain:["World News"],area:["International"],topic:["General News"],tags:["news","international"],type:"News",createdAt:"2025-06-25T16:55:00.000Z",summary:"Latest world news and features from The Guardian.",rating:4},{id:"feed-006",title:"NPR News",url:"https://feeds.npr.org/1001/rss.xml",imageUrl:"https://www.google.com/s2/favicons?domain=npr.org&sz=128",domain:["News"],subdomain:["US News"],area:["Politics & Society"],topic:["Current Events"],tags:["news","US"],type:"News",createdAt:"2025-06-25T16:55:00.000Z",summary:"Breaking news and feature stories from NPR.",rating:4},{id:"feed-007",title:"Hacker News (Y Combinator)",url:"https://news.ycombinator.com/rss",imageUrl:"https://www.google.com/s2/favicons?domain=ycombinator.com&sz=128",domain:["Technology"],subdomain:["Software Development"],area:["DevOps"],topic:["Startups"],tags:["programming","entrepreneurship"],type:"Forum",createdAt:"2025-06-25T16:55:00.000Z",summary:"Front-page stories from Hacker News, a popular tech forum for startups and programming.",rating:4},{id:"feed-008",title:"TechCrunch",url:"http://feeds.feedburner.com/TechCrunch/",imageUrl:"https://www.google.com/s2/favicons?domain=techcrunch.com&sz=128",domain:["Technology"],subdomain:["Startup News"],area:["Technology Business"],topic:["Startups"],tags:["tech","startups"],type:"News",createdAt:"2025-06-25T16:55:00.000Z",summary:"Technology and startup news updates from TechCrunch.",rating:5},{id:"feed-009",title:"WIRED",url:"https://www.wired.com/feed/rss",imageUrl:"https://www.google.com/s2/favicons?domain=wired.com&sz=128",domain:["Technology"],subdomain:["Consumer Tech"],area:["Innovation"],topic:["Gadgets"],tags:["tech","innovation"],type:"Magazine",createdAt:"2025-06-25T16:55:00.000Z",summary:"Magazine featuring technology, science, and culture news (WIRED).",rating:4},{id:"feed-010",title:"Ars Technica",url:"http://feeds.arstechnica.com/arstechnica/index",imageUrl:"https://www.google.com/s2/favicons?domain=arstechnica.com&sz=128",domain:["Technology"],subdomain:["IT & Science"],area:["Computing"],topic:["Tech Policy"],tags:["tech","software","hardware"],type:"News",createdAt:"2025-06-25T16:55:00.000Z",summary:"In-depth technology, science, and IT news from Ars Technica.",rating:4},{id:"feed-011",title:"IEEE Spectrum",url:"https://spectrum.ieee.org/feeds/feed.rss",imageUrl:"https://www.google.com/s2/favicons?domain=ieee.org&sz=128",domain:["Engineering"],subdomain:["Electrical Engineering"],area:["Technology"],topic:["Innovation"],tags:["engineering","technology"],type:"Magazine",createdAt:"2025-06-25T16:55:00.000Z",summary:"Flagship magazine of IEEE, covering engineering and technology news.",rating:5},{id:"feed-012",title:"MIT Technology Review",url:"https://www.technologyreview.com/feed/",imageUrl:"https://www.google.com/s2/favicons?domain=technologyreview.com&sz=128",domain:["Technology"],subdomain:["Emerging Tech"],area:["Innovation"],topic:["Future Tech"],tags:["technology","innovation"],type:"Magazine",createdAt:"2025-06-25T16:55:00.000Z",summary:"Insights and analyses of emerging technologies from MIT Technology Review.",rating:4},{id:"feed-013",title:"Slashdot",url:"https://rss.slashdot.org/Slashdot/slashdotMain",imageUrl:"https://www.google.com/s2/favicons?domain=slashdot.org&sz=128",domain:["Technology"],subdomain:["IT"],area:["Software"],topic:["Open Source"],tags:["tech","news"],type:"News",createdAt:"2025-06-25T16:55:00.000Z",summary:"User-submitted technology news and discussion from Slashdot.",rating:3},{id:"feed-014",title:"Engadget",url:"https://www.engadget.com/rss.xml",imageUrl:"https://www.google.com/s2/favicons?domain=engadget.com&sz=128",domain:["Technology"],subdomain:["Consumer Electronics"],area:["Gadgets"],topic:["Electronics"],tags:["gadgets","tech"],type:"News",createdAt:"2025-06-25T16:55:00.000Z",summary:"Consumer technology news and reviews from Engadget.",rating:4},{id:"feed-015",title:"The Verge",url:"https://feeds.megaphone.fm/vergecast",imageUrl:"https://i.scdn.co/image/ab67656300005f1f8e08d3b0f126c847db80f0a6",domain:["Technology"],subdomain:["Tech Culture"],area:["Consumer Tech"],topic:["Devices"],tags:["tech","culture"],type:"News",createdAt:"2025-06-25T16:55:00.000Z",summary:"Technology, science, and culture news from The Verge.",rating:4},{id:"feed-016",title:"Stack Overflow Blog",url:"https://stackoverflow.blog/feed/",imageUrl:"https://www.google.com/s2/favicons?domain=stackoverflow.com&sz=128",domain:["Technology"],subdomain:["Software Development"],area:["Programming"],topic:["Development"],tags:["programming","community"],type:"Blog",createdAt:"2025-06-25T16:55:00.000Z",summary:"Articles on software development and the Stack Overflow developer community.",rating:3},{id:"feed-017",title:"Scientific American",url:"https://www.scientificamerican.com/platform/syndication/rss/",imageUrl:"https://www.google.com/s2/favicons?domain=scientificamerican.com&sz=128",domain:["Science"],subdomain:["General Science"],area:["Science News"],topic:["Research"],tags:["science","research"],type:"Magazine",createdAt:"2025-06-25T16:55:00.000Z",summary:"Popular science news and articles from Scientific American.",rating:5},{id:"feed-018",title:"Science News Magazine",url:"https://www.sciencenews.org/feed",imageUrl:"https://www.google.com/s2/favicons?domain=sciencenews.org&sz=128",domain:["Science"],subdomain:["General Science"],area:["News"],topic:["Discoveries"],tags:["science","news"],type:"News",createdAt:"2025-06-25T16:55:00.000Z",summary:"Latest research news in science from Science News magazine.",rating:5},{id:"feed-019",title:"ScienceDaily",url:"https://www.sciencedaily.com/rss/all.xml",imageUrl:"https://www.google.com/s2/favicons?domain=sciencedaily.com&sz=128",domain:["Science"],subdomain:["General Science"],area:["News"],topic:["Research Updates"],tags:["science","research"],type:"Research Digest",createdAt:"2025-06-25T16:55:00.000Z",summary:"Daily updates on the latest discoveries across science and medicine.",rating:4},{id:"feed-020",title:"New Scientist",url:"https://www.newscientist.com/feed/home",imageUrl:"https://www.google.com/s2/favicons?domain=newscientist.com&sz=128",domain:["Science"],subdomain:["General Science"],area:["News"],topic:["Tech & Biology"],tags:["science","tech"],type:"Magazine",createdAt:"2025-06-25T16:55:00.000Z",summary:"Science and technology news from New Scientist magazine.",rating:5},{id:"feed-021",title:"Quanta Magazine",url:"https://www.quantamagazine.org/feed",imageUrl:"https://www.google.com/s2/favicons?domain=quantamagazine.org&sz=128",domain:["Science"],subdomain:["Mathematics"],area:["Fundamental Science"],topic:["Research"],tags:["science","math","physics"],type:"Magazine",createdAt:"2025-06-25T16:55:00.000Z",summary:"In-depth articles on mathematics, physics, and computer science from Quanta Magazine.",rating:5},{id:"feed-022",title:"Space.com \u2013 Space & Astronomy",url:"https://www.space.com/feeds/all",imageUrl:"https://www.google.com/s2/favicons?domain=space.com&sz=128",domain:["Science"],subdomain:["Astronomy"],area:["Space Exploration"],topic:["Astronomy"],tags:["space","astronomy"],type:"News",createdAt:"2025-06-25T16:55:00.000Z",summary:"Latest news on space exploration and astronomy from Space.com.",rating:4},{id:"feed-023",title:"Futurity.org",url:"https://www.futurity.org/feed/",imageUrl:"https://www.google.com/s2/favicons?domain=futurity.org&sz=128",domain:["Science"],subdomain:["Research News"],area:["Academic Research"],topic:["Discoveries"],tags:["research","science"],type:"Research Digest",createdAt:"2025-06-25T16:55:00.000Z",summary:"Research news highlights from leading universities (Futurity).",rating:4},{id:"feed-024",title:"Bloomberg Markets News",url:"https://feeds.bloomberg.com/markets/news.rss",imageUrl:"https://www.google.com/s2/favicons?domain=bloomberg.com&sz=128",domain:["Business"],subdomain:["Finance"],area:["Markets"],topic:["Investing"],tags:["business","finance"],type:"News",createdAt:"2025-06-25T16:55:00.000Z",summary:"Financial markets and business news from Bloomberg.",rating:5},{id:"feed-025",title:"Encyclopedia Geopolitica",url:"https://encyclopediageopolitica.com/feed/",imageUrl:"https://www.google.com/s2/favicons?domain=encyclopediageopolitica.com&sz=128",domain:["Society"],subdomain:["Policy & Culture"],area:["Geopolitics"],topic:["Geopolitics"],tags:["politics"],type:"News",createdAt:"2025-06-25T16:55:00.000Z",summary:"Articles, reading lists, and podcasts discussing geopolitics.",rating:4},{id:"feed-026",title:"The Economist \u2013 Finance & Economics",url:"https://www.economist.com/finance-and-economics/rss.xml",imageUrl:"https://www.google.com/s2/favicons?domain=economist.com&sz=128",domain:["Business"],subdomain:["Economics"],area:["Global Economy"],topic:["Finance"],tags:["economics","business"],type:"Magazine",createdAt:"2025-06-25T16:55:00.000Z",summary:"Global economic analysis and finance news from The Economist.",rating:5},{id:"feed-027",title:"Harvard Business Review",url:"http://feeds.harvardbusiness.org/harvardbusiness/",imageUrl:"https://www.google.com/s2/favicons?domain=hbr.org&sz=128",domain:["Business"],subdomain:["Management"],area:["Leadership"],topic:["Strategy"],tags:["business","management"],type:"Magazine",createdAt:"2025-06-25T16:55:00.000Z",summary:"Leadership, management, and business insights from Harvard Business Review.",rating:4},{id:"feed-028",title:"Forbes \u2013 Innovation",url:"https://www.forbes.com/innovation/feed2",imageUrl:"https://www.google.com/s2/favicons?domain=forbes.com&sz=128",domain:["Business"],subdomain:["Technology"],area:["Innovation"],topic:["Entrepreneurship"],tags:["business","technology"],type:"Magazine",createdAt:"2025-06-25T16:55:00.000Z",summary:"Innovation and tech trends news from Forbes.",rating:4},{id:"feed-029",title:"Aeon - A World of Ideas",url:"https://aeon.co/feed.rss",imageUrl:"https://www.google.com/s2/favicons?domain=aeon.co&sz=128",domain:["Philosophy"],subdomain:["Culture"],area:["Ideas"],topic:["Essays"],tags:["philosophy","culture"],type:"Magazine",createdAt:"2025-06-25T16:55:00.000Z",summary:"In-depth essays on philosophy, science, and culture from Aeon magazine.",rating:5},{id:"feed-030",title:"Arts & Letters Daily",url:"https://www.aldaily.com/feed",imageUrl:"https://www.google.com/s2/favicons?domain=aldaily.com&sz=128",domain:["Culture"],subdomain:["Literature"],area:["Criticism"],topic:["Ideas"],tags:["arts","ideas"],type:"Magazine",createdAt:"2025-06-25T16:55:00.000Z",summary:"Daily curated links to essays on literature, philosophy, and the arts.",rating:5},{id:"feed-031",title:"The Marginalian",url:"https://www.themarginalian.org/feed/",imageUrl:"https://www.google.com/s2/favicons?domain=themarginalian.org&sz=128",domain:["Culture"],subdomain:["Literature"],area:["Art & Philosophy"],topic:["Books"],tags:["literature","art","philosophy"],type:"Blog",createdAt:"2025-06-25T16:55:00.000Z",summary:"Reflections on art, literature, science, and philosophy by The Marginalian (formerly Brain Pickings).",rating:5},{id:"feed-032",title:"Farnam Street (FS Blog)",url:"https://fs.blog/feed",imageUrl:"https://www.google.com/s2/favicons?domain=fs.blog&sz=128",domain:["Self-Improvement"],subdomain:["Learning"],area:["Personal Development"],topic:["Mental Models"],tags:["learning","productivity"],type:"Blog",createdAt:"2025-06-25T16:55:00.000Z",summary:"Mental models, decision-making, and personal growth insights from Farnam Street.",rating:4},{id:"feed-033",title:"Seth's Blog (Seth Godin)",url:"https://seths.blog/feed",imageUrl:"https://www.google.com/s2/favicons?domain=seths.blog&sz=128",domain:["Business"],subdomain:["Marketing"],area:["Entrepreneurship"],topic:["Marketing"],tags:["marketing","insight"],type:"Blog",createdAt:"2025-06-25T16:55:00.000Z",summary:"Daily marketing, business, and life insights from Seth Godin's blog.",rating:4},{id:"feed-034",title:"Smithsonian Magazine - History",url:"https://www.smithsonianmag.com/rss/history/",imageUrl:"https://www.google.com/s2/favicons?domain=smithsonianmag.com&sz=128",domain:["History"],subdomain:["World History"],area:["Culture"],topic:["Historical Events"],tags:["history","culture"],type:"Magazine",createdAt:"2025-06-25T16:55:00.000Z",summary:"Historical articles and insights from Smithsonian Magazine's History category.",rating:4},{id:"feed-035",title:"Sapiens Magazine",url:"https://www.sapiens.org/feed/",imageUrl:"https://www.google.com/s2/favicons?domain=sapiens.org&sz=128",domain:["Anthropology"],subdomain:["Culture"],area:["Human Evolution"],topic:["Anthropology"],tags:["anthropology","culture"],type:"Magazine",createdAt:"2025-06-25T16:55:00.000Z",summary:"Anthropology, archaeology, and evolutionary insights from Sapiens magazine.",rating:4},{id:"feed-036",title:"History Today",url:"https://www.historytoday.com/feed/rss.xml",imageUrl:"https://www.google.com/s2/favicons?domain=historytoday.com&sz=128",domain:["History"],subdomain:["World History"],area:["Historical Analysis"],topic:["General History"],tags:["history"],type:"Magazine",createdAt:"2025-06-25T16:55:00.000Z",summary:"Articles on world history and historical analysis from History Today magazine.",rating:4},{id:"feed-037",title:"Foreign Affairs",url:"https://www.foreignaffairs.com/rss.xml",imageUrl:"https://www.google.com/s2/favicons?domain=foreignaffairs.com&sz=128",domain:["Politics"],subdomain:["International Relations"],area:["Foreign Policy"],topic:["Geopolitics"],tags:["international","policy"],type:"Magazine",createdAt:"2025-06-25T16:55:00.000Z",summary:"In-depth analysis of foreign policy and global affairs from Foreign Affairs magazine.",rating:5},{id:"feed-038",title:"War on the Rocks",url:"https://warontherocks.com/feed/",imageUrl:"https://www.google.com/s2/favicons?domain=warontherocks.com&sz=128",domain:["Politics"],subdomain:["Defense"],area:["Security"],topic:["Military"],tags:["geopolitics","security"],type:"Magazine",createdAt:"2025-06-25T16:55:00.000Z",summary:"Commentary on strategy, defense, and foreign affairs from War on the Rocks.",rating:4},{id:"feed-039",title:"Futurism",url:"https://futurism.com/feed",imageUrl:"https://www.google.com/s2/favicons?domain=futurism.com&sz=128",domain:["Science"],subdomain:["Futurism"],area:["Emerging Tech"],topic:["Future"],tags:["future","technology"],type:"News",createdAt:"2025-06-25T16:55:00.000Z",summary:"Science and technology news focusing on emerging tech and futurism (Futurism.com).",rating:4},{id:"feed-040",title:"Singularity Hub",url:"https://singularityhub.com/feed/",imageUrl:"https://www.google.com/s2/favicons?domain=singularityhub.com&sz=128",domain:["Technology"],subdomain:["Futurism"],area:["Innovation"],topic:["Future"],tags:["future","science"],type:"Blog",createdAt:"2025-06-25T16:55:00.000Z",summary:"News and insights on future technologies and trends from Singularity Hub.",rating:3},{id:"feed-041",title:"OpenAI News",url:"https://openai.com/news/rss.xml",imageUrl:"https://www.google.com/s2/favicons?domain=openai.com&sz=128",domain:["Technology"],subdomain:["Artificial Intelligence"],area:["Machine Learning"],topic:["AI Research"],tags:["AI","ML"],type:"Blog",createdAt:"2025-06-25T16:55:00.000Z",summary:"Updates on artificial intelligence research and projects from OpenAI.",rating:5},{id:"feed-042",title:"arXiv AI (cs.AI) New Papers",url:"https://export.arxiv.org/rss/cs.AI",imageUrl:"https://www.google.com/s2/favicons?domain=arxiv.org&sz=128",domain:["Science"],subdomain:["Computer Science"],area:["Artificial Intelligence"],topic:["Research Papers"],tags:["AI","research"],type:"Preprint Server",createdAt:"2025-06-25T16:55:00.000Z",summary:"Daily list of new AI research papers from arXiv (computer science category).",rating:4},{id:"feed-043",title:"Two Minute Papers (YouTube)",url:"https://www.youtube.com/feeds/videos.xml?channel_id=UCbfYPyITQ-7l4upoX8nvctg",imageUrl:"https://www.google.com/s2/favicons?domain=youtube.com&sz=128",domain:["Technology"],subdomain:["Artificial Intelligence"],area:["Machine Learning"],topic:["Research Highlights"],tags:["AI","videos"],type:"YouTube",createdAt:"2025-06-25T16:55:00.000Z",summary:"Short video summaries of the latest AI research from the Two Minute Papers YouTube channel.",rating:4},{id:"feed-044",title:"Last Week in AI",url:"https://lastweekin.ai/feed",imageUrl:"https://www.google.com/s2/favicons?domain=lastweekin.ai&sz=128",domain:["Technology"],subdomain:["Artificial Intelligence"],area:["News"],topic:["AI News"],tags:["AI","newsletter"],type:"Newsletter",createdAt:"2025-06-25T16:55:00.000Z",summary:"Weekly digest of the most interesting AI news and developments.",rating:4},{id:"feed-045",title:"NYTimes Books",url:"https://rss.nytimes.com/services/xml/rss/nyt/Books.xml",imageUrl:"https://www.google.com/s2/favicons?domain=nytimes.com&sz=128",domain:["Arts"],subdomain:["Literature"],area:["Book Reviews"],topic:["Books"],tags:["books","reviews"],type:"News",createdAt:"2025-06-25T16:55:00.000Z",summary:"The latest book reviews, literary news, and author interviews from The New York Times.",rating:4},{id:"feed-046",title:"The Guardian - Books",url:"https://www.theguardian.com/books/rss",imageUrl:"https://www.google.com/s2/favicons?domain=theguardian.com&sz=128",domain:["Arts"],subdomain:["Literature"],area:["Books"],topic:["Publishing"],tags:["books","literature"],type:"News",createdAt:"2025-06-25T16:55:00.000Z",summary:"Book news, reviews, and literary commentary from The Guardian.",rating:4},{id:"feed-047",title:"Pitchfork - Latest Music News",url:"https://pitchfork.com/feed/feed-news/rss",imageUrl:"https://www.google.com/s2/favicons?domain=pitchfork.com&sz=128",domain:["Arts"],subdomain:["Music"],area:["Music News"],topic:["Music"],tags:["music","reviews"],type:"News",createdAt:"2025-06-25T16:55:00.000Z",summary:"Latest music news, album reviews, and features from Pitchfork.",rating:4},{id:"feed-048",title:"NPR Music",url:"https://feeds.npr.org/1039/rss.xml",imageUrl:"https://www.google.com/s2/favicons?domain=npr.org&sz=128",domain:["Arts"],subdomain:["Music"],area:["Music News"],topic:["Music"],tags:["music","news"],type:"News",createdAt:"2025-06-25T16:55:00.000Z",summary:"Music news, reviews, and artist interviews from NPR Music.",rating:4},{id:"feed-049",title:"3D Printing Industry",url:"https://3dprintingindustry.com/feed",imageUrl:"https://www.google.com/s2/favicons?domain=3dprintingindustry.com&sz=128",domain:["Technology"],subdomain:["Additive Manufacturing"],area:["3D Printing"],topic:["Manufacturing"],tags:["3D printing","manufacturing"],type:"News",createdAt:"2025-06-25T16:55:00.000Z",summary:"News and analysis on the 3D printing and additive manufacturing industry.",rating:4},{id:"feed-050",title:"Terence Tao's Blog",url:"https://terrytao.wordpress.com/feed/",imageUrl:"https://www.google.com/s2/favicons?domain=wordpress.com&sz=128",domain:["Mathematics"],subdomain:["Analysis"],area:["Academic"],topic:["Mathematics"],tags:["math","academic"],type:"Blog",createdAt:"2025-06-25T16:55:00.000Z",summary:"Mathematical insights and research commentary by Fields Medalist Terence Tao.",rating:5},{id:"feed-051",title:"Numberphile (YouTube)",url:"https://www.youtube.com/feeds/videos.xml?channel_id=UCoxcjq-8xIDTYp3uz647V5A",imageUrl:"https://www.google.com/s2/favicons?domain=youtube.com&sz=128",domain:["Mathematics"],subdomain:["Mathematics"],area:["Education"],topic:["Numbers"],tags:["math","video"],type:"YouTube",createdAt:"2025-06-25T16:55:00.000Z",summary:"Entertaining videos about numbers and math concepts from the Numberphile YouTube channel.",rating:4},{id:"feed-052",title:"HPCwire",url:"https://www.hpcwire.com/feed/",imageUrl:"https://www.google.com/s2/favicons?domain=hpcwire.com&sz=128",domain:["Technology"],subdomain:["Computing"],area:["Supercomputing"],topic:["HPC"],tags:["computing","HPC"],type:"News",createdAt:"2025-06-25T16:55:00.000Z",summary:"High-performance computing and supercomputer industry news from HPCwire.",rating:3},{id:"feed-053",title:"Interesting Engineering",url:"https://interestingengineering.com/rss",imageUrl:"https://www.google.com/s2/favicons?domain=interestingengineering.com&sz=128",domain:["Engineering"],subdomain:["Technology"],area:["Innovation"],topic:["Engineering"],tags:["engineering","tech"],type:"News",createdAt:"2025-06-25T16:55:00.000Z",summary:"Engineering breakthroughs, tech innovations, and scientific curiosities from Interesting Engineering.",rating:3},{id:"feed-054",title:"Phys.org - Science News",url:"http://www.physorg.com/rss-feed/science-news/",imageUrl:"https://www.google.com/s2/favicons?domain=phys.org&sz=128",domain:["Science"],subdomain:["General Science"],area:["Research"],topic:["Science News"],tags:["science","tech"],type:"News",createdAt:"2025-06-25T16:55:00.000Z",summary:"Up-to-the-minute science and technology news updates from Phys.org.",rating:4},{id:"feed-055",title:"ZDNet",url:"https://www.zdnet.com/news/rss.xml",imageUrl:"https://www.google.com/s2/favicons?domain=zdnet.com&sz=128",domain:["Technology"],subdomain:["IT"],area:["Business Tech"],topic:["Tech Industry"],tags:["technology","IT"],type:"News",createdAt:"2025-06-25T16:55:00.000Z",summary:"Technology industry news, analysis, and product coverage from ZDNet.",rating:3},{id:"feed-056",title:"Fortune Magazine",url:"https://fortune.com/feed/",imageUrl:"https://www.google.com/s2/favicons?domain=fortune.com&sz=128",domain:["Business"],subdomain:["Business News"],area:["Corporate"],topic:["Business"],tags:["business","finance"],type:"News",createdAt:"2025-06-25T16:55:00.000Z",summary:"Business news and analysis on companies, markets, and tech from Fortune.",rating:4},{id:"feed-057",title:"Rolling Stone \u2013 Music",url:"https://www.rollingstone.com/feed/",imageUrl:"https://www.google.com/s2/favicons?domain=rollingstone.com&sz=128",domain:["Arts"],subdomain:["Music"],area:["Entertainment"],topic:["Music News"],tags:["music","entertainment"],type:"News",createdAt:"2025-06-25T16:55:00.000Z",summary:"Music news, album reviews, and pop culture coverage from Rolling Stone.",rating:4},{id:"feed-058",title:"Tiny Buddha",url:"https://tinybuddha.com/feed/",imageUrl:"https://www.google.com/s2/favicons?domain=tinybuddha.com&sz=128",domain:["Self-Improvement"],subdomain:["Wellness"],area:["Mindfulness"],topic:["Personal Growth"],tags:["self-help","mindfulness"],type:"Blog",createdAt:"2025-06-25T16:55:00.000Z",summary:"Inspiration, wisdom, and tips for happiness and mindfulness from Tiny Buddha.",rating:3},{id:"feed-059",title:"Becoming Minimalist",url:"https://www.becomingminimalist.com/feed/",imageUrl:"https://www.becomingminimalist.com/wp-content/themes/becoming-minimalist/images/header.png",domain:["Self-Improvement"],subdomain:["Lifestyle"],area:["Minimalism"],topic:["Simplicity"],tags:["minimalism","lifestyle"],type:"Blog",createdAt:"2025-06-25T16:55:00.000Z",summary:"Insights on minimalism and intentional living from Becoming Minimalist.",rating:3},{id:"feed-060",title:"NYTimes Opinion",url:"https://rss.nytimes.com/services/xml/rss/nyt/Opinion.xml",imageUrl:"https://www.google.com/s2/favicons?domain=nytimes.com&sz=128",domain:["News"],subdomain:["Opinion"],area:["Editorial"],topic:["Opinion"],tags:["opinion","politics"],type:"Opinion Column",createdAt:"2025-06-25T16:55:00.000Z",summary:"Opinions, editorials, and op-eds from The New York Times.",rating:4},{id:"feed-061",title:"Project Syndicate",url:"https://www.project-syndicate.org/rss",imageUrl:"https://www.google.com/s2/favicons?domain=project-syndicate.org&sz=128",domain:["News"],subdomain:["Opinion"],area:["Global Opinion"],topic:["Economics & Politics"],tags:["opinion","economics"],type:"Opinion Column",createdAt:"2025-06-25T16:55:00.000Z",summary:"Global commentary and opinion pieces by leading thinkers (Project Syndicate).",rating:5},{id:"feed-062",title:"Universe Today",url:"https://www.universetoday.com/feed/",imageUrl:"https://www.google.com/s2/favicons?domain=universetoday.com&sz=128",domain:["Science"],subdomain:["Astronomy"],area:["Space"],topic:["Astronomy"],tags:["space","astronomy"],type:"News",createdAt:"2025-06-25T16:55:00.000Z",summary:"Space and astronomy news, night sky tips, and space exploration updates from Universe Today.",rating:4},{id:"feed-063",title:"Quantum Computing Report",url:"https://quantumcomputingreport.com/feed/",imageUrl:"https://www.google.com/s2/favicons?domain=quantumcomputingreport.com&sz=128",domain:["Technology"],subdomain:["Quantum Computing"],area:["Emerging Tech"],topic:["Quantum"],tags:["quantum","computing"],type:"Blog",createdAt:"2025-06-25T16:55:00.000Z",summary:"Updates on the quantum computing industry, research, and policy (Quantum Computing Report).",rating:3},{id:"feed-064",title:"TCT Magazine (3D Printing)",url:"https://www.tctmagazine.com/api/rss/content.rss",imageUrl:"https://www.google.com/s2/favicons?domain=tctmagazine.com&sz=128",domain:["Technology"],subdomain:["Additive Manufacturing"],area:["3D Printing"],topic:["Industry News"],tags:["3D printing","technology"],type:"Magazine",createdAt:"2025-06-25T16:55:00.000Z",summary:"Additive manufacturing and 3D printing industry news from TCT Magazine.",rating:3},{id:"feed-065",title:"Mozilla Hacks (MDN Web Docs)",url:"https://hacks.mozilla.org/feed",imageUrl:"https://www.google.com/s2/favicons?domain=mozilla.org&sz=128",domain:["Technology"],subdomain:["Web Development"],area:["Front-end"],topic:["Web Technology"],tags:["development","web"],type:"Documentation",createdAt:"2025-06-25T16:55:00.000Z",summary:"Web development tips, browser technology updates, and tutorials from Mozilla Hacks (MDN).",rating:3},{id:"feed-066",title:"Stack Exchange - Hot Questions",url:"https://stackexchange.com/feeds/questions",imageUrl:"https://www.google.com/s2/favicons?domain=stackexchange.com&sz=128",domain:["Technology"],subdomain:["Q&A"],area:["Programming"],topic:["Various Topics"],tags:["Q&A","community"],type:"Forum",createdAt:"2025-06-25T16:55:00.000Z",summary:"Newest popular questions across the Stack Exchange network of Q&A communities.",rating:3},{id:"feed-067",title:"GitHub Blog",url:"https://github.blog/feed/",imageUrl:"https://www.google.com/s2/favicons?domain=github.com&sz=128",domain:["Technology"],subdomain:["Software Development"],area:["Version Control"],topic:["Dev Tools"],tags:["development","tools"],type:"Blog",createdAt:"2025-06-25T16:55:00.000Z",summary:"Product updates, engineering posts, and community news from the official GitHub Blog.",rating:4},{id:"feed-068",title:"Techmeme",url:"https://www.techmeme.com/feed.xml",imageUrl:"https://www.google.com/s2/favicons?domain=techmeme.com&sz=128",domain:["Technology"],subdomain:["Tech News"],area:["Aggregators"],topic:["Technology"],tags:["news","tech"],type:"News",createdAt:"2025-06-25T16:55:00.000Z",summary:"Real-time aggregator of trending technology news headlines (Techmeme).",rating:4},{id:"feed-069",title:"TED Talks Daily (Podcast)",url:"https://feeds.feedburner.com/tedtalks_video",imageUrl:"https://www.google.com/s2/favicons?domain=ted.com&sz=128",domain:["Education"],subdomain:["Ideas"],area:["Inspiration"],topic:["TED Talks"],tags:["ideas","inspiration"],type:"Podcast",createdAt:"2025-06-25T16:55:00.000Z",summary:"Daily video feed of TED Talks featuring thought leaders on technology, entertainment, design, and more.",rating:4},{id:"feed-070",title:"KDnuggets",url:"https://www.kdnuggets.com/feed",imageUrl:"https://www.google.com/s2/favicons?domain=kdnuggets.com&sz=128",domain:["Technology"],subdomain:["Data Science"],area:["Machine Learning"],topic:["Analytics"],tags:["data science","ML"],type:"Blog",createdAt:"2025-06-25T16:55:00.000Z",summary:"Data science and machine learning news, tutorials, and insights from KDnuggets.",rating:4},{id:"feed-071",title:"LWN.net (Linux News)",url:"https://lwn.net/headlines/newrss",imageUrl:"https://www.google.com/s2/favicons?domain=lwn.net&sz=128",domain:["Technology"],subdomain:["Software"],area:["Open Source"],topic:["Linux"],tags:["linux","software"],type:"News",createdAt:"2025-06-25T16:55:00.000Z",summary:"Linux and open-source industry news and analysis from LWN.net.",rating:3},{id:"feed-072",title:"RemoteOK - Remote Jobs",url:"https://remoteok.com/rss",imageUrl:"https://www.google.com/s2/favicons?domain=remoteok.com&sz=128",domain:["Career"],subdomain:["Tech Jobs"],area:["Employment"],topic:["Job Postings"],tags:["jobs","tech"],type:"Job Board",createdAt:"2025-06-25T16:55:00.000Z",summary:"Latest remote tech job listings from the RemoteOK job board.",rating:3},{id:"feed-073",title:"The Atlantic - Latest",url:"https://www.theatlantic.com/feed/all/",imageUrl:"https://www.google.com/s2/favicons?domain=theatlantic.com&sz=128",domain:["News"],subdomain:["Culture"],area:["Society"],topic:["General Interest"],tags:["news","culture"],type:"Magazine",createdAt:"2025-06-25T16:55:00.000Z",summary:"Latest articles and in-depth reporting on politics, culture, and society from The Atlantic.",rating:5},{id:"feed-074",title:"Vox",url:"https://www.vox.com/rss/index.xml",imageUrl:"https://www.google.com/s2/favicons?domain=vox.com&sz=128",domain:["News"],subdomain:["Explainers"],area:["General Interest"],topic:["Explainers"],tags:["news","explainers"],type:"News",createdAt:"2025-06-25T16:55:00.000Z",summary:"Explanatory journalism on politics, policy, and culture from Vox.",rating:4},{id:"feed-075",title:"Long Now Foundation (Blog)",url:"http://feeds.feedburner.com/longnow",imageUrl:"https://www.google.com/s2/favicons?domain=longnow.org&sz=128",domain:["Society"],subdomain:["Futurism"],area:["Long-term Thinking"],topic:["Civilization"],tags:["future","society"],type:"Blog",createdAt:"2025-06-25T16:55:00.000Z",summary:"Essays and updates on long-term thinking, future civilization, and projects from the Long Now Foundation.",rating:4},{id:"feed-076",title:"Noema Magazine",url:"https://www.noemamag.com/feed/",imageUrl:"https://www.google.com/s2/favicons?domain=noemamag.com&sz=128",domain:["Society"],subdomain:["Philosophy"],area:["Global Perspectives"],topic:["Future"],tags:["society","culture"],type:"Magazine",createdAt:"2025-06-25T16:55:00.000Z",summary:"Interdisciplinary essays and analyses on global challenges and the future of society (Noema Magazine).",rating:3},{id:"feed-077",title:"Marginal Revolution",url:"https://marginalrevolution.com/feed",imageUrl:"https://www.google.com/s2/favicons?domain=marginalrevolution.com&sz=128",domain:["Business"],subdomain:["Economics"],area:["Economics"],topic:["Economic Policy"],tags:["economics","blog"],type:"Blog",createdAt:"2025-06-25T16:55:00.000Z",summary:"Daily economics commentary and eclectic insights from the Marginal Revolution blog.",rating:4},{id:"feed-078",title:"Reddit r/AskScience",url:"https://www.reddit.com/r/askscience/.rss",imageUrl:"https://www.google.com/s2/favicons?domain=reddit.com&sz=128",domain:["Science"],subdomain:["General Science"],area:["Q&A"],topic:["Science"],tags:["community","science"],type:"Forum",createdAt:"2025-06-25T16:55:00.000Z",summary:"Crowd-sourced science questions and expert answers from Reddit's r/AskScience community.",rating:3},{id:"feed-079",title:"Reddit r/AskHistorians",url:"https://www.reddit.com/r/AskHistorians/.rss",imageUrl:"https://www.google.com/s2/favicons?domain=reddit.com&sz=128",domain:["History"],subdomain:["World History"],area:["Q&A"],topic:["History"],tags:["community","history"],type:"Forum",createdAt:"2025-06-25T16:55:00.000Z",summary:"Expert answers to historical questions from the Reddit r/AskHistorians community.",rating:4},{id:"feed-080",title:"freeCodeCamp News",url:"https://www.freecodecamp.org/news/rss",imageUrl:"https://www.google.com/s2/favicons?domain=freecodecamp.org&sz=128",domain:["Technology"],subdomain:["Programming"],area:["Education"],topic:["Tutorials"],tags:["coding","tutorials"],type:"Tutorial Series",createdAt:"2025-06-25T16:55:00.000Z",summary:"Coding tutorials, how-to guides, and developer articles from freeCodeCamp News.",rating:4},{id:"feed-081",title:"FiveThirtyEight",url:"https://fivethirtyeight.com/all/feed",imageUrl:"https://www.google.com/s2/favicons?domain=fivethirtyeight.com&sz=128",domain:["News"],subdomain:["Data Journalism"],area:["Politics & Sports"],topic:["Analysis"],tags:["data","analysis"],type:"News",createdAt:"2025-06-25T16:55:00.000Z",summary:"Data-driven news and analysis on politics, economics, science, and sports from FiveThirtyEight.",rating:4},{id:"feed-082",title:"Open Culture",url:"http://www.openculture.com/feed",imageUrl:"https://www.google.com/s2/favicons?domain=openculture.com&sz=128",domain:["Education"],subdomain:["Culture"],area:["Free Learning"],topic:["Online Education"],tags:["education","culture"],type:"Blog",createdAt:"2025-06-25T16:55:00.000Z",summary:"Free cultural and educational media (courses, ebooks, films) curated by Open Culture.",rating:4},{id:"feed-083",title:"Paul Krugman (NYT Opinion)",url:"https://rss.nytimes.com/services/xml/rss/nyt/Opinion.xml",imageUrl:"https://www.google.com/s2/favicons?domain=nytimes.com&sz=128",domain:["News"],subdomain:["Opinion"],area:["Economics"],topic:["Opinion"],tags:["economics","opinion"],type:"Opinion Column",createdAt:"2025-06-25T16:55:00.000Z",summary:"Opinion columns on economics and policy by Paul Krugman (NYTimes).",rating:4},{id:"feed-084",title:"bioRxiv (Latest Preprints)",url:"https://connect.biorxiv.org/biorxiv_xml.php?subject=all",imageUrl:"https://www.google.com/s2/favicons?domain=biorxiv.org&sz=128",domain:["Science"],subdomain:["Biology"],area:["Preprints"],topic:["Life Sciences"],tags:["biology","preprints"],type:"Preprint Server",createdAt:"2025-06-25T16:55:00.000Z",summary:"Latest open access preprints in the life sciences from bioRxiv.",rating:3},{id:"feed-085",title:"Science Magazine News",url:"https://www.sciencemag.org/rss/news_current.xml",imageUrl:"https://www.google.com/s2/favicons?domain=sciencemag.org&sz=128",domain:["Science"],subdomain:["General Science"],area:["News"],topic:["Research"],tags:["science","policy"],type:"Journal",createdAt:"2025-06-25T16:55:00.000Z",summary:"Science Magazine news on the latest scientific research and science policy developments.",rating:5},{id:"feed-086",title:"Nature News",url:"https://www.nature.com/nature.rss",imageUrl:"https://www.google.com/s2/favicons?domain=nature.com&sz=128",domain:["Science"],subdomain:["General Science"],area:["News"],topic:["Science"],tags:["science","research"],type:"Journal",createdAt:"2025-06-25T16:55:00.000Z",summary:"Scientific news and highlights from Nature, covering the latest research across disciplines.",rating:5},{id:"feed-087",title:"Reddit r/technology",url:"https://www.reddit.com/r/technology/.rss",imageUrl:"https://www.google.com/s2/favicons?domain=reddit.com&sz=128",domain:["Technology"],subdomain:["General Tech"],area:["Community"],topic:["Tech News"],tags:["technology","community"],type:"Forum",createdAt:"2025-06-25T16:55:00.000Z",summary:"User-submitted technology news and discussions from Reddit's r/technology community.",rating:3},{id:"feed-088",title:"The Diplomat",url:"https://thediplomat.com/feed/",imageUrl:"https://www.google.com/s2/favicons?domain=thediplomat.com&sz=128",domain:["Politics"],subdomain:["Asia-Pacific"],area:["International Relations"],topic:["Geopolitics"],tags:["Asia","politics"],type:"Magazine",createdAt:"2025-06-25T16:55:00.000Z",summary:"Geopolitical news and analysis focusing on Asia-Pacific affairs from The Diplomat.",rating:4},{id:"feed-089",title:"Palladium Magazine",url:"https://palladiummag.com/feed/",imageUrl:"https://www.google.com/s2/favicons?domain=palladiummag.com&sz=128",domain:["Society"],subdomain:["Civilization"],area:["Politics & Culture"],topic:["Societal Future"],tags:["society","politics"],type:"Magazine",createdAt:"2025-06-25T16:55:00.000Z",summary:"Long-form essays on governance, society, and the future of civilization from Palladium Magazine.",rating:3},{id:"feed-090",title:"Anthropocene Magazine",url:"https://www.anthropocenemagazine.org/feed/",imageUrl:"https://www.google.com/s2/favicons?domain=anthropocenemagazine.org&sz=128",domain:["Science"],subdomain:["Environment"],area:["Anthropocene"],topic:["Sustainability"],tags:["environment","society"],type:"Magazine",createdAt:"2025-06-25T16:55:00.000Z",summary:"Exploring environmental change and sustainability challenges in the Anthropocene (Anthropocene Magazine).",rating:3},{id:"feed-091",title:"CoinDesk",url:"https://feeds.feedburner.com/CoinDesk",imageUrl:"https://www.google.com/s2/favicons?domain=coindesk.com&sz=128",domain:["Business"],subdomain:["Finance"],area:["Cryptocurrency"],topic:["Blockchain"],tags:["crypto","finance"],type:"News",createdAt:"2025-06-25T16:55:00.000Z",summary:"Cryptocurrency, blockchain, and fintech news and analysis from CoinDesk.",rating:4},{id:"feed-092",title:"NVIDIA Technical Blog",url:"https://developer.nvidia.com/blog/feed/",imageUrl:"https://www.google.com/s2/favicons?domain=nvidia.com&sz=128",domain:["Technology"],subdomain:["Computing"],area:["AI & Graphics"],topic:["Developer Updates"],tags:["GPU","AI"],type:"Blog",createdAt:"2025-06-25T16:55:00.000Z",summary:"News and tutorials for developers, data scientists, and researchers from NVIDIA's technical blog.",rating:4},{id:"feed-093",title:"Nautilus",url:"https://nautil.us/feed/",imageUrl:"https://www.google.com/s2/favicons?domain=nautil.us&sz=128",domain:["Science","Philosophy"],subdomain:["Culture & Ideas"],area:["Interdisciplinary Essays"],topic:["Big Questions"],tags:["science","culture","philosophy"],type:"Magazine",createdAt:"2025-06-26T09:01:29Z",summary:"Narrative essays blending science, culture, and philosophy.",rating:5},{id:"feed-094",title:"Science News",url:"https://www.sciencenews.org/feed",imageUrl:"https://www.google.com/s2/favicons?domain=sciencenews.org&sz=128",domain:["Science"],subdomain:["General Science"],area:["Research News"],topic:["Latest Discoveries"],tags:["news","research"],type:"News",createdAt:"2025-06-26T09:01:29Z",summary:"Daily reports on discoveries across scientific disciplines.",rating:4},{id:"feed-095",title:"NASA Breaking News",url:"http://www.nasa.gov/rss/dyn/breaking_news.rss",imageUrl:"https://www.google.com/s2/favicons?domain=nasa.gov&sz=128",domain:["Science"],subdomain:["Space Agency"],area:["Missions & Policy"],topic:["Press Releases"],tags:["NASA","missions","astronomy"],type:"Alert Feed",createdAt:"2025-06-26T09:01:29Z",summary:"Official NASA press releases and mission updates.",rating:5},{id:"feed-096",title:"Phys.org",url:"https://phys.org/rss-feed/",imageUrl:"https://www.google.com/s2/favicons?domain=phys.org&sz=128",domain:["Science"],subdomain:["General Science"],area:["Daily Research"],topic:["Science & Tech News"],tags:["physics","technology","biology"],type:"News",createdAt:"2025-06-26T09:01:29Z",summary:"Daily science and technology research news.",rating:4},{id:"feed-097",title:"DeepMind Blog",url:"https://deepmind.com/blog/feed/basic/",imageUrl:"https://www.google.com/s2/favicons?domain=deepmind.com&sz=128",domain:["Technology"],subdomain:["Artificial Intelligence"],area:["Research Updates"],topic:["ML Innovations"],tags:["AI","deep-learning"],type:"Blog",createdAt:"2025-06-26T09:01:29Z",summary:"DeepMind research advances and insights.",rating:4},{id:"feed-098",title:"Stanford Encyclopedia of Philosophy",url:"https://plato.stanford.edu/rss/sep.xml",imageUrl:"https://www.google.com/s2/favicons?domain=stanford.edu&sz=128",domain:["Philosophy"],subdomain:["Reference"],area:["Scholarly Entries"],topic:["Concept Overviews"],tags:["philosophy","reference"],type:"Documentation",createdAt:"2025-06-26T09:01:29Z",summary:"Authoritative, peer\u2011reviewed philosophy entries.",rating:4},{id:"feed-099",title:"The Marginalian",url:"https://www.themarginalian.org/feed/",imageUrl:"https://www.google.com/s2/favicons?domain=themarginalian.org&sz=128",domain:["Culture"],subdomain:["Ideas & Art"],area:["Reflective Essays"],topic:["Creativity & Life"],tags:["literature","philosophy","art"],type:"Blog",createdAt:"2025-06-26T09:01:29Z",summary:"Exploring art, science, and philosophy to illuminate the human spirit.",rating:4},{id:"feed-100",title:"Astral Codex Ten",url:"https://astralcodexten.substack.com/feed",imageUrl:"https://www.google.com/s2/favicons?domain=substack.com&sz=128",domain:["Philosophy"],subdomain:["Rationalism"],area:["Long-Form Essays"],topic:["Medicine, Science & Society"],tags:["rationality","psychology"],type:"Blog",createdAt:"2025-06-26T09:01:29Z",summary:"Scott Alexander's essays on medicine, science, politics, and philosophy.",rating:4},{id:"feed-101",title:"LessWrong",url:"http://lesserwrong.com/feed.xml",imageUrl:"https://www.google.com/s2/favicons?domain=lesserwrong.com&sz=128",domain:["Philosophy"],subdomain:["Rationality"],area:["Community Forum"],topic:["Decision Science"],tags:["AI-alignment","epistemology"],type:"Forum",createdAt:"2025-06-26T09:01:29Z",summary:"Community blog on rational thinking and AI alignment.",rating:4},{id:"feed-102",title:"Noahpinion",url:"https://noahpinion.substack.com/feed",imageUrl:"https://www.google.com/s2/favicons?domain=substack.com&sz=128",domain:["Economics"],subdomain:["Policy & Tech"],area:["Data-Driven Essays"],topic:["Macro & Markets"],tags:["finance","policy"],type:"Blog",createdAt:"2025-06-26T09:01:29Z",summary:"Noah Smith on economics, finance, and tech trends.",rating:4},{id:"feed-103",title:"Behavioral Scientist",url:"https://behavioralscientist.org/feed/",imageUrl:"https://www.google.com/s2/favicons?domain=behavioralscientist.org&sz=128",domain:["Psychology"],subdomain:["Behavioral Science"],area:["Research Insights"],topic:["Decision\u2011Making"],tags:["behavior","society"],type:"Magazine",createdAt:"2025-06-26T09:01:29Z",summary:"Making behavioral research accessible to the public.",rating:4},{id:"feed-104",title:"Our World in Data",url:"https://ourworldindata.org/atom.xml",imageUrl:"https://www.google.com/s2/favicons?domain=ourworldindata.org&sz=128",domain:["Data"],subdomain:["Global Development"],area:["Open Statistics"],topic:["Public Datasets"],tags:["visualization","policy"],type:"Open Access Feed",createdAt:"2025-06-26T09:01:29Z",summary:"Data\u2011driven research and charts on global issues.",rating:4},{id:"feed-105",title:"Yale Environment 360",url:"https://e360.yale.edu/feed.xml",imageUrl:"https://www.google.com/s2/favicons?domain=yale.edu&sz=128",domain:["Environment"],subdomain:["Climate & Ecology"],area:["Policy & Science"],topic:["Analysis"],tags:["climate","sustainability"],type:"Magazine",createdAt:"2025-06-26T09:01:29Z",summary:"In\u2011depth reporting on global environmental topics.",rating:4},{id:"feed-106",title:"The Conversation (US)",url:"https://theconversation.com/us/feeds/articles.atom",imageUrl:"https://www.google.com/s2/favicons?domain=theconversation.com&sz=128",domain:["News"],subdomain:["Academic Commentary"],area:["Multidisciplinary"],topic:["Expert Analysis"],tags:["research","policy"],type:"News",createdAt:"2025-06-26T09:01:29Z",summary:"Fact\u2011checked commentary from academics and researchers.",rating:4},{id:"feed-107",title:"Public Domain Review",url:"https://publicdomainreview.org/feed/",imageUrl:"https://www.google.com/s2/favicons?domain=publicdomainreview.org&sz=128",domain:["Culture"],subdomain:["Archives"],area:["Historical Artifacts"],topic:["Essays"],tags:["history","public-domain"],type:"Magazine",createdAt:"2025-06-26T09:01:29Z",summary:"Curated essays on obscure historical works in the public domain.",rating:4},{id:"feed-108",title:"Atlas Obscura",url:"https://www.atlasobscura.com/feeds/latest",imageUrl:"https://www.google.com/s2/favicons?domain=atlasobscura.com&sz=128",domain:["Culture"],subdomain:["Travel & Curiosities"],area:["Global Wonders"],topic:["Hidden Places"],tags:["travel","oddities"],type:"Magazine",createdAt:"2025-06-26T09:01:29Z",summary:"Guide to the world's hidden wonders and curiosities.",rating:4},{id:"feed-109",title:"Low-Tech Magazine",url:"https://solar.lowtechmagazine.com/feeds/all-en.atom.xml",imageUrl:"https://www.google.com/s2/favicons?domain=lowtechmagazine.com&sz=128",domain:["Sustainability"],subdomain:["Appropriate Technology"],area:["Historical Tech"],topic:["Low\u2011Energy Solutions"],tags:["sustainability","technology"],type:"Blog",createdAt:"2025-06-26T09:01:29Z",summary:"Exploring sustainable, low-tech solutions and historical technologies.",rating:4},{id:"feed-110",title:"Literary Hub",url:"https://lithub.com/feed/",imageUrl:"https://www.google.com/s2/favicons?domain=lithub.com&sz=128",domain:["Arts"],subdomain:["Literature"],area:["Book Culture"],topic:["Reviews & Essays"],tags:["books","literature"],type:"News",createdAt:"2025-06-26T09:01:29Z",summary:"Daily literary news, reviews, and commentary.",rating:4},{id:"feed-111",title:"Tor.com",url:"https://www.tor.com/feed/",imageUrl:"https://www.google.com/s2/favicons?domain=tor.com&sz=128",domain:["Arts"],subdomain:["Science Fiction"],area:["Genre Publishing"],topic:["Reviews & Fiction"],tags:["scifi","fantasy"],type:"News",createdAt:"2025-06-26T09:01:29Z",summary:"Sci\u2011fi & fantasy book reviews, fiction, and commentary.",rating:4},{id:"feed-112",title:"Standard Ebooks",url:"https://standardebooks.org/rss/new-releases",imageUrl:"https://www.google.com/s2/favicons?domain=standardebooks.org&sz=128",domain:["Arts"],subdomain:["Literature"],area:["Public Domain Ebooks"],topic:["New Releases"],tags:["ebooks","classics"],type:"Book Releases",createdAt:"2025-06-26T09:01:29Z",summary:"Newly released, carefully formatted public\u2011domain ebooks.",rating:4},{id:"feed-113",title:"xkcd",url:"https://xkcd.com/rss.xml",imageUrl:"https://www.google.com/s2/favicons?domain=xkcd.com&sz=128",domain:["Humor"],subdomain:["Webcomic"],area:["Science Jokes"],topic:["Comics"],tags:["science","math"],type:"Webcomic",createdAt:"2025-06-26T09:01:29Z",summary:"Stick\u2011figure comics about science, technology, math, and life.",rating:4},{id:"feed-114",title:"SMBC",url:"http://www.smbc-comics.com/rss.php",imageUrl:"https://www.google.com/s2/favicons?domain=smbc-comics.com&sz=128",domain:["Humor"],subdomain:["Webcomic"],area:["Geek Satire"],topic:["Comics"],tags:["science","philosophy"],type:"Webcomic",createdAt:"2025-06-26T09:01:29Z",summary:"Daily webcomic with sharp science\u2011themed humor.",rating:4},{id:"feed-115",title:"Boing Boing",url:"https://boingboing.net/feed/",imageUrl:"https://www.google.com/s2/favicons?domain=boingboing.net&sz=128",domain:["Culture"],subdomain:["Tech & Oddities"],area:["Blog"],topic:["Curiosities"],tags:["DIY","culture"],type:"Blog",createdAt:"2025-06-26T09:01:29Z",summary:"Eclectic blog of tech, culture, and curiosities.",rating:4},{id:"feed-116",title:"Futility Closet",url:"https://www.futilitycloset.com/feed/",imageUrl:"https://www.google.com/s2/favicons?domain=futilitycloset.com&sz=128",domain:["Culture"],subdomain:["Puzzles & History"],area:["Quirky Facts"],topic:["Historical Tales"],tags:["puzzles","history"],type:"Blog",createdAt:"2025-06-26T09:01:29Z",summary:"Anecdotes, puzzles, and scholarly curiosities.",rating:4},{id:"feed-117",title:"Improbable Research",url:"https://www.improbable.com/feed/",imageUrl:"https://www.google.com/s2/favicons?domain=improbable.com&sz=128",domain:["Science"],subdomain:["Humor"],area:["Unusual Studies"],topic:["Ig Nobel"],tags:["weird","research"],type:"Blog",createdAt:"2025-06-26T09:01:29Z",summary:"Showcases humorous and unusual scientific studies.",rating:4},{id:"feed-118",title:"Mental Floss",url:"http://mentalfloss.com/rss.xml",imageUrl:"https://www.google.com/s2/favicons?domain=mentalfloss.com&sz=128",domain:["Culture"],subdomain:["Trivia"],area:["Fun Facts"],topic:["Explainers"],tags:["trivia","history"],type:"Magazine",createdAt:"2025-06-26T09:01:29Z",summary:"Surprising facts, trivia, and smart explanations.",rating:4},{id:"feed-119",title:"Reddit r/TodayILearned",url:"https://www.reddit.com/r/todayilearned/.rss",imageUrl:"https://www.google.com/s2/favicons?domain=reddit.com&sz=128",domain:["Community"],subdomain:["Trivia"],area:["Crowdsourced Facts"],topic:["TIL"],tags:["facts","learning"],type:"Forum",createdAt:"2025-06-26T09:01:29Z",summary:"Crowdsourced 'Today I Learned' facts with backstory links.",rating:4},{id:"feed-120",title:"McSweeney's Internet Tendency",url:"http://feeds.feedburner.com/mcsweeneys/",imageUrl:"https://www.google.com/s2/favicons?domain=mcsweeneys.net&sz=128",domain:["Humor"],subdomain:["Satire"],area:["Literary Humor"],topic:["Essays"],tags:["satire","comedy"],type:"Blog",createdAt:"2025-06-26T09:01:29Z",summary:"Satirical lists and witty essays on everyday absurdities.",rating:4},{id:"feed-121",title:"Wait But Why",url:"https://waitbutwhy.com/feed",imageUrl:"https://www.google.com/s2/favicons?domain=waitbutwhy.com&sz=128",domain:["Culture"],subdomain:["Ideas"],area:["Long\u2011Form"],topic:["Deep Dives"],tags:["illustrated","essays"],type:"Blog",createdAt:"2025-06-26T09:01:29Z",summary:"Illustrated deep\u2011dive posts on science, technology, and human nature.",rating:4},{id:"feed-122",title:"Damn Interesting",url:"https://www.damninteresting.com/feed/",imageUrl:"https://www.google.com/s2/favicons?domain=damninteresting.com&sz=128",domain:["History"],subdomain:["Curiosities"],area:["Well\u2011Researched Tales"],topic:["Fascinating Stories"],tags:["history","science"],type:"Blog",createdAt:"2025-06-26T09:01:29Z",summary:"Meticulously researched true stories in science and history.",rating:4},{id:"feed-123",title:"The New Atlantis",url:"https://www.thenewatlantis.com/feed",imageUrl:"https://www.google.com/s2/favicons?domain=thenewatlantis.com&sz=128",domain:["Society"],subdomain:["Tech & Ethics"],area:["Policy Essays"],topic:["Science & Humanity"],tags:["bioethics","policy"],type:"Magazine",createdAt:"2025-06-26T09:01:29Z",summary:"Essays on technology, ethics, and society.",rating:4},{id:"feed-124",title:"Symmetry Magazine",url:"https://www.symmetrymagazine.org/feed",imageUrl:"https://www.google.com/s2/favicons?domain=symmetrymagazine.org&sz=128",domain:["Science"],subdomain:["Particle Physics"],area:["Research Highlights"],topic:["Fundamental Physics"],tags:["physics","research"],type:"Magazine",createdAt:"2025-06-26T09:01:29Z",summary:"Accessible magazine about particle physics and its people.",rating:4},{id:"feed-125",title:"Kottke.org",url:"https://feeds.kottke.org/main",imageUrl:"https://www.google.com/s2/favicons?domain=kottke.org&sz=128",domain:["Culture"],subdomain:["Curation"],area:["Interesting Links"],topic:["Cool Finds"],tags:["design","science","art"],type:"Blog",createdAt:"2025-06-26T09:01:29Z",summary:"Curating fascinating finds across art, science, and design.",rating:4},{id:"feed-126",title:"Product Hunt",url:"https://www.producthunt.com/feed",imageUrl:"https://www.google.com/s2/favicons?domain=producthunt.com&sz=128",domain:["Technology"],subdomain:["Startups"],area:["Product Launches"],topic:["New Products"],tags:["startups","apps"],type:"Alert Feed",createdAt:"2025-06-26T09:01:29Z",summary:"Daily listing of new products and startup launches.",rating:4},{id:"feed-127",title:"Existential Comics",url:"https://existentialcomics.com/rss.xml",imageUrl:"https://www.google.com/s2/favicons?domain=existentialcomics.com&sz=128",domain:["Humor"],subdomain:["Philosophy"],area:["Comics"],topic:["Existential Jokes"],tags:["philosophy","comic"],type:"Webcomic",createdAt:"2025-06-26T09:01:29Z",summary:"Webcomic about existential philosophy.",rating:4},{id:"feed-128",title:"1000-Word Philosophy",url:"https://1000wordphilosophy.com/feed/",imageUrl:"https://www.google.com/s2/favicons?domain=1000wordphilosophy.com&sz=128",domain:["Philosophy"],subdomain:["Introductory Essays"],area:["Concise Explanations"],topic:["Concept Overviews"],tags:["philosophy"],type:"Tutorial Series",createdAt:"2025-06-26T09:01:29Z",summary:"Concise 1000\u2011word essays on philosophical topics.",rating:4},{id:"feed-129",title:"Daily Nous",url:"https://dailynous.com/feed/",imageUrl:"https://www.google.com/s2/favicons?domain=dailynous.com&sz=128",domain:["Philosophy"],subdomain:["Academic News"],area:["Professional Updates"],topic:["Philosophy World"],tags:["academia"],type:"News",createdAt:"2025-06-26T09:01:29Z",summary:"News, links, and events in the philosophy profession.",rating:4},{id:"feed-130",title:"Philosophy Now",url:"https://philosophynow.org/rss",imageUrl:"https://www.google.com/s2/favicons?domain=philosophynow.org&sz=128",domain:["Philosophy"],subdomain:["Public Philosophy"],area:["Magazine"],topic:["Essays & Debates"],tags:["ethics","metaphysics"],type:"Magazine",createdAt:"2025-06-26T09:01:29Z",summary:"Popular philosophy magazine with accessible essays.",rating:4},{id:"feed-131",title:"APA Blog",url:"https://blog.apaonline.org/feed/",imageUrl:"https://www.google.com/s2/favicons?domain=apaonline.org&sz=128",domain:["Philosophy"],subdomain:["Professional Association"],area:["Commentary"],topic:["Community Voices"],tags:["academia"],type:"Blog",createdAt:"2025-06-26T09:01:29Z",summary:"Official blog of the American Philosophical Association.",rating:4},{id:"feed-132",title:"Quartz",url:"https://qz.com/rss",imageUrl:"https://www.google.com/s2/favicons?domain=qz.com&sz=128",domain:["News"],subdomain:["Business & Tech"],area:["Global Economy"],topic:["Explainers"],tags:["business","tech"],type:"News",createdAt:"2025-06-26T09:01:29Z",summary:"Global business news and in\u2011depth explainer articles.",rating:4},{id:"feed-133",title:"Book Riot",url:"https://bookriot.com/feed/",imageUrl:"https://www.google.com/s2/favicons?domain=bookriot.com&sz=128",domain:["Arts"],subdomain:["Books"],area:["Reading Culture"],topic:["Lists & Reviews"],tags:["books","reading"],type:"Blog",createdAt:"2025-06-26T09:01:29Z",summary:"News and recommendations for book lovers.",rating:4},{id:"feed-134",title:"Reddit r/BookSuggestions",url:"https://www.reddit.com/r/booksuggestions/.rss",imageUrl:"https://www.google.com/s2/favicons?domain=reddit.com&sz=128",domain:["Community"],subdomain:["Books"],area:["Forum"],topic:["Recommendations"],tags:["books"],type:"Forum",createdAt:"2025-06-26T09:01:29Z",summary:"Crowdsourced book recommendation community.",rating:4},{id:"feed-135",title:"Scientific American Global",url:"http://rss.sciam.com/ScientificAmerican-Global",imageUrl:"https://www.google.com/s2/favicons?domain=scientificamerican.com&sz=128",domain:["Science"],subdomain:["General Science"],area:["Magazine"],topic:["Research News"],tags:["science"],type:"Magazine",createdAt:"2025-06-26T09:01:29Z",summary:"Global science news from Scientific American.",rating:4},{id:"feed-136",title:"Fast.ai",url:"https://www.fast.ai/index.xml",imageUrl:"https://www.google.com/s2/favicons?domain=fast.ai&sz=128",domain:["Technology"],subdomain:["Machine Learning"],area:["Education"],topic:["Tutorials"],tags:["deep-learning","course"],type:"Tutorial Series",createdAt:"2025-06-26T09:01:29Z",summary:"Practical machine learning lessons and updates.",rating:4},{id:"feed-137",title:"APOD",url:"http://www.acme.com/jef/apod/rss.xml",imageUrl:"https://www.google.com/s2/favicons?domain=nasa.gov&sz=128",domain:["Science"],subdomain:["Astronomy"],area:["Image of the Day"],topic:["Space Photography"],tags:["astrophotography"],type:"Alert Feed",createdAt:"2025-06-26T09:01:29Z",summary:"NASA's Astronomy Picture of the Day with explanations.",rating:4},{id:"feed-138",title:"ScienceDaily Astronomy",url:"http://www.sciencedaily.com/rss/space_time/astronomy.xml",imageUrl:"https://www.google.com/s2/favicons?domain=sciencedaily.com&sz=128",domain:["Science"],subdomain:["Astronomy"],area:["Research News"],topic:["Discoveries"],tags:["space"],type:"News",createdAt:"2025-06-26T09:01:29Z",summary:"Latest astronomy and space science news.",rating:4},{id:"feed-139",title:"Sci-News Astronomy",url:"http://www.sci-news.com/news/astronomy/feed",imageUrl:"https://www.google.com/s2/favicons?domain=sci-news.com&sz=128",domain:["Science"],subdomain:["Astronomy"],area:["Research News"],topic:["Discoveries"],tags:["space"],type:"News",createdAt:"2025-06-26T09:01:29Z",summary:"Breaking astronomy and space exploration stories.",rating:4},{id:"feed-140",title:"A Philosopher's Blog",url:"http://aphilosopher.drmcl.com/feed/",imageUrl:"https://www.google.com/s2/favicons?domain=drmcl.com&sz=128",domain:["Philosophy"],subdomain:["Personal Blog"],area:["Applied Ethics"],topic:["Opinion"],tags:["ethics"],type:"Blog",createdAt:"2025-06-26T09:01:29Z",summary:"Commentary on philosophy, politics, and ethics.",rating:4},{id:"feed-141",title:"Mental Floss",url:"http://mentalfloss.com/rss.xml",imageUrl:"https://www.google.com/s2/favicons?domain=mentalfloss.com&sz=128",domain:["Culture"],subdomain:["Trivia"],area:["Fun Facts"],topic:["Explainers"],tags:["trivia","history"],type:"Magazine",createdAt:"2025-06-26T09:01:29Z",summary:"Surprising facts, trivia, and smart explanations.",rating:4},{id:"feed-142",title:"Reddit r/TodayILearned",url:"https://www.reddit.com/r/todayilearned/.rss",imageUrl:"https://www.google.com/s2/favicons?domain=reddit.com&sz=128",domain:["Community"],subdomain:["Trivia"],area:["Crowdsourced Facts"],topic:["TIL"],tags:["facts","learning"],type:"Forum",createdAt:"2025-06-26T09:01:29Z",summary:"Crowdsourced 'Today I Learned' facts with backstory links.",rating:4},{id:"feed-143",title:"McSweeney's Internet Tendency",url:"http://feeds.feedburner.com/mcsweeneys/",imageUrl:"https://www.google.com/s2/favicons?domain=mcsweeneys.net&sz=128",domain:["Humor"],subdomain:["Satire"],area:["Literary Humor"],topic:["Essays"],tags:["satire","comedy"],type:"Blog",createdAt:"2025-06-26T09:01:29Z",summary:"Satirical lists and witty essays on everyday absurdities.",rating:4},{id:"feed-144",title:"Wait But Why",url:"https://waitbutwhy.com/feed",imageUrl:"https://www.google.com/s2/favicons?domain=waitbutwhy.com&sz=128",domain:["Culture"],subdomain:["Ideas"],area:["Long-Form"],topic:["Deep Dives"],tags:["illustrated","essays"],type:"Blog",createdAt:"2025-06-26T09:01:29Z",summary:"Illustrated deep-dive posts on science, technology, and human nature.",rating:4},{id:"feed-145",title:"Real Engineering (YouTube)",url:"https://www.youtube.com/feeds/videos.xml?channel_id=UCR1IuLEqb6UEA_zQ81kwXfg",imageUrl:"https://www.google.com/s2/favicons?domain=youtube.com&sz=128",domain:["Science"],subdomain:["Engineering","Technology"],area:["Fun Facts"],topic:["Innovation"],tags:["engineering","videos"],type:"YouTube",createdAt:"2025-06-25T16:55:00.000Z",summary:"The home of innovation.",rating:4},{id:"feed-146",title:"Veritasium (YouTube)",url:"https://www.youtube.com/feeds/videos.xml?channel_id=UCHnyfMqiRRG1u-2MsSQLbXA",imageUrl:"https://www.google.com/s2/favicons?domain=youtube.com&sz=128",domain:["Science"],subdomain:["Engineering","Technology"],area:["Crowdsourced Facts"],topic:["Innovation"],tags:["engineering","videos"],type:"YouTube",createdAt:"2025-06-25T16:55:00.000Z",summary:"An element of truth - videos about science, education, and anything else we find interesting.",rating:5},{id:"feed-147",title:"3Blue1Brown (YouTube)",url:"https://www.youtube.com/feeds/videos.xml?channel_id=UCYO_jab_esuFRV4b17AJtAw",imageUrl:"https://www.google.com/s2/favicons?domain=youtube.com&sz=128",domain:["Science"],subdomain:["Mathematics"],area:["Literary Humor"],topic:["animation"],tags:["manim","videos"],type:"YouTube",createdAt:"2025-06-25T16:55:00.000Z",summary:"Videos covers a variety of topics in math, or adjacent fields like physics and CS, all with an emphasis on visualizing the core ideas. The goal is to use animation to help elucidate and motivate otherwise tricky topics, and for difficult problems to be made simple with changes in perspective.",rating:5},{id:"feed-148",title:"Internet Encyclopedia of Philosophy (IEP)",url:"https://iep.utm.edu/feed/",imageUrl:"https://www.google.com/s2/favicons?domain=iep.utm.edu/&sz=128",domain:["Philosophy"],subdomain:["Philosophy"],area:["Long-Form"],topic:["Philosophy"],tags:["iep","peer-reviewed"],type:"Open Access Feed",createdAt:"2025-06-25T16:55:00.000Z",summary:"The purpose of the IEP is to provide detailed, scholarly, peer-reviewed information on key topics and philosophers in all areas of academic philosophy.",rating:5},{id:"feed-149",title:"Daily JSTOR",url:"http://daily.jstor.org/feed/",imageUrl:"https://www.google.com/s2/favicons?domain=daily.jstor.org&sz=128",domain:["Education"],subdomain:["Digital Library"],area:["Academic Journals"],topic:["Daily Digest"],tags:["digital-library"],type:"Magazine",createdAt:"2025-06-25T16:55:00.000Z",summary:" JSTOR is a digital library for scholars, researchers, and students of all kinds that provides access to more than 12 million academic journal articles, books, images, JSTOR collections, and primary sources in 75 disciplines.",rating:5},{id:"feed-150",title:"Lex Fridman Podcast",url:"https://lexfridman.com/feed/podcast/",imageUrl:"https://www.google.com/s2/favicons?domain=lexfridman.com&sz=128",domain:["Technology","Science"],subdomain:["Artificial Intelligence"],area:["Interviews"],topic:["Machine Learning"],tags:["AI","robotics","ethics"],type:"Podcast",createdAt:"2025-06-29T00:00:00Z",summary:"Long-form conversations on AI, science, history and philosophy with world-class thinkers.",rating:5},{id:"feed-151",title:"Mindscape with Sean Carroll",url:"https://rss.art19.com/sean-carrolls-mindscape",imageUrl:"https://www.google.com/s2/favicons?domain=preposterousuniverse.com&sz=128",domain:["Science","Philosophy"],subdomain:["Fundamental Science"],area:["Ideas"],topic:["Cosmology"],tags:["physics","consciousness"],type:"Podcast",createdAt:"2025-06-29T00:00:00Z",summary:"Physicist Sean Carroll explores the biggest questions in science and philosophy.",rating:5},{id:"feed-152",title:"NVIDIA AI Podcast",url:"https://feeds.megaphone.fm/nvidiaaipodcast",imageUrl:"https://www.google.com/s2/favicons?domain=nvidia.com&sz=128",domain:["Technology"],subdomain:["Computing"],area:["AI Applications"],topic:["GPU Computing"],tags:["deep learning","graphics"],type:"Podcast",createdAt:"2025-06-29T00:00:00Z",summary:"Stories of how AI is changing the world, told by NVIDIA engineers and partners.",rating:4},{id:"feed-153",title:"TWiML AI Podcast",url:"https://feeds.megaphone.fm/MLN2155636147",imageUrl:"https://www.google.com/s2/favicons?domain=twimlai.com&sz=128",domain:["Technology"],subdomain:["Artificial Intelligence"],area:["Research"],topic:["Machine Learning"],tags:["ML","data science"],type:"Podcast",createdAt:"2025-06-29T00:00:00Z",summary:"Sam Charrington interviews leading ML and data practitioners about cutting-edge work.",rating:4},{id:"feed-154",title:"Science Vs",url:"https://feeds.megaphone.fm/sciencevs",imageUrl:"https://i.scdn.co/image/ab67656300005f1f2d1e9a999f8e07cc0d579f41",domain:["Science"],subdomain:["General Science"],area:["Myth Busting"],topic:["Evidence"],tags:["biology","health"],type:"Podcast",createdAt:"2025-06-29T00:00:00Z",summary:"Gimlet's team pits facts against fads to reveal what science really says.",rating:5},{id:"feed-155",title:"The Skeptics' Guide to the Universe",url:"http://feed.theskepticsguide.org/feed/rss.aspx?feed=sgu",imageUrl:"https://www.google.com/s2/favicons?domain=theskepticsguide.org&sz=128",domain:["Science"],subdomain:["Critical Thinking"],area:["Skepticism"],topic:["Science News"],tags:["skepticism","rationality"],type:"Podcast",createdAt:"2025-06-29T00:00:00Z",summary:"Weekly panel show dissecting science news and pseudoscience.",rating:4},{id:"feed-156",title:"StarTalk Radio",url:"https://feeds.simplecast.com/4T39_jAj",imageUrl:"https://www.google.com/s2/favicons?domain=startalkmedia.com&sz=128",domain:["Science","Culture"],subdomain:["Astronomy"],area:["Popular Science"],topic:["Space"],tags:["astrophysics","pop culture"],type:"Podcast",createdAt:"2025-06-29T00:00:00Z",summary:"Neil deGrasse Tyson mixes science, comedy, and celebrity guests.",rating:4},{id:"feed-157",title:"Philosophize This!",url:"http://philosophizethis.libsyn.com/rss",imageUrl:"https://www.google.com/s2/favicons?domain=philosophizethis.org&sz=128",domain:["Philosophy"],subdomain:["History of Ideas"],area:["Education"],topic:["Western Philosophy"],tags:["ethics","thinkers"],type:"Podcast",createdAt:"2025-06-29T00:00:00Z",summary:"Accessible, chronological exploration of philosophers and schools of thought.",rating:5},{id:"feed-158",title:"Dan Carlin's Hardcore History: Addendum",url:"https://dchhaddendum.libsyn.com/rss",imageUrl:"https://www.google.com/s2/favicons?domain=dancarlin.com&sz=128",domain:["History"],subdomain:["Military History"],area:["Narrative"],topic:["Deep Dives"],tags:["war","civilizations"],type:"Podcast",createdAt:"2025-06-29T00:00:00Z",summary:"Extra interviews and commentary from Dan Carlin's famed storytelling series.",rating:5},{id:"feed-159",title:"History of Philosophy Without Any Gaps",url:"https://feed.podbean.com/hopwag/feed.xml",imageUrl:"https://www.google.com/s2/favicons?domain=historyofphilosophy.net&sz=128",domain:["Philosophy"],subdomain:["History of Ideas"],area:["Education"],topic:["Global Philosophy"],tags:["ancient","medieval"],type:"Podcast",createdAt:"2025-06-29T00:00:00Z",summary:"Peter Adamson covers every major philosopher and school\u2014East and West.",rating:4},{id:"feed-160",title:"Exponential View with Azeem Azhar",url:"https://api.substack.com/feed/podcast/265424/s/1354.rss",imageUrl:"https://www.google.com/s2/favicons?domain=www.exponentialview.co&sz=128",domain:["Technology","Society"],subdomain:["Futures"],area:["Analysis"],topic:["Exponential Tech"],tags:["climate","policy"],type:"Podcast",createdAt:"2025-06-29T00:00:00Z",summary:"How fast-moving technologies reshape business, work and geopolitics.",rating:4},{id:"feed-161",title:"Darknet Diaries",url:"https://podcast.darknetdiaries.com/",imageUrl:"https://www.google.com/s2/favicons?domain=darknetdiaries.com&sz=128",domain:["Technology","History"],subdomain:["Cybersecurity"],area:["Storytelling"],topic:["Hacking"],tags:["security","true crime"],type:"Podcast",createdAt:"2025-06-29T00:00:00Z",summary:"True tales from the dark side of the internet.",rating:5},{id:"feed-162",title:"The Amp Hour",url:"https://theamphour.com/feed/podcast/",imageUrl:"https://www.google.com/s2/favicons?domain=theamphour.com&sz=128",domain:["Engineering"],subdomain:["Electronics"],area:["Industry"],topic:["Hardware Design"],tags:["embedded","EE"],type:"Podcast",createdAt:"2025-06-29T00:00:00Z",summary:"Casual weekly chat for hardware engineers and makers.",rating:4},{id:"feed-163",title:"The Knowledge Project with Shane Parrish",url:"https://feeds.megaphone.fm/FSMI7575968096",imageUrl:"https://i.scdn.co/image/ab67656300005f1f58d37d79547df4d8141a13ea",domain:["Philosophy","Business"],subdomain:["Decision Science"],area:["Self-Improvement"],topic:["Mental Models"],tags:["learning","productivity"],type:"Podcast",createdAt:"2025-06-29T00:00:00Z",summary:"Shane Parrish interviews experts on better thinking and living.",rating:4},{id:"feed-164",title:"Alignment Newsletter Podcast",url:"https://alignment-newsletter.libsyn.com/rss",imageUrl:"https://www.google.com/s2/favicons?domain=rohinshah.com&sz=128",domain:["Technology"],subdomain:["AI Safety"],area:["Research Digest"],topic:["Alignment"],tags:["AI ethics","safety"],type:"Podcast",createdAt:"2025-06-29T00:00:00Z",summary:"Audio version of the weekly Alignment Newsletter, tracking AI-safety papers.",rating:4},{id:"feed-165",title:"Nature Podcast",url:"https://rss.acast.com/nature",imageUrl:"https://www.google.com/s2/favicons?domain=nature.com&sz=128",domain:["Science"],subdomain:["Research Highlights"],area:["Journal"],topic:["Multidisciplinary"],tags:["papers","news"],type:"Podcast",createdAt:"2025-06-29T00:00:00Z",summary:"Editors of *Nature* discuss the week's most interesting studies.",rating:4},{id:"feed-166",title:"Freakonomics Radio",url:"https://feeds.simplecast.com/Y8lFbOT4",imageUrl:"https://www.google.com/s2/favicons?domain=freakonomics.com&sz=128",domain:["Economics","Society"],subdomain:["Behavioral Economics"],area:["Narrative"],topic:["Hidden Incentives"],tags:["data","policy"],type:"Podcast",createdAt:"2025-06-29T00:00:00Z",summary:"Stephen Dubner uncovers the hidden side of everything using data.",rating:5},{id:"feed-167",title:"Planet Money",url:"https://feeds.npr.org/510289/podcast.xml",imageUrl:"https://www.google.com/s2/favicons?domain=npr.org&sz=128",domain:["Economics"],subdomain:["Finance"],area:["Storytelling"],topic:["Markets"],tags:["money","business"],type:"Podcast",createdAt:"2025-06-29T00:00:00Z",summary:"Economics explained through creative, relatable stories.",rating:4},{id:"feed-168",title:"The Vergecast",url:"https://feeds.megaphone.fm/vergecast",imageUrl:"https://i.scdn.co/image/ab67656300005f1f8e08d3b0f126c847db80f0a6",domain:["Technology"],subdomain:["Consumer Tech"],area:["News"],topic:["Gadgets"],tags:["big tech","devices"],type:"Podcast",createdAt:"2025-06-29T00:00:00Z",summary:"The Verge editors break down the week in tech and gadgets.",rating:4},{id:"feed-169",title:"Radiolab",url:"https://feeds.simplecast.com/EmVW7VGp",imageUrl:"https://www.google.com/s2/favicons?domain=wnycstudios.org&sz=128",domain:["Science"],subdomain:["Storytelling"],area:["Interdisciplinary"],topic:["Curiosity"],tags:["biology","culture"],type:"Podcast",createdAt:"2025-06-29T00:00:00Z",summary:"WNYC's seminal show exploring big ideas through sound-rich narratives.",rating:5},{id:"feed-170",title:"Hidden Brain",url:"https://feeds.npr.org/510308/podcast.xml",imageUrl:"https://www.google.com/s2/favicons?domain=npr.org&sz=128",domain:["Psychology"],subdomain:["Behavioral Science"],area:["Storytelling"],topic:["Mind & Behavior"],tags:["cognition","society"],type:"Podcast",createdAt:"2025-06-29T00:00:00Z",summary:"Shankar Vedantam reveals the unconscious patterns shaping our lives.",rating:5},{id:"feed-171",title:"99% Invisible",url:"https://feeds.99percentinvisible.org/99percentinvisible",imageUrl:"https://www.google.com/s2/favicons?domain=99percentinvisible.org&sz=128",domain:["Design"],subdomain:["Architecture"],area:["Hidden Systems"],topic:["Built World"],tags:["urbanism","culture"],type:"Podcast",createdAt:"2025-06-29T00:00:00Z",summary:"Roman Mars uncovers the unnoticed design that shapes our lives.",rating:5},{id:"feed-172",title:"Reply All",url:"https://feeds.megaphone.fm/replyall",imageUrl:"https://i.scdn.co/image/ab67656300005f1fb8d998a58b08ab9eca2c1b11",domain:["Technology"],subdomain:["Internet Culture"],area:["Narrative"],topic:["Online Life"],tags:["stories","culture"],type:"Podcast",createdAt:"2025-06-29T00:00:00Z",summary:"Gimlet's cult-favorite podcast about life on the internet.",rating:4},{id:"feed-173",title:"Accidental Tech Podcast",url:"https://anchor.fm/s/f0658d80/podcast/rss",imageUrl:"https://www.google.com/s2/favicons?domain=atp.fm&sz=128",domain:["Technology"],subdomain:["Software Development"],area:["Apple & Dev"],topic:["Tech News"],tags:["programming","hardware"],type:"Podcast",createdAt:"2025-06-29T00:00:00Z",summary:"Three developers chat weekly about Apple, code, and gadgets.",rating:4},{id:"feed-174",title:"Software Engineering Daily",url:"https://softwareengineeringdaily.com/feed/podcast/",imageUrl:"https://www.google.com/s2/favicons?domain=softwareengineeringdaily.com&sz=128",domain:["Technology"],subdomain:["Software Engineering"],area:["Interviews"],topic:["Infrastructure"],tags:["cloud","devops"],type:"Podcast",createdAt:"2025-06-29T00:00:00Z",summary:"Daily interviews with engineers on modern software topics.",rating:4},{id:"feed-175",title:"Command Line Heroes",url:"https://feeds.simplecast.com/vUHP7wpf",imageUrl:"https://www.google.com/s2/favicons?domain=redhat.com&sz=128",domain:["Technology"],subdomain:["Open Source"],area:["Tech History"],topic:["Developer Culture"],tags:["linux","history"],type:"Podcast",createdAt:"2025-06-29T00:00:00Z",summary:"Red Hat's documentary-style series on open-source pioneers.",rating:4},{id:"feed-176",title:"Huberman Lab Podcast",url:"https://feeds.megaphone.fm/hubermanlab",imageUrl:"https://i.scdn.co/image/ab67656300005f1f66aed32f8066a72781b3b12a",domain:["Science","Health"],subdomain:["Neuroscience"],area:["Human Performance"],topic:["Science-Based Tools"],tags:["neuroscience","wellness","behavior"],type:"Podcast",createdAt:"2025-06-30T00:00:00Z",summary:"Stanford neuroscientist Dr. Andrew Huberman shares evidence-backed methods to improve sleep, focus, fitness and mental health.",rating:5},{id:"feed-177",title:"In Our Time: Philosophy",url:"http://podcasts.files.bbci.co.uk/b006qy05.rss",imageUrl:"https://www.google.com/s2/favicons?domain=bbc.co.uk&sz=128",domain:["Philosophy"],subdomain:["History of Ideas"],area:["Panel Discussion"],topic:["Classics"],tags:["BBC","scholarship"],type:"Podcast",createdAt:"2025-06-29T00:00:00Z",summary:"Melvyn Bragg's BBC round-table on classic philosophical texts.",rating:4},{id:"feed-178",title:"Philosophy Bites",url:"https://philosophybites.libsyn.com/rss",imageUrl:"https://i.scdn.co/image/ab67656300005f1f3f0380e58b5660033a29df48",domain:["Philosophy"],subdomain:["Interviews"],area:["Accessible"],topic:["Key Thinkers"],tags:["ethics","metaphysics"],type:"Podcast",createdAt:"2025-06-29T00:00:00Z",summary:"Short interviews with leading philosophers on specific topics.",rating:4},{id:"feed-179",title:"Rationally Speaking",url:"https://rationallyspeakingpodcast.libsyn.com/rss",imageUrl:"https://www.google.com/s2/favicons?domain=rationallyspeakingpodcast.org&sz=128",domain:["Philosophy"],subdomain:["Rationality"],area:["Interviews"],topic:["Critical Thinking"],tags:["skepticism","science"],type:"Podcast",createdAt:"2025-06-29T00:00:00Z",summary:"Exploring where science meets philosophy and life's messy questions.",rating:4},{id:"feed-180",title:"EconTalk",url:"https://feeds.simplecast.com/wgl4xEgL",imageUrl:"https://www.google.com/s2/favicons?domain=econlib.org&sz=128",domain:["Economics"],subdomain:["Policy"],area:["Interviews"],topic:["Markets"],tags:["data","behavior"],type:"Podcast",createdAt:"2025-06-29T00:00:00Z",summary:"Russ Roberts hosts in-depth conversations on economics and beyond.",rating:5},{id:"feed-181",title:"The Indicator from Planet Money",url:"https://feeds.npr.org/510325/podcast.xml",imageUrl:"https://www.google.com/s2/favicons?domain=npr.org&sz=128",domain:["Economics"],subdomain:["Finance"],area:["Daily News"],topic:["Indicators"],tags:["business","stats"],type:"Podcast",createdAt:"2025-06-29T00:00:00Z",summary:"Quick takes on work, business and the economy from NPR.",rating:4},{id:"feed-182",title:"The Carbon Copy",url:"https://feeds.megaphone.fm/carboncopy",imageUrl:"https://i.scdn.co/image/ab67656300005f1fc7a5addd15c28fd3057b0801",domain:["Environment"],subdomain:["Climate Tech"],area:["Policy"],topic:["Energy Transition"],tags:["climate","policy"],type:"Podcast",createdAt:"2025-06-29T00:00:00Z",summary:"Stories of climate action and the future of energy.",rating:4},{id:"feed-183",title:"Big Picture Science",url:"https://feeds.megaphone.fm/ADV9362943796",imageUrl:"https://www.google.com/s2/favicons?domain=seti.org&sz=128",domain:["Science"],subdomain:["General"],area:["Connections"],topic:["Interdisciplinary"],tags:["SETI","skepticism"],type:"Podcast",createdAt:"2025-06-29T00:00:00Z",summary:"SETI's radio show connecting ideas across scientific fields.",rating:4},{id:"feed-184",title:"Planetary Radio",url:"https://www.omnycontent.com/d/playlist/d95da206-8ee8-4ba5-ba8d-ad1200b4e5a4/cf13d5f5-6040-458d-ab5a-ad200189747d/b75c9f7f-4a63-438e-b506-ad2001897499/podcast.rss",imageUrl:"https://www.google.com/s2/favicons?domain=planetary.org&sz=128",domain:["Science"],subdomain:["Astronomy"],area:["Interview"],topic:["Space Missions"],tags:["space","planets"],type:"Podcast",createdAt:"2025-06-29T00:00:00Z",summary:"Weekly conversations with scientists and engineers exploring our solar system.",rating:4},{id:"feed-185",title:"The History of Rome",url:"https://historyofrome.libsyn.com/rss",imageUrl:"https://www.google.com/s2/favicons?domain=thehistoryofrome.typepad.com&sz=128",domain:["History"],subdomain:["Ancient"],area:["Narrative"],topic:["Roman Empire"],tags:["ancient","rome"],type:"Podcast",createdAt:"2025-06-29T00:00:00Z",summary:"Mike Duncan's celebrated chronicle of Rome from founding to fall.",rating:5},{id:"feed-186",title:"Revolutions",url:"https://revolutionspodcast.libsyn.com/rss",imageUrl:"https://cdn-images.podbay.fm/eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1cmwiOiJodHRwczovL3N0YXRpYy5saWJzeW4uY29tL3AvYXNzZXRzLzMvNC81L2YvMzQ1ZmJkNmEyNTM2NDljMC9SZXZvbHV0aW9uc0xvZ29fVjIuanBnIiwiZmFsbGJhY2siOiJodHRwczovL2lzMS1zc2wubXpzdGF0aWMuY29tL2ltYWdlL3RodW1iL1BvZGNhc3RzL3Y0L2ZjLzkwLzA0L2ZjOTAwNGM3LWFmZDYtNGI1ZS01MDMzLTBmYjNkZmQ2YzNhMy9temFfNzYyMzcxMTQxODc4MDg5ODI3Ni5qcGcvNjAweDYwMGJiLmpwZyJ9.5rFXy4LXYgh_cpPq0V_Sdv30D5QroKcitC4bNJbMzjs.jpg?width=400&height=400",domain:["History"],subdomain:["Political"],area:["Narrative"],topic:["World Revolutions"],tags:["politics","biography"],type:"Podcast",createdAt:"2025-06-29T00:00:00Z",summary:"Deep dives into the great political revolutions of history.",rating:5},{id:"feed-187",title:"Stuff You Missed in History Class",url:"https://anchor.fm/s/65b1f688/podcast/rss",imageUrl:"https://i.scdn.co/image/ab67656300005f1f7a1606494e24613eb8c4d990",domain:["History"],subdomain:["Social"],area:["Stories"],topic:["Lesser-Known Events"],tags:["culture","women"],type:"Podcast",createdAt:"2025-06-29T00:00:00Z",summary:"HowStuffWorks hosts reveal overlooked historical tales.",rating:4},{id:"feed-188",title:"Omnibus",url:"https://audioboom.com/channels/5127257.rss",imageUrl:"https://www.google.com/s2/favicons?domain=omnibusproject.com&sz=128",domain:["History"],subdomain:["Curiosities"],area:["Encyclopedic"],topic:["Bizarre Knowledge"],tags:["trivia","culture"],type:"Podcast",createdAt:"2025-06-29T00:00:00Z",summary:"John Roderick & Ken Jennings document strange historical stories.",rating:4},{id:"feed-189",title:"Skeptoid",url:"https://feed.skeptoid.com/",imageUrl:"https://i.scdn.co/image/ab67656300005f1f75b0d4f08553742be6e66982",domain:["Science"],subdomain:["Critical Thinking"],area:["Mythbusting"],topic:["Skepticism"],tags:["debunking","logic"],type:"Podcast",createdAt:"2025-06-29T00:00:00Z",summary:"Brian Dunning investigates myths, hoaxes and pseudoscience.",rating:4},{id:"feed-190",title:"Science Friday",url:"https://feeds.simplecast.com/h18ZIZD_",imageUrl:"https://www.google.com/s2/favicons?domain=sciencefriday.com&sz=128",domain:["Science"],subdomain:["General"],area:["Weekly News"],topic:["Interviews"],tags:["biology","space"],type:"Podcast",createdAt:"2025-06-29T00:00:00Z",summary:"Ira Flatow shares the latest in science and technology.",rating:4},{id:"feed-191",title:"Houston We Have a Podcast",url:"https://www.nasa.gov/rss/dyn/Houston-We-Have-a-Podcast.rss",imageUrl:"https://www.google.com/s2/favicons?domain=nasa.gov&sz=128",domain:["Science"],subdomain:["Spaceflight"],area:["Agency"],topic:["ISS & Artemis"],tags:["astronauts","missions"],type:"Podcast",createdAt:"2025-06-29T00:00:00Z",summary:"NASA Johnson insiders discuss human space exploration.",rating:4},{id:"feed-192",title:"Modern Wisdom",url:"https://feeds.megaphone.fm/SIXMSB5088139739",imageUrl:"https://i.scdn.co/image/ab67656300005f1fc27a8d722b0ba5ca0f788f35",domain:["Philosophy"],subdomain:["Self-Improvement"],area:["Interviews"],topic:["Life Advice"],tags:["productivity","culture"],type:"Podcast",createdAt:"2025-06-29T00:00:00Z",summary:"Chris Williamson talks with world-class minds about better living.",rating:4},{id:"feed-193",title:"AI Today Podcast",url:"https://anchor.fm/s/f0214058/podcast/rss",imageUrl:"https://www.google.com/s2/favicons?domain=cognilytica.com&sz=128",domain:["Technology"],subdomain:["Artificial Intelligence"],area:["Industry"],topic:["Use Cases"],tags:["enterprise","ML"],type:"Podcast",createdAt:"2025-06-29T00:00:00Z",summary:"Cognilytica hosts discuss real-world AI implementations.",rating:4},{id:"feed-194",title:"Voices in AI",url:"https://voicesinai.com/show/voices-in-ai/podcast-feed/",imageUrl:"https://i.scdn.co/image/ab67656300005f1f4882416c1d16481e7d887fe5",domain:["Technology"],subdomain:["Artificial Intelligence"],area:["Interviews"],topic:["Research & Ethics"],tags:["future","policy"],type:"Podcast",createdAt:"2025-06-29T00:00:00Z",summary:"Byron Reese interviews AI leaders on the tech's impact.",rating:4},{id:"feed-195",title:"AXRP: The AI X-risk Research Podcast",url:"https://axrpodcast.libsyn.com/rss",imageUrl:"https://avatars.githubusercontent.com/u/68572739?v=4",domain:["Technology"],subdomain:["AI Safety"],area:["Research"],topic:["Existential Risk"],tags:["alignment","safety"],type:"Podcast",createdAt:"2025-06-29T00:00:00Z",summary:"Interviews with researchers reducing catastrophic AI risks.",rating:4},{id:"feed-196",title:"Malicious Life",url:"https://maliciouslife.libsyn.com/rss",imageUrl:"https://www.google.com/s2/favicons?domain=cybereason.com&sz=128",domain:["Technology"],subdomain:["Cybersecurity"],area:["History"],topic:["Hacks"],tags:["infosec","crime"],type:"Podcast",createdAt:"2025-06-29T00:00:00Z",summary:"The history of cyber-attacks and the people behind them.",rating:4},{id:"feed-197",title:"History Extra Podcast",url:"https://feeds.megaphone.fm/GLT5697813216",imageUrl:"https://www.google.com/s2/favicons?domain=historyextra.com&sz=128",domain:["History"],subdomain:["General"],area:["Interviews"],topic:["New Research"],tags:["historians","BBC"],type:"Podcast",createdAt:"2025-06-29T00:00:00Z",summary:"BBC History Magazine's weekly talks with leading historians.",rating:4},{id:"feed-198",title:"The Happiness Lab",url:"https://www.omnycontent.com/d/playlist/e73c998e-6e60-432f-8610-ae210140c5b1/96c5c41e-0bc8-4661-b184-ae32006cd726/d623ef0b-3fee-4c26-b815-ae32006cd739/podcast.rss",imageUrl:"https://i.scdn.co/image/ab67656300005f1fcad1cf743dc23b0d0cb311ae",domain:["Psychology"],subdomain:["Well-Being"],area:["Science of Happiness"],topic:["Positive Psych"],tags:["behavior","mental health"],type:"Podcast",createdAt:"2025-06-29T00:00:00Z",summary:"Yale's Dr. Laurie Santos translates happiness research into daily habits.",rating:4},{id:"feed-199",title:"Science Rules! with Bill Nye",url:"https://feeds.simplecast.com/K0NWGFwM",imageUrl:"https://www.google.com/s2/favicons?domain=billnye.com&sz=128",domain:["Science"],subdomain:["Futurism"],area:["Education"],topic:["Explainers"],tags:["STEM","fun"],type:"Podcast",createdAt:"2025-06-29T00:00:00Z",summary:"Bill Nye answers listener questions about science and life.",rating:4},{id:"feed-200",title:"The Curious Cases of Rutherford & Fry",url:"https://podcasts.files.bbci.co.uk/p05ltqxn.rss",imageUrl:"https://www.google.com/s2/favicons?domain=bbc.co.uk&sz=128",domain:["Science"],subdomain:["Explainers"],area:["Mysteries"],topic:["Everyday Science"],tags:["BBC","fun"],type:"Podcast",createdAt:"2025-06-29T00:00:00Z",summary:"BBC duo investigate quirky questions from listeners.",rating:4},{id:"feed-202",title:"Data Skeptic",url:"https://anchor.fm/s/f06031a0/podcast/rss",imageUrl:"https://www.google.com/s2/favicons?domain=dataskeptic.com&sz=128",domain:["Technology"],subdomain:["Data Science"],area:["Interviews"],topic:["ML & Stats"],tags:["AI","analytics"],type:"Podcast",createdAt:"2025-06-29T00:00:00Z",summary:"Short explanatory segments and interviews on data science topics.",rating:4},{id:"feed-203",title:"The Infinite Monkey Cage",url:"http://podcasts.files.bbci.co.uk/b00snr0w.rss",imageUrl:"https://www.google.com/s2/favicons?domain=bbc.co.uk&sz=128",domain:["Science"],subdomain:["Physics"],area:["Comedy Panel"],topic:["Big Questions"],tags:["humor","astronomy"],type:"Podcast",createdAt:"2025-06-29T00:00:00Z",summary:"Physicist Brian Cox and comedian Robin Ince mix jokes with science facts.",rating:4},{id:"feed-204",title:"The Orbital Mechanics Podcast",url:"http://feeds.feedburner.com/orbitalpodcast",imageUrl:"https://www.google.com/s2/favicons?domain=theorbitalmechanics.com&sz=128",domain:["Science"],subdomain:["Spaceflight"],area:["Engineering"],topic:["Rocketry"],tags:["aerospace","missions"],type:"Podcast",createdAt:"2025-06-29T00:00:00Z",summary:"Weekly news and deep dives into spacecraft and rockets.",rating:4},{id:"feed-206",title:"Structural Engineering Channel Podcast",url:"https://engineeringmanagementinstitute.org/category/tsec-podcast/feed/",imageUrl:"https://i.scdn.co/image/ab67656300005f1f055783d96264860f64bd474e",domain:["Engineering"],subdomain:["Structural"],area:["Career"],topic:["Design"],tags:["buildings","materials"],type:"Podcast",createdAt:"2025-06-29T00:00:00Z",summary:"Discussions on best practices in structural engineering.",rating:4},{id:"feed-207",title:"Materialism: The Materials Science Podcast",url:"https://pinecast.com/feed/materialism",imageUrl:"https://i.scdn.co/image/ab67656300005f1f4f2f9a39cc236e51db81149b",domain:["Engineering"],subdomain:["Materials"],area:["Education"],topic:["Metals & Polymers"],tags:["nanotech","manufacturing"],type:"Podcast",createdAt:"2025-06-29T00:00:00Z",summary:"Accessible deep dives into the science behind everyday materials.",rating:4},{id:"feed-208",title:"Engines of Our Ingenuity",url:"https://cdn.houstonpublicmedia.org/podcasts/engines-of-our-ingenuity-apple-podcasts.xml",imageUrl:"https://www.google.com/s2/favicons?domain=houstonpublicmedia.org&sz=128",domain:["History","Engineering"],subdomain:["Technology History"],area:["Short Essays"],topic:["Innovation"],tags:["invention","culture"],type:"Podcast",createdAt:"2025-06-29T00:00:00Z",summary:"Five-minute vignettes on the machines and ideas that shape our world.",rating:4}];var Fe="rss-discover-view",Ue=class extends X.ItemView{constructor(e,t){super(e);this.plugin=t;this.feeds=[];this.filteredFeeds=[];this.filters={query:"",selectedTypes:[],selectedPaths:[],selectedTags:[]};this.currentSort="rating-desc";this.categoryMap={categories:{}};this.isLoading=!0;this.error=null;this.activeSidebarSection="tags";this.currentPage=1;this.pageSize=20;this.getAllTags=()=>[...new Set(this.feeds.flatMap(e=>e.tags))].sort();this.settings=this.plugin.settings}getViewType(){return Fe}getDisplayText(){return"RSS discover"}getIcon(){return"compass"}onOpen(){return this.loadData(),this.render(),Promise.resolve()}loadData(){try{this.isLoading=!0,this.error=null,this.feeds=Ot,this.categoryMap=this.generateCategoryMap(this.feeds);let e=this.app.loadLocalStorage("rss-discover-filters");e&&(this.filters={...this.filters,...e}),this.filterFeeds()}catch(e){this.error=e instanceof Error?e.message:"Unknown error occurred"}finally{this.isLoading=!1}}generateCategoryMap(e){let t={categories:{}};return e.forEach(s=>{s.domain.forEach(a=>{t.categories[a]||(t.categories[a]={}),s.subdomain.forEach(r=>{t.categories[a][r]||(t.categories[a][r]={}),s.area.forEach(n=>{let l=t.categories[a][r];l[n]||(l[n]=[]),s.topic.forEach(d=>{let c=l[n];c.includes(d)||c.push(d)})})})})}),t}filterFeeds(){this.filteredFeeds=this.feeds.filter(e=>{if(this.filters.query){let t=this.filters.query.toLowerCase();if(![e.title,e.url,...e.domain,...e.subdomain,...e.area,...e.topic,...e.tags].join(" ").toLowerCase().includes(t))return!1}return!(this.filters.selectedTypes.length>0&&!this.filters.selectedTypes.includes(e.type)||this.filters.selectedPaths.length>0&&!this.filters.selectedPaths.some(s=>!(s.domain&&!e.domain.includes(s.domain)||s.subdomain&&!e.subdomain.includes(s.subdomain)||s.area&&!e.area.includes(s.area)||s.topic&&!e.topic.includes(s.topic)))||this.filters.selectedTags.length>0&&!this.filters.selectedTags.some(s=>e.tags.includes(s)))}),this.sortFeeds(),this.currentPage=1}sortFeeds(){this.filteredFeeds.sort((e,t)=>{switch(this.currentSort){case"title-asc":return e.title.localeCompare(t.title);case"title-desc":return t.title.localeCompare(e.title);case"created-desc":return new Date(t.createdAt||0).getTime()-new Date(e.createdAt||0).getTime();case"created-asc":return new Date(e.createdAt||0).getTime()-new Date(t.createdAt||0).getTime();case"tags-desc":return t.tags.length-e.tags.length;case"tags-asc":return e.tags.length-t.tags.length;case"category-asc":{let s=e.domain[0]||"",a=t.domain[0]||"";return s.localeCompare(a)}case"tag-name-asc":{let s=e.tags[0]||"",a=t.tags[0]||"";return s.localeCompare(a)}case"type-asc":return(e.type||"").localeCompare(t.type||"");case"type-desc":return(t.type||"").localeCompare(e.type||"");case"rating-desc":return(t.rating||0)-(e.rating||0);case"rating-asc":return(e.rating||0)-(t.rating||0);default:return 0}})}saveFilterState(){this.app.saveLocalStorage("rss-discover-filters",this.filters)}render(){let e=this.containerEl.children[1];if(e.empty(),e.addClass("rss-discover-container"),this.isLoading){this.renderLoading(e);return}if(this.error){this.renderError(e);return}this.renderLayout(e)}renderLoading(e){let t=e.createDiv({cls:"rss-discover-loading"});(0,X.setIcon)(t,"loader-2"),t.appendText(" Loading discover feeds...")}renderError(e){let t=e.createDiv({cls:"rss-discover-error"});(0,X.setIcon)(t,"alert-triangle"),t.appendText(` Error: ${this.error}`);let s=t.createEl("button",{cls:"mod-cta"});s.textContent="Retry",s.addEventListener("click",()=>{this.loadData(),this.render()})}renderLayout(e){let t=e.createDiv({cls:"rss-discover-layout"}),s=t.createDiv({cls:"rss-discover-sidebar"});this.renderSidebar(s);let a=t.createDiv({cls:"rss-discover-content"});this.renderContent(a)}renderSidebar(e){e.empty(),this.renderSidebarHeader(e),this.renderSearch(e);let t=e.createDiv({cls:"rss-discover-sidebar-content"}),s=e.createDiv({cls:"rss-discover-sidebar-nav"}),a=()=>{switch(t.empty(),this.activeSidebarSection){case"types":this.renderTypeFilter(t);break;case"categories":this.renderCategoryTree(t);break;case"tags":this.renderTagFilter(t);break}},r=s.createEl("button",{text:"Types"}),n=s.createEl("button",{text:"Categories"}),l=s.createEl("button",{text:"Tags"}),d=[{el:r,section:"types"},{el:n,section:"categories"},{el:l,section:"tags"}],c=()=>{d.forEach(u=>{u.section===this.activeSidebarSection?u.el.addClass("active"):u.el.removeClass("active")})};d.forEach(u=>{u.el.addEventListener("click",()=>{this.activeSidebarSection=u.section,c(),a()})}),c(),a()}renderSidebarHeader(e){let s=e.createDiv({cls:"rss-discover-header"}).createDiv({cls:"rss-dashboard-nav-container"}),a=s.createDiv({cls:"rss-dashboard-nav-button"});a.appendText("Dashboard"),a.addEventListener("click",()=>void this.plugin.activateView());let r=s.createDiv({cls:"rss-dashboard-nav-button active"});r.appendText("Discover"),r.addEventListener("click",()=>void this.plugin.activateDiscoverView())}renderSearch(e){let s=e.createDiv({cls:"rss-discover-section"}).createEl("input",{type:"text",placeholder:"Search feeds...",value:this.filters.query});s.addClass("rss-discover-search-input"),s.addEventListener("input",a=>{this.filters.query=a.target.value,this.currentPage=1,this.filterFeeds(),this.saveFilterState();let r=this.containerEl.querySelector(".rss-discover-content");r&&this.renderContent(r)})}renderTypeFilter(e){let s=e.createDiv({cls:"rss-discover-section"}).createDiv({cls:"rss-discover-type-list"});Array.from(new Set(this.feeds.map(r=>r.type))).sort().forEach(r=>{let n=s.createDiv({cls:"rss-discover-type-item"}),l=n.createEl("input",{type:"checkbox"});l.checked=this.filters.selectedTypes.includes(r);let d=n.createEl("label");d.textContent=r;let c=n.createDiv({cls:"rss-discover-type-count"});c.textContent=this.feeds.filter(u=>u.type===r).length.toString(),l.addEventListener("change",()=>{l.checked?this.filters.selectedTypes.push(r):this.filters.selectedTypes=this.filters.selectedTypes.filter(u=>u!==r),this.currentPage=1,this.filterFeeds(),this.saveFilterState(),this.render()})})}renderCategoryTree(e){let s=e.createDiv({cls:"rss-discover-section"}).createDiv({cls:"rss-discover-category-tree"});Object.entries(this.categoryMap.categories).forEach(([a,r])=>{this.renderCategoryNode(s,a,r,0)})}renderCategoryNode(e,t,s,a){let r=e.createDiv({cls:"rss-discover-category-node"}),n=`rss-discover-category-node-depth-${Math.min(a,5)}`;r.addClass(n);let l;switch(a){case 0:l="domain";break;case 1:l="subdomain";break;case 2:l="area";break;case 3:l="topic";break;default:l="domain"}let d=r.createEl("input",{type:"checkbox"});d.checked=this.isCategorySelected(t,l);let c=r.createEl("label");c.textContent=t;let u=r.createDiv({cls:"rss-discover-category-count"}),g=this.getOptionCount(l,t);u.textContent=g.toString(),g===0&&(r.addClass("disabled"),d.disabled=!0),d.addEventListener("change",()=>{this.handleCategorySelection(t,d.checked,a,l),this.currentPage=1,this.filterFeeds(),this.saveFilterState(),this.render()}),s&&typeof s=="object"&&(Array.isArray(s)?s.forEach(m=>{this.renderCategoryNode(e,m,{},a+1)}):Object.entries(s).forEach(([m,f])=>{f&&typeof f=="object"&&this.renderCategoryNode(e,m,f,a+1)}))}isCategorySelected(e,t){return this.filters.selectedPaths.some(s=>{switch(t){case"domain":return s.domain===e;case"subdomain":return s.subdomain===e;case"area":return s.area===e;case"topic":return s.topic===e;default:return!1}})}handleCategorySelection(e,t,s,a){if(t){let r={domain:""};switch(a){case"domain":r.domain=e;break;case"subdomain":r.subdomain=e;break;case"area":r.area=e;break;case"topic":r.topic=e;break}this.filters.selectedPaths.some(l=>l.domain===r.domain&&l.subdomain===r.subdomain&&l.area===r.area&&l.topic===r.topic)||this.filters.selectedPaths.push(r)}else this.filters.selectedPaths=this.filters.selectedPaths.filter(r=>{switch(a){case"domain":return r.domain!==e;case"subdomain":return r.subdomain!==e;case"area":return r.area!==e;case"topic":return r.topic!==e;default:return!0}})}renderTagFilter(e){let s=e.createDiv({cls:"rss-discover-section"}).createDiv({cls:"rss-discover-tag-list"}),a=Array.from(new Set(this.feeds.flatMap(n=>n.tags))).sort();(n=>{s.empty(),a.filter(d=>d.toLowerCase().includes(n.toLowerCase())).forEach(d=>{let c=s.createDiv({cls:"rss-discover-tag-item"}),u=c.createEl("input",{type:"checkbox"});u.checked=this.filters.selectedTags.includes(d),c.createDiv({cls:"rss-discover-tag-color-dot"}).style.setProperty("--tag-color",this.getTagColor(d));let m=c.createEl("label");m.textContent=d;let f=c.createDiv({cls:"rss-discover-tag-count"});f.textContent=this.feeds.filter(p=>p.tags.includes(d)).length.toString(),u.addEventListener("change",()=>{u.checked?this.filters.selectedTags.push(d):this.filters.selectedTags=this.filters.selectedTags.filter(p=>p!==d),this.currentPage=1,this.filterFeeds(),this.saveFilterState(),this.render()})})})("")}getTagColor(e){let t=0;if(e.length===0)return"hsl(0, 0%, 80%)";for(let a=0;a<e.length;a++)t=e.charCodeAt(a)+((t<<5)-t),t=t&t;return`hsl(${Math.abs(t%360)}, 60%, 75%)`}renderStarRating(e,t){let s=e.createEl("button",{cls:"rss-discover-card-rating-button"}),a=s.createDiv({cls:"rss-discover-card-stars"});for(let n=1;n<=5;n++){let l=a.createDiv({cls:"rss-discover-card-star"});t>=n?((0,X.setIcon)(l,"star"),l.addClass("filled")):t>=n-.5?((0,X.setIcon)(l,"star-half"),l.addClass("half-filled")):((0,X.setIcon)(l,"star"),l.addClass("empty"))}let r=s.createSpan({cls:"rss-discover-card-rating-text"});r.textContent=`(${t.toFixed(1)}/5)`}renderContent(e){e.empty();let t=e.createDiv({cls:"rss-discover-controls-container"}),s=t.createDiv({cls:"rss-discover-top-section"}),a=s.createDiv({cls:"rss-discover-desktop-filters"});this.createTopFilterControls(a);let r=s.createDiv({cls:"rss-discover-hamburger-menu"}),n=r.createEl("button",{cls:"rss-discover-hamburger-button"});(0,X.setIcon)(n,"menu");let l=r.createDiv({cls:"rss-discover-dropdown-menu"});this.createTopFilterControls(l),n.addEventListener("click",v=>{v.stopPropagation(),l.classList.toggle("active")}),this.registerDomEvent(document,"click",v=>{r.contains(v.target)||l.classList.remove("active")});let d=t.createDiv({cls:"rss-discover-filter-header"}),c=d.createDiv({cls:"rss-discover-results-count"});if(c.textContent=`${this.filteredFeeds.length} feeds found`,this.renderSelectedFilters(d),this.hasActiveFilters()){let v=d.createEl("button",{cls:"rss-clear-filter-button mod-cta"});v.textContent="Clear filters",v.addEventListener("click",()=>{this.filters={query:"",selectedTypes:[],selectedPaths:[],selectedTags:[]},this.currentPage=1,this.filterFeeds(),this.saveFilterState(),this.render()})}let u=e.createDiv({cls:"rss-discover-grid"});if(this.filteredFeeds.length===0){let v=e.createDiv({cls:"rss-discover-empty"});(0,X.setIcon)(v,"search"),v.appendText(" No feeds match your filters");return}let g=Math.max(1,Math.ceil(this.filteredFeeds.length/this.pageSize)),m=(this.currentPage-1)*this.pageSize,f=Math.min(m+this.pageSize,this.filteredFeeds.length);this.filteredFeeds.slice(m,f).forEach(v=>{this.renderFeedCard(u,v)});let h=e.createDiv({cls:"rss-dashboard-pagination-wrapper"});this.renderPagination(h,this.currentPage,g,this.pageSize,this.filteredFeeds.length)}createTopFilterControls(e){let t=e.createDiv({cls:"rss-discover-top-filters"});this.renderFilterDropdown(t,"Domain","domain","folder",this.getAllDomains()),this.renderFilterDropdown(t,"Sub domain","subdomain","folder-open",this.getAllSubdomains()),this.renderFilterDropdown(t,"Area","area","folder-tree",this.getAllAreas()),this.renderFilterDropdown(t,"Topic","topic","file-text",this.getAllTopics()),this.renderFilterDropdown(t,"Type","type","tag",this.getAllTypes()),this.renderFilterDropdown(t,"Tag","tag","hash",this.getAllTags()),this.renderSortDropdown(t)}renderSortDropdown(e){let s=e.createDiv({cls:"rss-discover-sort-container"}).createEl("select");s.addClass("rss-discover-sort-dropdown");let a={"title-asc":"File name (a to z)","title-desc":"File name (z to a)","type-asc":"Type (a to z)","type-desc":"Type (z to a)","rating-desc":"Rating (high to low)","rating-asc":"Rating (low to high)","created-desc":"Created time (new to old)","created-asc":"Created time (old to new)","tags-desc":"Tags number (most to least)","tags-asc":"Tags number (least to most)","category-asc":"Category (a to z)","tag-name-asc":"First tag (a to z)"};for(let[r,n]of Object.entries(a)){let l=s.createEl("option",{value:r,text:n});r===this.currentSort&&(l.selected=!0)}s.addEventListener("change",r=>{this.currentSort=r.target.value,this.currentPage=1,this.sortFeeds();let n=this.containerEl.querySelector(".rss-discover-content");n&&this.renderContent(n)})}renderFilterDropdown(e,t,s,a,r){let l=e.createDiv({cls:"rss-discover-filter-container"}).createDiv({cls:"rss-discover-dropdown-container"}),d=l.createEl("input",{type:"text",placeholder:`Search ${t.toLowerCase()}...`});d.addClass("rss-discover-filter-input");let c=l.createDiv({cls:"rss-discover-filter-dropdown"});c.addClass("hidden"),this.populateFilterDropdown(c,r,s,"");let u;d.addEventListener("input",g=>{let m=g.target.value;if(u&&window.clearTimeout(u),m.trim()){let f=r.filter(p=>p.toLowerCase().includes(m.toLowerCase()));this.populateFilterDropdown(c,f,s,m),c.removeClass("hidden"),c.addClass("visible")}else this.populateFilterDropdown(c,r,s,""),c.removeClass("hidden"),c.addClass("visible")}),d.addEventListener("focus",()=>{this.populateFilterDropdown(c,r,s,""),c.removeClass("hidden"),c.addClass("visible")}),this.registerDomEvent(document,"click",g=>{l.contains(g.target)||(c.removeClass("visible"),c.addClass("hidden"))})}populateFilterDropdown(e,t,s,a){if(e.empty(),t.length===0){let r=e.createDiv({cls:"rss-discover-dropdown-no-results"});r.textContent="No matches found";return}t.forEach(r=>{let n=e.createDiv({cls:"rss-discover-dropdown-item"}),l=n.createEl("input",{type:"checkbox"});l.checked=this.isOptionSelected(s,r);let d=n.createDiv({cls:"rss-discover-dropdown-text"});d.textContent=r;let c=n.createDiv({cls:"rss-discover-dropdown-count"});c.textContent=this.getOptionCount(s,r).toString(),l.addEventListener("change",()=>{this.handleFilterSelection(s,r,l.checked),this.currentPage=1,this.filterFeeds(),this.saveFilterState(),this.render()}),n.addEventListener("click",u=>{u.target!==l&&(l.checked=!l.checked,this.handleFilterSelection(s,r,l.checked),this.currentPage=1,this.filterFeeds(),this.saveFilterState(),this.render())})})}isOptionSelected(e,t){switch(e){case"type":return this.filters.selectedTypes.includes(t);case"tag":return this.filters.selectedTags.includes(t);case"domain":case"subdomain":case"area":case"topic":return this.filters.selectedPaths.some(s=>{switch(e){case"domain":return s.domain===t;case"subdomain":return s.subdomain===t;case"area":return s.area===t;case"topic":return s.topic===t;default:return!1}});default:return!1}}getOptionCount(e,t){switch(e){case"type":return this.feeds.filter(s=>s.type===t).length;case"tag":return this.feeds.filter(s=>s.tags.includes(t)).length;case"domain":return this.feeds.filter(s=>s.domain.includes(t)).length;case"subdomain":return this.feeds.filter(s=>s.subdomain.includes(t)).length;case"area":return this.feeds.filter(s=>s.area.includes(t)).length;case"topic":return this.feeds.filter(s=>s.topic.includes(t)).length;default:return 0}}handleFilterSelection(e,t,s){switch(e){case"type":s?this.filters.selectedTypes.includes(t)||this.filters.selectedTypes.push(t):this.filters.selectedTypes=this.filters.selectedTypes.filter(a=>a!==t);break;case"tag":s?this.filters.selectedTags.includes(t)||this.filters.selectedTags.push(t):this.filters.selectedTags=this.filters.selectedTags.filter(a=>a!==t);break;case"domain":case"subdomain":case"area":case"topic":if(s){let a={domain:""};switch(e){case"domain":a.domain=t;break;case"subdomain":a.subdomain=t;break;case"area":a.area=t;break;case"topic":a.topic=t;break}this.filters.selectedPaths.some(n=>n.domain===a.domain&&n.subdomain===a.subdomain&&n.area===a.area&&n.topic===a.topic)||this.filters.selectedPaths.push(a)}else this.filters.selectedPaths=this.filters.selectedPaths.filter(a=>{switch(e){case"domain":return a.domain!==t;case"subdomain":return a.subdomain!==t;case"area":return a.area!==t;case"topic":return a.topic!==t;default:return!0}});break}}getAllDomains(){let e=new Set;return this.feeds.forEach(t=>{t.domain.forEach(s=>e.add(s))}),Array.from(e).sort()}getAllSubdomains(){let e=new Set;return this.feeds.forEach(t=>{t.subdomain.forEach(s=>e.add(s))}),Array.from(e).sort()}getAllAreas(){let e=new Set;return this.feeds.forEach(t=>{t.area.forEach(s=>e.add(s))}),Array.from(e).sort()}getAllTopics(){let e=new Set;return this.feeds.forEach(t=>{t.topic.forEach(s=>e.add(s))}),Array.from(e).sort()}getAllTypes(){return Array.from(new Set(this.feeds.map(e=>e.type))).sort()}getInitials(e){let t=e.split(" ");return t.length>1?(t[0][0]+t[1][0]).toUpperCase():t.length===1&&t[0].length>1?(t[0][0]+t[0][1]).toUpperCase():t.length===1&&t[0].length===1?t[0][0].toUpperCase():"NA"}renderFeedCard(e,t){let s=e.createDiv({cls:"rss-discover-card"}),r=s.createDiv({cls:"rss-discover-card-header"}).createDiv({cls:"rss-discover-card-title-group"}),n=r.createDiv({cls:"rss-discover-card-logo-container"});if(t.imageUrl){let h=n.createEl("img",{cls:"rss-discover-card-logo",attr:{src:t.imageUrl}});h.onerror=()=>{h.remove(),n.createDiv({cls:"rss-discover-card-initials",text:this.getInitials(t.title)})}}else n.createDiv({cls:"rss-discover-card-initials",text:this.getInitials(t.title)});r.createDiv().createDiv({cls:"rss-discover-card-title",text:t.title});let d=s.createDiv({cls:"rss-discover-card-content"});t.summary&&d.createDiv({cls:"rss-discover-card-summary",text:t.summary});let c=d.createDiv({cls:"rss-discover-card-meta-top"});if(t.type){let h=c.createDiv({cls:"rss-discover-card-type"});h.textContent=`${t.type}`}if((t.type||t.domain.length>0)&&t.tags.length>0&&c.createDiv({text:"|",cls:"rss-discover-card-pipe"}),t.tags.length>0){let h=c.createDiv({cls:"rss-discover-card-tags"});t.tags.forEach(v=>{h.createDiv({cls:"rss-discover-card-tag",text:v}).style.setProperty("--tag-color",this.getTagColor(v))})}let u=s.createDiv({cls:"rss-discover-card-footer"}),g=u.createDiv({cls:"rss-discover-card-footer-left"});t.rating!==void 0&&t.rating!==null?this.renderStarRating(g,t.rating):g.createEl("button",{cls:"rss-discover-card-rating-button is-na",text:"Rating n/a"});let m=u.createDiv({cls:"rss-discover-card-footer-right"});if(m.createEl("button",{text:"Preview",cls:"rss-discover-card-preview-btn"}).addEventListener("click",()=>{new Ke(this.app,t).open()}),this.plugin.settings.feeds.some(h=>h.url===t.url)){let h=m.createEl("button",{text:"Added",cls:"rss-discover-card-add-btn"});h.disabled=!0}else{let h=m.createEl("button",{text:"Add feed",cls:"rss-discover-card-add-btn"});h.addEventListener("click",()=>{(async()=>(await this.addFeed(t),h.setText("Added"),h.disabled=!0))()})}}async addFeed(e){try{let t=this.getFolderForFeedType(e.type);await this.plugin.addFeed(e.title,e.url,t)}catch(t){new X.Notice(`Failed to add feed: ${t instanceof Error?t.message:"Unknown error"}`)}}getFolderForFeedType(e){let t=["YouTube","video series","vlog"],s=["Podcast"];return t.includes(e)?this.plugin.settings.media.defaultYouTubeFolder:s.includes(e)?this.plugin.settings.media.defaultPodcastFolder:"Uncategorized"}previewFeed(e){window.open(e.url,"_blank")}onClose(){return Promise.resolve()}hasActiveFilters(){return this.filters.query!==""||this.filters.selectedTypes.length>0||this.filters.selectedPaths.length>0||this.filters.selectedTags.length>0}renderSelectedFilters(e){if(!this.hasActiveFilters())return;let t=e.createDiv({cls:"rss-discover-selected-filters"});if(this.filters.query){let s=t.createDiv({cls:"rss-discover-selected-filter"});(0,X.setIcon)(s,"search"),s.appendText(` "${this.filters.query}"`)}this.filters.selectedTypes.forEach(s=>{let a=t.createDiv({cls:"rss-discover-selected-filter"});(0,X.setIcon)(a,"tag"),a.appendText(` ${s}`)}),this.filters.selectedPaths.forEach(s=>{let a=t.createDiv({cls:"rss-discover-selected-filter"});(0,X.setIcon)(a,"folder");let r=[s.domain,s.subdomain,s.area,s.topic].filter(Boolean).join(" > ");a.appendText(` ${r}`)}),this.filters.selectedTags.forEach(s=>{let a=t.createDiv({cls:"rss-discover-selected-filter"});(0,X.setIcon)(a,"hash"),a.appendText(` ${s}`),a.style.setProperty("--tag-color",this.getTagColor(s))})}renderPagination(e,t,s,a,r){let n=e.createDiv({cls:"rss-dashboard-pagination"}),l=n.createEl("button",{cls:"rss-dashboard-pagination-btn prev",text:"<"});l.disabled=t===1,l.onclick=()=>this.handlePageChange(t-1);let d=7,c=Math.max(1,t-3),u=Math.min(s,t+3);u-c<d-1&&(c===1?u=Math.min(s,c+d-1):u===s&&(c=Math.max(1,u-d+1))),c>1&&(this.createPageButton(n,1,t),c>2&&n.createEl("span",{text:"...",cls:"rss-dashboard-pagination-ellipsis"}));for(let v=c;v<=u;v++)this.createPageButton(n,v,t);u<s&&(u<s-1&&n.createEl("span",{text:"...",cls:"rss-dashboard-pagination-ellipsis"}),this.createPageButton(n,s,t));let g=n.createEl("button",{cls:"rss-dashboard-pagination-btn next",text:">"});g.disabled=t===s,g.onclick=()=>this.handlePageChange(t+1);let m=n.createEl("select",{cls:"rss-dashboard-page-size-dropdown"}),f=[10,20,40,50,60,80,100];for(let v of f){let y=m.createEl("option",{text:String(v),value:String(v)});v===a&&(y.selected=!0)}m.onchange=v=>{let y=Number(v.target.value);this.handlePageSizeChange(y)};let p=(t-1)*a+1,h=Math.min(t*a,r);n.createEl("span",{cls:"rss-dashboard-pagination-results",text:`Results: ${p} - ${h} of ${r}`})}handlePageChange(e){this.currentPage=e;let t=this.containerEl.querySelector(".rss-discover-content");t&&this.renderContent(t)}handlePageSizeChange(e){this.pageSize=e,this.currentPage=1;let t=this.containerEl.querySelector(".rss-discover-content");t&&this.renderContent(t)}createPageButton(e,t,s){let a=e.createEl("button",{cls:"rss-dashboard-pagination-btn"+(t===s?" active":""),text:String(t)});a.disabled=t===s,a.onclick=()=>this.handlePageChange(t)}};function pe(o){return o.replace(/[<>&'"]/g,i=>{switch(i){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case"'":return"&apos;";case'"':return"&quot;";default:return i}})}var Ce=class{static parseOpml(i){let t=new DOMParser().parseFromString(i,"text/xml"),s=[],a={},r={},n=(g,m="")=>{for(let f=0;f<g.length;f++){let p=g[f],h=p.getAttribute("type");if(!h&&p.hasChildNodes()){let v=p.getAttribute("title")||p.getAttribute("text")||"Unnamed folder",y=m?`${m}/${v}`:v;a[y]||(a[y]={name:v,subfolders:[]},m&&(r[y]=m));let w=p.querySelectorAll(":scope > outline");n(w,y)}else if(h==="rss"||p.getAttribute("xmlUrl")){let v=p.getAttribute("title")||p.getAttribute("text")||"Unnamed feed",y=p.getAttribute("xmlUrl")||"",w=p.getAttribute("category")||m||"Uncategorized";y&&s.push({title:v,url:y,folder:w,items:[],lastUpdated:0})}}},l=t.querySelectorAll("body > outline");n(l);let d=[],c=new Set,u=(g,m)=>{let f=g.split("/"),p=f[0],h=m.find(v=>v.name===p);return h||(h={name:p,subfolders:[]},m.push(h)),f.length===1?h:u(f.slice(1).join("/"),h.subfolders)};return Object.keys(a).forEach(g=>{if(!c.has(g)){let m=a[g],f=r[g];if(!f)d.push(m);else{let p=u(f,d);p&&p.subfolders.push(m)}c.add(g)}}),{feeds:s,folders:d}}static parseOpmlMetadata(i){let t=new DOMParser().parseFromString(i,"text/xml"),s=[],a={},r={},n=(g,m="")=>{for(let f=0;f<g.length;f++){let p=g[f],h=p.getAttribute("type");if(!h&&p.hasChildNodes()){let v=p.getAttribute("title")||p.getAttribute("text")||"Unnamed folder",y=m?`${m}/${v}`:v;a[y]||(a[y]={name:v,subfolders:[]},m&&(r[y]=m));let w=p.querySelectorAll(":scope > outline");n(w,y)}else if(h==="rss"||p.getAttribute("xmlUrl")){let v=p.getAttribute("title")||p.getAttribute("text")||"Unnamed feed",y=p.getAttribute("xmlUrl")||"",w=p.getAttribute("category")||m||"Uncategorized";y&&s.push({title:v,url:y,folder:w,lastUpdated:0,importStatus:"pending"})}}},l=t.querySelectorAll("body > outline");n(l);let d=[],c=new Set,u=(g,m)=>{let f=g.split("/"),p=f[0],h=m.find(v=>v.name===p);return h||(h={name:p,subfolders:[]},m.push(h)),f.length===1?h:u(f.slice(1).join("/"),h.subfolders)};return Object.keys(a).forEach(g=>{if(!c.has(g)){let m=a[g],f=r[g];if(!f)d.push(m);else{let p=u(f,d);p&&p.subfolders.push(m)}c.add(g)}}),{feeds:s,folders:d}}static importOpml(i,e,t){try{let{feeds:s,folders:a}=this.parseOpml(i),r=[...e];for(let l of s)r.some(d=>d.url===l.url)||r.push(l);let n=this.mergeFolders(t,a);return{feeds:r,folders:n}}catch(s){throw new Error("Failed to import OPML: Invalid format")}}static mergeFolders(i,e){let t=[...i],s=(a,r)=>{for(let n of r){let l=a.find(d=>d.name===n.name);l?s(l.subfolders,n.subfolders):a.push({...n})}};return s(t,e),t}static generateOpml(i,e){let t=`<?xml version="1.0" encoding="UTF-8"?>
`;t+=`<opml version="2.0">
`,t+=`  <head>
`,t+=`    <title>RSS dashboard feeds</title>
`,t+=`    <dateCreated>${new Date().toUTCString()}</dateCreated>
`,t+=`  </head>
`,t+=`  <body>
`;let s=n=>i.filter(l=>l.folder===n),a=(n,l,d)=>{let c=" ".repeat(l),u="",g=d?`${d}/${n.name}`:n.name;u+=`${c}<outline text="${pe(n.name)}" title="${pe(n.name)}">
`;let m=s(g);for(let f of m)u+=`${c}  <outline text="${pe(f.title)}" title="${pe(f.title)}" type="rss" xmlUrl="${pe(f.url)}" category="${pe(g)}"/>
`;for(let f of n.subfolders)u+=a(f,l+2,g);return u+=`${c}</outline>
`,u},r=i.filter(n=>n.folder==="Uncategorized"||!n.folder||!e.some(l=>l.name===n.folder.split("/")[0]));for(let n of r)t+=`    <outline text="${pe(n.title)}" title="${pe(n.title)}" type="rss" xmlUrl="${pe(n.url)}" category="${pe(n.folder)}"/>
`;for(let n of e)t+=a(n,4,"");return t+=`  </body>
`,t+="</opml>",t}};var Qe=class extends P.Plugin{constructor(){super(...arguments);this.importStatusBarItem=null;this.backgroundImportQueue=[];this.isBackgroundImporting=!1}async getActiveDashboardView(){let e=this.app.workspace.getLeavesOfType(Se);for(let t of e){(0,P.requireApiVersion)("1.7.2")&&await t.loadIfDeferred();let s=t.view;if(s instanceof Re)return s}return null}async getActiveDiscoverView(){let e=this.app.workspace.getLeavesOfType(Fe);for(let t of e){(0,P.requireApiVersion)("1.7.2")&&await t.loadIfDeferred();let s=t.view;if(s instanceof Ue)return s}return null}async getActiveReaderView(){let e=this.app.workspace.getLeavesOfType(oe);for(let t of e){(0,P.requireApiVersion)("1.7.2")&&await t.loadIfDeferred();let s=t.view;if(s instanceof ge)return s}return null}async onload(){await this.loadSettings();let e=await this.getActiveDashboardView();e&&e.render();try{this.feedParser=new Je(this.settings.media,this.settings.availableTags),this.articleSaver=new Ae(this.app,this.settings.articleSaving),P.Platform.isMobile&&this.applyMobileOptimizations();let t=this.getAllArticles();await this.articleSaver.fixSavedFilePaths(t),await this.validateSavedArticles(),this.registerView(Se,s=>new Re(s,this)),this.registerView(Fe,s=>new Ue(s,this)),this.registerView(oe,s=>new ge(s,this.settings,this.articleSaver,a=>{this.onArticleSaved(a)})),this.addRibbonIcon("rss","RSS dashboard",()=>{this.activateView()}),this.addRibbonIcon("compass","RSS discover",()=>{this.activateDiscoverView()}),this.addSettingTab(new Oe(this.app,this)),this.addCommand({id:"open-dashboard",name:"Open dashboard",callback:()=>{this.activateView()}}),this.addCommand({id:"open-discover",name:"Open discover",callback:()=>{this.activateDiscoverView()}}),this.addCommand({id:"refresh-feeds",name:"Refresh feeds",callback:()=>{this.refreshFeeds()}}),this.addCommand({id:"import-opml",name:"Import opml",callback:()=>{this.importOpml()}}),this.addCommand({id:"export-opml",name:"Export opml",callback:()=>{this.exportOpml()}}),this.addCommand({id:"apply-feed-limits",name:"Apply feed limits to all feeds",callback:()=>{this.applyFeedLimitsToAllFeeds()}}),this.addCommand({id:"toggle-sidebar",name:"Toggle sidebar",checkCallback:s=>this.app.workspace.getLeavesOfType(Se).length>0?(s||(async()=>{let r=await this.getActiveDashboardView();r&&(this.settings.sidebarCollapsed=!this.settings.sidebarCollapsed,await this.saveSettings(),r.render())})(),!0):!1}),this.registerInterval(window.setInterval(()=>{this.refreshFeeds()},this.settings.refreshInterval*60*1e3))}catch(t){new P.Notice("Error initializing RSS dashboard plugin.")}}applyMobileOptimizations(){this.settings.refreshInterval<60&&(this.settings.refreshInterval=60),this.settings.maxItems>50&&(this.settings.maxItems=50),this.settings.viewStyle==="list"&&(this.settings.viewStyle="card"),this.settings.sidebarCollapsed||(this.settings.sidebarCollapsed=!0)}async activateView(){let{workspace:e}=this.app;try{let t=null,s=e.getLeavesOfType(Se);if(s.length>0)t=s[0];else switch(this.settings.viewLocation){case"left-sidebar":t=e.getLeftLeaf(!1);break;case"right-sidebar":t=e.getRightLeaf(!1);break;default:t=e.getLeaf("tab");break}t&&(await t.setViewState({type:Se,active:!0}),e.revealLeaf(t))}catch(t){new P.Notice("Error opening RSS dashboard view")}}async activateDiscoverView(){let{workspace:e}=this.app;try{let t=null,s=e.getLeavesOfType(Fe);if(s.length>0)t=s[0];else switch(this.settings.viewLocation){case"left-sidebar":t=e.getLeftLeaf(!1);break;case"right-sidebar":t=e.getRightLeaf(!1);break;default:t=e.getLeaf("tab");break}t&&(await t.setViewState({type:Fe,active:!0}),e.revealLeaf(t))}catch(t){new P.Notice("Error opening RSS discover view")}}async onArticleSaved(e){if(e.feedUrl){let t=this.settings.feeds.find(s=>s.url===e.feedUrl);if(t){let s=t.items.find(a=>a.guid===e.guid);if(s){if(s.saved=!0,this.settings.articleSaving.addSavedTag&&(s.tags||(s.tags=[]),!s.tags.some(r=>r.name.toLowerCase()==="saved"))){let r=this.settings.availableTags.find(n=>n.name.toLowerCase()==="saved");r?s.tags.push({...r}):s.tags.push({name:"saved",color:"#3498db"})}this.saveSettings();let a=await this.getActiveDashboardView();a&&a.updateArticleSaveButton(e.guid)}}}}async refreshFeeds(e){try{let t=e||this.settings.feeds,s="";t.length===1?s=t[0].title:s=`${t.length} feeds`,new P.Notice(`Refreshing ${s}...`),(await this.feedParser.refreshAllFeeds(t)).forEach(n=>{let l=this.settings.feeds.findIndex(d=>d.url===n.url);l>=0&&(this.settings.feeds[l]=n)}),await this.validateSavedArticles(),await this.saveSettings();let r=await this.getActiveDashboardView();r&&(r.refresh(),new P.Notice(`Feeds refreshed: ${s}`))}catch(t){console.error("[RSS dashboard] Error refreshing feeds:",t),new P.Notice(`Error refreshing  ${t instanceof Error?t.message:"Unknown error"}`)}}async applyFeedLimitsToAllFeeds(){try{let e=0;for(let s of this.settings.feeds){let a=s.items.length;if(s.maxItemsLimit&&s.maxItemsLimit>0&&s.items.length>s.maxItemsLimit){let r=s.items.filter(c=>c.read),n=s.items.filter(c=>!c.read);n.sort((c,u)=>new Date(u.pubDate).getTime()-new Date(c.pubDate).getTime());let l=Math.max(0,s.maxItemsLimit-r.length),d=n.slice(0,l);s.items=[...r,...d]}if(s.autoDeleteDuration&&s.autoDeleteDuration>0){let r=new Date;r.setDate(r.getDate()-s.autoDeleteDuration);let n=s.items.filter(d=>d.read),l=s.items.filter(d=>!d.read&&new Date(d.pubDate).getTime()>r.getTime());s.items=[...n,...l]}s.items.length!==a&&e++}await this.saveSettings();let t=await this.getActiveDashboardView();t&&t.refresh(),e>0?new P.Notice(`Applied limits to ${e} feeds`):new P.Notice("No feeds needed limit adjustments")}catch(e){new P.Notice(`Error applying feed limits: ${e instanceof Error?e.message:"Unknown error"}`)}}async refreshSelectedFeed(e){await this.refreshFeeds([e])}async refreshFeedsInFolder(e){let t=this.settings.feeds.filter(s=>s.folder?s.folder===e||s.folder.startsWith(e+"/"):!1);t.length>0?await this.refreshFeeds(t):new P.Notice("No feeds found in the selected folder")}async updateArticle(e,t,s){let a=this.settings.feeds.find(l=>l.url===t);if(!a)return;let r=a.items.find(l=>l.guid===e);if(!r)return;Object.assign(r,s),await this.saveSettings();let n=await this.getActiveDashboardView();n&&n.refresh()}showImportProgressModal(e,t,s){let a=document.body.createDiv({cls:"rss-dashboard-modal rss-dashboard-modal-container rss-dashboard-import-modal"}),r=a.createDiv({cls:"rss-dashboard-modal-content"}),n=r.createDiv({cls:"rss-dashboard-import-modal-header"});new P.Setting(n).setName("Importing opml feeds").setHeading();let l=n.createEl("button",{cls:"clickable-icon",attr:{"aria-label":"Minimize"}});(0,P.setIcon)(l,"minus"),l.onclick=t;let d=n.createEl("button",{text:"Abort",cls:"rss-dashboard-import-abort-button"});d.onclick=s;let c=n.createDiv({cls:"import-modal-header-buttons"});c.appendChild(l),c.appendChild(d),r.createDiv({attr:{id:"import-progress-text"},cls:"rss-dashboard-center-text rss-dashboard-import-progress-text",text:`Preparing to import ${e} feeds...`});let g=r.createDiv({cls:"rss-dashboard-import-progress-bar"}).createDiv({attr:{id:"import-progress-fill"},cls:"rss-dashboard-import-progress-fill"});return bt(g,{"--progress-width":"0%"}),r.createDiv({attr:{id:"import-current-feed"},cls:"rss-dashboard-center-text rss-dashboard-import-current-feed"}),a}importOpml(){let e=document.body.createEl("input",{attr:{type:"file"}});e.onchange=async()=>{var s;let t=(s=e.files)==null?void 0:s[0];if(t&&t.name.endsWith(".opml")){let a=await t.text();try{let{feeds:r,folders:n}=Ce.parseOpmlMetadata(a),l=r.filter(u=>!this.settings.feeds.some(g=>g.url===u.url));if(l.length===0){new P.Notice("No new feeds found in the opml file.");return}let d=[];for(let u of l){let g={title:u.title,url:u.url,folder:u.folder,items:[],lastUpdated:Date.now(),mediaType:u.mediaType||"article",autoDeleteDuration:u.autoDeleteDuration,maxItemsLimit:u.maxItemsLimit||50,scanInterval:u.scanInterval};g.mediaType==="video"&&(!g.folder||g.folder==="Uncategorized")?g.folder=this.settings.media.defaultYouTubeFolder:g.mediaType==="podcast"&&(!g.folder||g.folder==="Uncategorized")&&(g.folder=this.settings.media.defaultPodcastFolder),d.push(g)}this.settings.feeds.push(...d),this.settings.folders=Ce.mergeFolders(this.settings.folders,n),await this.saveSettings();let c=await this.getActiveDashboardView();c&&c.render(),new P.Notice(`Imported ${d.length} feeds. Articles will be fetched in the background.`),this.startBackgroundImport(d)}catch(r){let n=r instanceof Error?r.message:String(r);new P.Notice(n)}}else new P.Notice("Please select a valid opml file.")},e.click()}startBackgroundImport(e){this.backgroundImportQueue.push(...e.map(t=>({...t,importStatus:"pending"}))),this.isBackgroundImporting||this.processBackgroundImportQueue()}async processBackgroundImportQueue(){if(this.isBackgroundImporting||this.backgroundImportQueue.length===0)return;if(this.isBackgroundImporting=!0,!this.importStatusBarItem){this.importStatusBarItem=this.addStatusBarItem(),this.importStatusBarItem.textContent="";let a=this.importStatusBarItem.createSpan({cls:"import-statusbar-icon"});(0,P.setIcon)(a,"rss"),this.importStatusBarItem.createSpan({cls:"import-statusbar-text"})}let e=this.backgroundImportQueue.length,t=0;for(;this.backgroundImportQueue.length>0;){let a=this.backgroundImportQueue.shift();if(!a)break;try{a.importStatus="processing",this.updateBackgroundImportProgress(t,e,a.title);let n=await this.feedParser.parseFeed(a.url),l=this.settings.feeds.findIndex(d=>d.url===a.url);l>=0&&(this.settings.feeds[l]={...this.settings.feeds[l],title:n.title||a.title,items:n.items.slice(0,50),lastUpdated:Date.now(),mediaType:n.mediaType}),a.importStatus="completed",t++}catch(n){a.importStatus="failed",a.importError=n instanceof Error?n.message:"Unknown error",t++}t%5===0&&await this.saveSettings();let r=await this.getActiveDashboardView();r&&t%3===0&&r.render(),await wt(100)}await this.saveSettings();let s=await this.getActiveDashboardView();s&&s.render(),this.importStatusBarItem&&(this.importStatusBarItem.remove(),this.importStatusBarItem=null),this.isBackgroundImporting=!1,new P.Notice(`Background import completed. Processed ${t} feeds.`)}updateBackgroundImportProgress(e,t,s){if(this.importStatusBarItem){let a=this.importStatusBarItem.querySelector(".import-statusbar-text");a&&(a.textContent=`  Fetching articles: ${e}/${t} - ${s}`)}}exportOpml(){let e=Ce.generateOpml(this.settings.feeds,this.settings.folders),t=new Blob([e],{type:"text/xml"}),s=URL.createObjectURL(t),a=document.body.createEl("a",{attr:{href:s}});a.download="obsidian-rss-feeds.opml",a.click(),URL.revokeObjectURL(s)}async addFolder(e){if(this.settings.folders.some(s=>s.name===e))new P.Notice(`Folder "${e}" already exists`);else{this.settings.folders.push({name:e,subfolders:[]}),await this.saveSettings();let s=await this.getActiveDashboardView();s&&(s.refresh(),new P.Notice(`Folder "${e}" created`))}}async addFeed(e,t,s,a,r,n){try{if(this.settings.feeds.some(u=>u.url===t)){new P.Notice("This feed URL already exists");return}let l="article";s===this.settings.media.defaultYouTubeFolder?l="video":s===this.settings.media.defaultPodcastFolder&&(l="podcast");let d={title:e,url:t,folder:s,items:[],lastUpdated:Date.now(),autoDeleteDuration:a||0,maxItemsLimit:r||this.settings.maxItems,scanInterval:n||0,mediaType:l};this.settings.feeds.push(d),await this.saveSettings();try{let u=await this.feedParser.parseFeed(t,d),g=this.settings.feeds.findIndex(m=>m.url===t);g>=0&&(this.settings.feeds[g]=u),await this.saveSettings()}catch(u){new P.Notice(`Error parsing feed: ${u instanceof Error?u.message:"Unknown error"}`)}let c=await this.getActiveDashboardView();c&&c.refresh(),new P.Notice(`Feed "${e}" added`)}catch(l){new P.Notice(`Error adding feed: ${l instanceof Error?l.message:"Unknown error"}`)}}async addYouTubeFeed(e,t){try{let s=await ee.getYouTubeRssFeed(e);if(!s){new P.Notice("Unable to determine YouTube feed URL from input");return}if(this.settings.feeds.some(r=>r.url===s)){new P.Notice("This YouTube feed already exists");return}let a=t||`YouTube: ${e}`;await this.addFeed(a,s,this.settings.media.defaultYouTubeFolder)}catch(s){new P.Notice(`Error adding YouTube feed: ${s instanceof Error?s.message:"Unknown error"}`)}}async addSubfolder(e,t){let s=this.settings.folders.find(a=>a.name===e);if(s)if(s.subfolders.some(a=>a.name===t))new P.Notice(`Subfolder "${t}" already exists in "${e}"`);else{s.subfolders.push({name:t,subfolders:[]}),await this.saveSettings();let a=await this.getActiveDashboardView();a&&(a.refresh(),new P.Notice(`Subfolder "${t}" created under "${e}"`))}}async editFeed(e,t,s,a){let r=e.title;if(e.title=t,e.url=s,e.folder=a,r!==t)for(let l of e.items)l.feedTitle=t;await this.saveSettings();let n=await this.getActiveDashboardView();n&&(n.refresh(),new P.Notice(`Feed "${t}" updated`))}async loadSettings(){try{let e=await this.loadData();this.settings=Object.assign({},Z,e!=null?e:{}),this.migrateLegacySettings(),this.settings.readerViewLocation||(this.settings.readerViewLocation="right-sidebar"),this.settings.useWebViewer===void 0&&(this.settings.useWebViewer=!0),this.settings.articleSaving?this.settings.articleSaving=Object.assign({},Z.articleSaving,this.settings.articleSaving):this.settings.articleSaving=Z.articleSaving,this.settings.display?this.settings.display=Object.assign({},Z.display,this.settings.display):this.settings.display=Z.display}catch(e){new P.Notice(`Error loading settings: ${e instanceof Error?e.message:"Unknown error"}`),this.settings=Z}}migrateLegacySettings(){var s,a,r,n;let e=this.settings;e.savePath&&!((s=this.settings.articleSaving)!=null&&s.defaultFolder)&&(this.settings.articleSaving||(this.settings.articleSaving=Z.articleSaving),this.settings.articleSaving.defaultFolder=e.savePath,delete e.savePath),e.template&&!((a=this.settings.articleSaving)!=null&&a.defaultTemplate)&&(this.settings.articleSaving||(this.settings.articleSaving=Z.articleSaving),this.settings.articleSaving.defaultTemplate=e.template,delete e.template),e.addSavedTag!==void 0&&((r=this.settings.articleSaving)==null?void 0:r.addSavedTag)===void 0&&(this.settings.articleSaving||(this.settings.articleSaving=Z.articleSaving),this.settings.articleSaving.addSavedTag=e.addSavedTag,delete e.addSavedTag);let t=this.settings.articleSaving;t.template&&!((n=this.settings.articleSaving)!=null&&n.defaultTemplate)&&(this.settings.articleSaving.defaultTemplate=t.template,delete t.template),this.settings.display?(this.settings.display.filterDisplayStyle===void 0&&(this.settings.display.filterDisplayStyle=Z.display.filterDisplayStyle),this.settings.display.defaultFilter===void 0&&(this.settings.display.defaultFilter=Z.display.defaultFilter),this.settings.display.hiddenFilters===void 0&&(this.settings.display.hiddenFilters=Z.display.hiddenFilters)):this.settings.display=Z.display}async saveSettings(){await this.saveData(this.settings)}onunload(){}async validateSavedArticles(){let e=0;for(let t of this.settings.feeds)for(let s of t.items)s.saved&&(this.checkSavedFileExists(s)||(s.saved=!1,s.tags&&(s.tags=s.tags.filter(r=>r.name.toLowerCase()!=="saved")),e++));if(e>0){await this.saveSettings();let t=await this.getActiveDashboardView();t&&t.render()}}checkSavedFileExists(e){try{let t=this.settings.articleSaving.defaultFolder||"RSS articles",s=this.sanitizeFilename(e.title),a=t?`${t}/${s}.md`:`${s}.md`;return this.app.vault.getAbstractFileByPath(a)!==null}catch(t){return!1}}sanitizeFilename(e){return e.replace(/[/\\:*?"<>|]/g,"_").replace(/\s+/g,"_").replace(/_+/g,"_").substring(0,100)}getAllArticles(){let e=[];for(let t of this.settings.feeds)e=e.concat(t.items);return e}};

/* nosourcemap */